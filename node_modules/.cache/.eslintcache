[{"C:\\Users\\ADMIN\\OneDrive - FPT Corporation\\Documents\\GitHub\\Thriftorium\\src\\index.js":"1","C:\\Users\\ADMIN\\OneDrive - FPT Corporation\\Documents\\GitHub\\Thriftorium\\src\\App.jsx":"2","C:\\Users\\ADMIN\\OneDrive - FPT Corporation\\Documents\\GitHub\\Thriftorium\\src\\redux\\store.js":"3","C:\\Users\\ADMIN\\OneDrive - FPT Corporation\\Documents\\GitHub\\Thriftorium\\src\\context\\AuthContext.js":"4","C:\\Users\\ADMIN\\OneDrive - FPT Corporation\\Documents\\GitHub\\Thriftorium\\src\\redux\\orebiSlice.js":"5","C:\\Users\\ADMIN\\OneDrive - FPT Corporation\\Documents\\GitHub\\Thriftorium\\src\\routes\\Router.jsx":"6","C:\\Users\\ADMIN\\OneDrive - FPT Corporation\\Documents\\GitHub\\Thriftorium\\src\\pages\\Forbidden\\Forbidden.js":"7","C:\\Users\\ADMIN\\OneDrive - FPT Corporation\\Documents\\GitHub\\Thriftorium\\src\\layouts\\ProfileLayout.jsx":"8","C:\\Users\\ADMIN\\OneDrive - FPT Corporation\\Documents\\GitHub\\Thriftorium\\src\\layouts\\AdminLayout.jsx":"9","C:\\Users\\ADMIN\\OneDrive - FPT Corporation\\Documents\\GitHub\\Thriftorium\\src\\routes\\components\\ManagementRoute.jsx":"10","C:\\Users\\ADMIN\\OneDrive - FPT Corporation\\Documents\\GitHub\\Thriftorium\\src\\routes\\components\\PublicRoute.jsx":"11","C:\\Users\\ADMIN\\OneDrive - FPT Corporation\\Documents\\GitHub\\Thriftorium\\src\\layouts\\PublicLayout.jsx":"12","C:\\Users\\ADMIN\\OneDrive - FPT Corporation\\Documents\\GitHub\\Thriftorium\\src\\routes\\components\\PrivateRoute.jsx":"13","C:\\Users\\ADMIN\\OneDrive - FPT Corporation\\Documents\\GitHub\\Thriftorium\\src\\pages\\Shop\\Shop.jsx":"14","C:\\Users\\ADMIN\\OneDrive - FPT Corporation\\Documents\\GitHub\\Thriftorium\\src\\pages\\Account\\SignUp.jsx":"15","C:\\Users\\ADMIN\\OneDrive - FPT Corporation\\Documents\\GitHub\\Thriftorium\\src\\pages\\Account\\ResetPassword.jsx":"16","C:\\Users\\ADMIN\\OneDrive - FPT Corporation\\Documents\\GitHub\\Thriftorium\\src\\pages\\Home\\Home.jsx":"17","C:\\Users\\ADMIN\\OneDrive - FPT Corporation\\Documents\\GitHub\\Thriftorium\\src\\pages\\Account\\NewPassword.jsx":"18","C:\\Users\\ADMIN\\OneDrive - FPT Corporation\\Documents\\GitHub\\Thriftorium\\src\\pages\\Profile\\AccountInformation.jsx":"19","C:\\Users\\ADMIN\\OneDrive - FPT Corporation\\Documents\\GitHub\\Thriftorium\\src\\pages\\Account\\SignIn.jsx":"20","C:\\Users\\ADMIN\\OneDrive - FPT Corporation\\Documents\\GitHub\\Thriftorium\\src\\pages\\Profile\\ChangePassword.jsx":"21","C:\\Users\\ADMIN\\OneDrive - FPT Corporation\\Documents\\GitHub\\Thriftorium\\src\\pages\\Profile\\Voucher.jsx":"22","C:\\Users\\ADMIN\\OneDrive - FPT Corporation\\Documents\\GitHub\\Thriftorium\\src\\pages\\ProductDetails\\ProductDetails.jsx":"23","C:\\Users\\ADMIN\\OneDrive - FPT Corporation\\Documents\\GitHub\\Thriftorium\\src\\pages\\About\\About.jsx":"24","C:\\Users\\ADMIN\\OneDrive - FPT Corporation\\Documents\\GitHub\\Thriftorium\\src\\pages\\Profile\\MyOrder.jsx":"25","C:\\Users\\ADMIN\\OneDrive - FPT Corporation\\Documents\\GitHub\\Thriftorium\\src\\pages\\Blog\\BlogDetail.jsx":"26","C:\\Users\\ADMIN\\OneDrive - FPT Corporation\\Documents\\GitHub\\Thriftorium\\src\\pages\\Blog\\Blog.jsx":"27","C:\\Users\\ADMIN\\OneDrive - FPT Corporation\\Documents\\GitHub\\Thriftorium\\src\\pages\\Blog\\BlogList.jsx":"28","C:\\Users\\ADMIN\\OneDrive - FPT Corporation\\Documents\\GitHub\\Thriftorium\\src\\pages\\payment\\PaymentSuccess.jsx":"29","C:\\Users\\ADMIN\\OneDrive - FPT Corporation\\Documents\\GitHub\\Thriftorium\\src\\pages\\Subscription\\Subscription.jsx":"30","C:\\Users\\ADMIN\\OneDrive - FPT Corporation\\Documents\\GitHub\\Thriftorium\\src\\pages\\Cart\\Cart.jsx":"31","C:\\Users\\ADMIN\\OneDrive - FPT Corporation\\Documents\\GitHub\\Thriftorium\\src\\pages\\payment\\Payment.jsx":"32","C:\\Users\\ADMIN\\OneDrive - FPT Corporation\\Documents\\GitHub\\Thriftorium\\src\\pages\\Admin\\category\\CategoryManager.jsx":"33","C:\\Users\\ADMIN\\OneDrive - FPT Corporation\\Documents\\GitHub\\Thriftorium\\src\\pages\\Admin\\blog\\BlogManager.jsx":"34","C:\\Users\\ADMIN\\OneDrive - FPT Corporation\\Documents\\GitHub\\Thriftorium\\src\\pages\\Admin\\user\\UserManager.jsx":"35","C:\\Users\\ADMIN\\OneDrive - FPT Corporation\\Documents\\GitHub\\Thriftorium\\src\\pages\\Admin\\subscription\\SubscriptionManager.jsx":"36","C:\\Users\\ADMIN\\OneDrive - FPT Corporation\\Documents\\GitHub\\Thriftorium\\src\\pages\\Admin\\products\\ProductManager.jsx":"37","C:\\Users\\ADMIN\\OneDrive - FPT Corporation\\Documents\\GitHub\\Thriftorium\\src\\pages\\Admin\\voucher\\VoucherManager.jsx":"38","C:\\Users\\ADMIN\\OneDrive - FPT Corporation\\Documents\\GitHub\\Thriftorium\\src\\pages\\Admin\\dashboard\\Dashboard.jsx":"39","C:\\Users\\ADMIN\\OneDrive - FPT Corporation\\Documents\\GitHub\\Thriftorium\\src\\pages\\Admin\\report\\ReportManager.jsx":"40","C:\\Users\\ADMIN\\OneDrive - FPT Corporation\\Documents\\GitHub\\Thriftorium\\src\\pages\\Admin\\order\\OrderManager.jsx":"41","C:\\Users\\ADMIN\\OneDrive - FPT Corporation\\Documents\\GitHub\\Thriftorium\\src\\routes\\routes.js":"42","C:\\Users\\ADMIN\\OneDrive - FPT Corporation\\Documents\\GitHub\\Thriftorium\\src\\service\\AuthService.js":"43","C:\\Users\\ADMIN\\OneDrive - FPT Corporation\\Documents\\GitHub\\Thriftorium\\src\\service\\ProductService.js":"44","C:\\Users\\ADMIN\\OneDrive - FPT Corporation\\Documents\\GitHub\\Thriftorium\\src\\components\\pageProps\\Breadcrumbs.js":"45","C:\\Users\\ADMIN\\OneDrive - FPT Corporation\\Documents\\GitHub\\Thriftorium\\src\\components\\Banner\\Banner.js":"46","C:\\Users\\ADMIN\\OneDrive - FPT Corporation\\Documents\\GitHub\\Thriftorium\\src\\components\\Banner\\BannerBottom.js":"47","C:\\Users\\ADMIN\\OneDrive - FPT Corporation\\Documents\\GitHub\\Thriftorium\\src\\components\\home\\Footer\\Footer.js":"48","C:\\Users\\ADMIN\\OneDrive - FPT Corporation\\Documents\\GitHub\\Thriftorium\\src\\components\\pageProps\\shopPage\\ProductBanner.js":"49","C:\\Users\\ADMIN\\OneDrive - FPT Corporation\\Documents\\GitHub\\Thriftorium\\src\\components\\home\\SpecialOffers\\SpecialOffers.js":"50","C:\\Users\\ADMIN\\OneDrive - FPT Corporation\\Documents\\GitHub\\Thriftorium\\src\\components\\pageProps\\shopPage\\ShopSideNav.js":"51","C:\\Users\\ADMIN\\OneDrive - FPT Corporation\\Documents\\GitHub\\Thriftorium\\src\\components\\home\\Footer\\FooterBottom.js":"52","C:\\Users\\ADMIN\\OneDrive - FPT Corporation\\Documents\\GitHub\\Thriftorium\\src\\service\\RatingService.js":"53","C:\\Users\\ADMIN\\OneDrive - FPT Corporation\\Documents\\GitHub\\Thriftorium\\src\\service\\UserVoucherService.js":"54","C:\\Users\\ADMIN\\OneDrive - FPT Corporation\\Documents\\GitHub\\Thriftorium\\src\\service\\CartService.js":"55","C:\\Users\\ADMIN\\OneDrive - FPT Corporation\\Documents\\GitHub\\Thriftorium\\src\\service\\OrderService.js":"56","C:\\Users\\ADMIN\\OneDrive - FPT Corporation\\Documents\\GitHub\\Thriftorium\\src\\service\\ReviewService.js":"57","C:\\Users\\ADMIN\\OneDrive - FPT Corporation\\Documents\\GitHub\\Thriftorium\\src\\service\\ReportService.js":"58","C:\\Users\\ADMIN\\OneDrive - FPT Corporation\\Documents\\GitHub\\Thriftorium\\src\\components\\home\\Sale\\Sale.js":"59","C:\\Users\\ADMIN\\OneDrive - FPT Corporation\\Documents\\GitHub\\Thriftorium\\src\\components\\home\\YearProduct\\YearProduct.js":"60","C:\\Users\\ADMIN\\OneDrive - FPT Corporation\\Documents\\GitHub\\Thriftorium\\src\\service\\AccountAppService.js":"61","C:\\Users\\ADMIN\\OneDrive - FPT Corporation\\Documents\\GitHub\\Thriftorium\\src\\service\\BlogService.js":"62","C:\\Users\\ADMIN\\OneDrive - FPT Corporation\\Documents\\GitHub\\Thriftorium\\src\\service\\SubscriptionService.js":"63","C:\\Users\\ADMIN\\OneDrive - FPT Corporation\\Documents\\GitHub\\Thriftorium\\src\\service\\SubscriptionPlanService.js":"64","C:\\Users\\ADMIN\\OneDrive - FPT Corporation\\Documents\\GitHub\\Thriftorium\\src\\components\\home\\Header\\Header.jsx":"65","C:\\Users\\ADMIN\\OneDrive - FPT Corporation\\Documents\\GitHub\\Thriftorium\\src\\service\\CheckoutService.js":"66","C:\\Users\\ADMIN\\OneDrive - FPT Corporation\\Documents\\GitHub\\Thriftorium\\src\\service\\CategoryService.js":"67","C:\\Users\\ADMIN\\OneDrive - FPT Corporation\\Documents\\GitHub\\Thriftorium\\src\\service\\DashboardService.js":"68","C:\\Users\\ADMIN\\OneDrive - FPT Corporation\\Documents\\GitHub\\Thriftorium\\src\\service\\VoucherTemplateService.js":"69","C:\\Users\\ADMIN\\OneDrive - FPT Corporation\\Documents\\GitHub\\Thriftorium\\src\\service\\AccountService.js":"70","C:\\Users\\ADMIN\\OneDrive - FPT Corporation\\Documents\\GitHub\\Thriftorium\\src\\components\\home\\Products\\Product.jsx":"71","C:\\Users\\ADMIN\\OneDrive - FPT Corporation\\Documents\\GitHub\\Thriftorium\\src\\components\\home\\NewArrivals\\NewArrivals.jsx":"72","C:\\Users\\ADMIN\\OneDrive - FPT Corporation\\Documents\\GitHub\\Thriftorium\\src\\pages\\Cart\\ItemCard.jsx":"73","C:\\Users\\ADMIN\\OneDrive - FPT Corporation\\Documents\\GitHub\\Thriftorium\\src\\assets\\images\\index.js":"74","C:\\Users\\ADMIN\\OneDrive - FPT Corporation\\Documents\\GitHub\\Thriftorium\\src\\components\\home\\Header\\HeaderBottom.jsx":"75","C:\\Users\\ADMIN\\OneDrive - FPT Corporation\\Documents\\GitHub\\Thriftorium\\src\\components\\SpecialCase\\SpecialCase.jsx":"76","C:\\Users\\ADMIN\\OneDrive - FPT Corporation\\Documents\\GitHub\\Thriftorium\\src\\components\\home\\BestSellers\\BestSellers.jsx":"77","C:\\Users\\ADMIN\\OneDrive - FPT Corporation\\Documents\\GitHub\\Thriftorium\\src\\pages\\Admin\\blog\\components\\BlogModal.jsx":"78","C:\\Users\\ADMIN\\OneDrive - FPT Corporation\\Documents\\GitHub\\Thriftorium\\src\\pages\\Admin\\category\\components\\CategoryModal.jsx":"79","C:\\Users\\ADMIN\\OneDrive - FPT Corporation\\Documents\\GitHub\\Thriftorium\\src\\pages\\Admin\\user\\components\\UserModal.jsx":"80","C:\\Users\\ADMIN\\OneDrive - FPT Corporation\\Documents\\GitHub\\Thriftorium\\src\\pages\\Admin\\products\\components\\ProductModal.jsx":"81","C:\\Users\\ADMIN\\OneDrive - FPT Corporation\\Documents\\GitHub\\Thriftorium\\src\\components\\designLayouts\\Image.js":"82","C:\\Users\\ADMIN\\OneDrive - FPT Corporation\\Documents\\GitHub\\Thriftorium\\src\\components\\home\\Products\\Heading.js":"83","C:\\Users\\ADMIN\\OneDrive - FPT Corporation\\Documents\\GitHub\\Thriftorium\\src\\components\\home\\Footer\\FooterListTitle.js":"84","C:\\Users\\ADMIN\\OneDrive - FPT Corporation\\Documents\\GitHub\\Thriftorium\\src\\components\\designLayouts\\Flex.js":"85","C:\\Users\\ADMIN\\OneDrive - FPT Corporation\\Documents\\GitHub\\Thriftorium\\src\\constants\\index.js":"86","C:\\Users\\ADMIN\\OneDrive - FPT Corporation\\Documents\\GitHub\\Thriftorium\\src\\components\\home\\Products\\Badge.js":"87","C:\\Users\\ADMIN\\OneDrive - FPT Corporation\\Documents\\GitHub\\Thriftorium\\src\\components\\designLayouts\\buttons\\ShopNow.js":"88","C:\\Users\\ADMIN\\OneDrive - FPT Corporation\\Documents\\GitHub\\Thriftorium\\src\\components\\pageProps\\shopPage\\shopBy\\Category.js":"89","C:\\Users\\ADMIN\\OneDrive - FPT Corporation\\Documents\\GitHub\\Thriftorium\\src\\components\\pageProps\\shopPage\\shopBy\\Price.js":"90","C:\\Users\\ADMIN\\OneDrive - FPT Corporation\\Documents\\GitHub\\Thriftorium\\src\\components\\home\\NewArrivals\\SampleNextArrow.jsx":"91","C:\\Users\\ADMIN\\OneDrive - FPT Corporation\\Documents\\GitHub\\Thriftorium\\src\\components\\home\\NewArrivals\\SamplePrevArrow.jsx":"92","C:\\Users\\ADMIN\\OneDrive - FPT Corporation\\Documents\\GitHub\\Thriftorium\\src\\components\\pageProps\\shopPage\\shopBy\\NavTitle.js":"93"},{"size":639,"mtime":1751295881487,"results":"94","hashOfConfig":"95"},{"size":336,"mtime":1751295881422,"results":"96","hashOfConfig":"95"},{"size":766,"mtime":1751295881501,"results":"97","hashOfConfig":"95"},{"size":1635,"mtime":1751983708993,"results":"98","hashOfConfig":"95"},{"size":1731,"mtime":1752710515604,"results":"99","hashOfConfig":"95"},{"size":5950,"mtime":1751983709000,"results":"100","hashOfConfig":"95"},{"size":525,"mtime":1751295881496,"results":"101","hashOfConfig":"95"},{"size":620,"mtime":1751295881487,"results":"102","hashOfConfig":"95"},{"size":4487,"mtime":1751983708993,"results":"103","hashOfConfig":"95"},{"size":575,"mtime":1751295881501,"results":"104","hashOfConfig":"95"},{"size":182,"mtime":1751295881502,"results":"105","hashOfConfig":"95"},{"size":586,"mtime":1751295881488,"results":"106","hashOfConfig":"95"},{"size":443,"mtime":1751295881502,"results":"107","hashOfConfig":"95"},{"size":6222,"mtime":1751295881498,"results":"108","hashOfConfig":"95"},{"size":10718,"mtime":1751295881489,"results":"109","hashOfConfig":"95"},{"size":2292,"mtime":1751295881489,"results":"110","hashOfConfig":"95"},{"size":853,"mtime":1751295881496,"results":"111","hashOfConfig":"95"},{"size":5387,"mtime":1751295881488,"results":"112","hashOfConfig":"95"},{"size":8748,"mtime":1751295881497,"results":"113","hashOfConfig":"95"},{"size":8464,"mtime":1752063758062,"results":"114","hashOfConfig":"95"},{"size":9508,"mtime":1751295881498,"results":"115","hashOfConfig":"95"},{"size":8104,"mtime":1751983708998,"results":"116","hashOfConfig":"95"},{"size":28524,"mtime":1752710515604,"results":"117","hashOfConfig":"95"},{"size":4140,"mtime":1751295881488,"results":"118","hashOfConfig":"95"},{"size":25499,"mtime":1752710515604,"results":"119","hashOfConfig":"95"},{"size":11642,"mtime":1751295881493,"results":"120","hashOfConfig":"95"},{"size":8323,"mtime":1751295881493,"results":"121","hashOfConfig":"95"},{"size":16525,"mtime":1751295881494,"results":"122","hashOfConfig":"95"},{"size":1277,"mtime":1751983709000,"results":"123","hashOfConfig":"95"},{"size":9558,"mtime":1751983708999,"results":"124","hashOfConfig":"95"},{"size":15808,"mtime":1752710515604,"results":"125","hashOfConfig":"95"},{"size":10078,"mtime":1751983708999,"results":"126","hashOfConfig":"95"},{"size":3301,"mtime":1751295881490,"results":"127","hashOfConfig":"95"},{"size":14653,"mtime":1751295881490,"results":"128","hashOfConfig":"95"},{"size":18953,"mtime":1751295881492,"results":"129","hashOfConfig":"95"},{"size":6093,"mtime":1751295881492,"results":"130","hashOfConfig":"95"},{"size":4043,"mtime":1752710515604,"results":"131","hashOfConfig":"95"},{"size":9200,"mtime":1751983708996,"results":"132","hashOfConfig":"95"},{"size":11191,"mtime":1752710515597,"results":"133","hashOfConfig":"95"},{"size":12862,"mtime":1751983708995,"results":"134","hashOfConfig":"95"},{"size":18508,"mtime":1752710515604,"results":"135","hashOfConfig":"95"},{"size":59,"mtime":1751295881502,"results":"136","hashOfConfig":"95"},{"size":1649,"mtime":1752811531099,"results":"137","hashOfConfig":"95"},{"size":2842,"mtime":1752811531106,"results":"138","hashOfConfig":"95"},{"size":1005,"mtime":1751295881483,"results":"139","hashOfConfig":"95"},{"size":3156,"mtime":1751295881476,"results":"140","hashOfConfig":"95"},{"size":1288,"mtime":1751295881476,"results":"141","hashOfConfig":"95"},{"size":6179,"mtime":1751295881479,"results":"142","hashOfConfig":"95"},{"size":1334,"mtime":1751295881485,"results":"143","hashOfConfig":"95"},{"size":2412,"mtime":1751295881483,"results":"144","hashOfConfig":"95"},{"size":658,"mtime":1751295881485,"results":"145","hashOfConfig":"95"},{"size":899,"mtime":1751295881479,"results":"146","hashOfConfig":"95"},{"size":1257,"mtime":1752811531106,"results":"147","hashOfConfig":"95"},{"size":2702,"mtime":1752811531106,"results":"148","hashOfConfig":"95"},{"size":1602,"mtime":1752811531099,"results":"149","hashOfConfig":"95"},{"size":3158,"mtime":1752811531106,"results":"150","hashOfConfig":"95"},{"size":1748,"mtime":1752811531106,"results":"151","hashOfConfig":"95"},{"size":2757,"mtime":1752811531106,"results":"152","hashOfConfig":"95"},{"size":1110,"mtime":1751295881482,"results":"153","hashOfConfig":"95"},{"size":1145,"mtime":1751295881483,"results":"154","hashOfConfig":"95"},{"size":758,"mtime":1752811531099,"results":"155","hashOfConfig":"95"},{"size":1946,"mtime":1752811531099,"results":"156","hashOfConfig":"95"},{"size":1693,"mtime":1752811531106,"results":"157","hashOfConfig":"95"},{"size":1818,"mtime":1752811531106,"results":"158","hashOfConfig":"95"},{"size":5944,"mtime":1751295881480,"results":"159","hashOfConfig":"95"},{"size":3404,"mtime":1752811531106,"results":"160","hashOfConfig":"95"},{"size":1582,"mtime":1752811531105,"results":"161","hashOfConfig":"95"},{"size":2071,"mtime":1752811531106,"results":"162","hashOfConfig":"95"},{"size":2744,"mtime":1752811531106,"results":"163","hashOfConfig":"95"},{"size":1324,"mtime":1752811531099,"results":"164","hashOfConfig":"95"},{"size":5023,"mtime":1751295881482,"results":"165","hashOfConfig":"95"},{"size":3200,"mtime":1751295881480,"results":"166","hashOfConfig":"95"},{"size":3210,"mtime":1751983708997,"results":"167","hashOfConfig":"95"},{"size":2126,"mtime":1751295881427,"results":"168","hashOfConfig":"95"},{"size":12359,"mtime":1752710515597,"results":"169","hashOfConfig":"95"},{"size":3165,"mtime":1752710515597,"results":"170","hashOfConfig":"95"},{"size":2329,"mtime":1752710515597,"results":"171","hashOfConfig":"95"},{"size":16363,"mtime":1751295881490,"results":"172","hashOfConfig":"95"},{"size":1140,"mtime":1751295881491,"results":"173","hashOfConfig":"95"},{"size":15576,"mtime":1751295881493,"results":"174","hashOfConfig":"95"},{"size":6816,"mtime":1752710515604,"results":"175","hashOfConfig":"95"},{"size":170,"mtime":1751295881477,"results":"176","hashOfConfig":"95"},{"size":169,"mtime":1751295881482,"results":"177","hashOfConfig":"95"},{"size":192,"mtime":1751295881479,"results":"178","hashOfConfig":"95"},{"size":158,"mtime":1751295881477,"results":"179","hashOfConfig":"95"},{"size":14928,"mtime":1751295881486,"results":"180","hashOfConfig":"95"},{"size":300,"mtime":1751295881482,"results":"181","hashOfConfig":"95"},{"size":265,"mtime":1751295881478,"results":"182","hashOfConfig":"95"},{"size":2617,"mtime":1751295881485,"results":"183","hashOfConfig":"95"},{"size":4219,"mtime":1751295881485,"results":"184","hashOfConfig":"95"},{"size":536,"mtime":1751295881482,"results":"185","hashOfConfig":"95"},{"size":513,"mtime":1751295881482,"results":"186","hashOfConfig":"95"},{"size":526,"mtime":1751295881485,"results":"187","hashOfConfig":"95"},{"filePath":"188","messages":"189","suppressedMessages":"190","errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0},"vkpwdr",{"filePath":"191","messages":"192","suppressedMessages":"193","errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0},{"filePath":"194","messages":"195","suppressedMessages":"196","errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0},{"filePath":"197","messages":"198","suppressedMessages":"199","errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0},{"filePath":"200","messages":"201","suppressedMessages":"202","errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0},{"filePath":"203","messages":"204","suppressedMessages":"205","errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0},{"filePath":"206","messages":"207","suppressedMessages":"208","errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0},{"filePath":"209","messages":"210","suppressedMessages":"211","errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0},{"filePath":"212","messages":"213","suppressedMessages":"214","errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0},{"filePath":"215","messages":"216","suppressedMessages":"217","errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0},{"filePath":"218","messages":"219","suppressedMessages":"220","errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0},{"filePath":"221","messages":"222","suppressedMessages":"223","errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0},{"filePath":"224","messages":"225","suppressedMessages":"226","errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0},{"filePath":"227","messages":"228","suppressedMessages":"229","errorCount":0,"fatalErrorCount":0,"warningCount":3,"fixableErrorCount":0,"fixableWarningCount":0,"source":"230"},{"filePath":"231","messages":"232","suppressedMessages":"233","errorCount":0,"fatalErrorCount":0,"warningCount":5,"fixableErrorCount":0,"fixableWarningCount":0,"source":"234"},{"filePath":"235","messages":"236","suppressedMessages":"237","errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0},{"filePath":"238","messages":"239","suppressedMessages":"240","errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0},{"filePath":"241","messages":"242","suppressedMessages":"243","errorCount":0,"fatalErrorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"244"},{"filePath":"245","messages":"246","suppressedMessages":"247","errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0},{"filePath":"248","messages":"249","suppressedMessages":"250","errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0},{"filePath":"251","messages":"252","suppressedMessages":"253","errorCount":0,"fatalErrorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"254"},{"filePath":"255","messages":"256","suppressedMessages":"257","errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0},{"filePath":"258","messages":"259","suppressedMessages":"260","errorCount":0,"fatalErrorCount":0,"warningCount":4,"fixableErrorCount":0,"fixableWarningCount":0,"source":"261"},{"filePath":"262","messages":"263","suppressedMessages":"264","errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0},{"filePath":"265","messages":"266","suppressedMessages":"267","errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0},{"filePath":"268","messages":"269","suppressedMessages":"270","errorCount":0,"fatalErrorCount":0,"warningCount":2,"fixableErrorCount":0,"fixableWarningCount":0,"source":"271"},{"filePath":"272","messages":"273","suppressedMessages":"274","errorCount":0,"fatalErrorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"275"},{"filePath":"276","messages":"277","suppressedMessages":"278","errorCount":0,"fatalErrorCount":0,"warningCount":4,"fixableErrorCount":0,"fixableWarningCount":0,"source":"279"},{"filePath":"280","messages":"281","suppressedMessages":"282","errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0},{"filePath":"283","messages":"284","suppressedMessages":"285","errorCount":0,"fatalErrorCount":0,"warningCount":2,"fixableErrorCount":0,"fixableWarningCount":0,"source":"286"},{"filePath":"287","messages":"288","suppressedMessages":"289","errorCount":0,"fatalErrorCount":0,"warningCount":3,"fixableErrorCount":0,"fixableWarningCount":0,"source":"290"},{"filePath":"291","messages":"292","suppressedMessages":"293","errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0},{"filePath":"294","messages":"295","suppressedMessages":"296","errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0},{"filePath":"297","messages":"298","suppressedMessages":"299","errorCount":0,"fatalErrorCount":0,"warningCount":2,"fixableErrorCount":0,"fixableWarningCount":0,"source":"300"},{"filePath":"301","messages":"302","suppressedMessages":"303","errorCount":0,"fatalErrorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"304"},{"filePath":"305","messages":"306","suppressedMessages":"307","errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0},{"filePath":"308","messages":"309","suppressedMessages":"310","errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0},{"filePath":"311","messages":"312","suppressedMessages":"313","errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0},{"filePath":"314","messages":"315","suppressedMessages":"316","errorCount":0,"fatalErrorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"317"},{"filePath":"318","messages":"319","suppressedMessages":"320","errorCount":0,"fatalErrorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"321"},{"filePath":"322","messages":"323","suppressedMessages":"324","errorCount":0,"fatalErrorCount":0,"warningCount":2,"fixableErrorCount":0,"fixableWarningCount":0,"source":"325"},{"filePath":"326","messages":"327","suppressedMessages":"328","errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0},{"filePath":"329","messages":"330","suppressedMessages":"331","errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0},{"filePath":"332","messages":"333","suppressedMessages":"334","errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0},{"filePath":"335","messages":"336","suppressedMessages":"337","errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0},{"filePath":"338","messages":"339","suppressedMessages":"340","errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0},{"filePath":"341","messages":"342","suppressedMessages":"343","errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0},{"filePath":"344","messages":"345","suppressedMessages":"346","errorCount":0,"fatalErrorCount":0,"warningCount":6,"fixableErrorCount":0,"fixableWarningCount":0,"source":"347"},{"filePath":"348","messages":"349","suppressedMessages":"350","errorCount":0,"fatalErrorCount":0,"warningCount":4,"fixableErrorCount":0,"fixableWarningCount":0,"source":"351"},{"filePath":"352","messages":"353","suppressedMessages":"354","errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0},{"filePath":"355","messages":"356","suppressedMessages":"357","errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0},{"filePath":"358","messages":"359","suppressedMessages":"360","errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0},{"filePath":"361","messages":"362","suppressedMessages":"363","errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0},{"filePath":"364","messages":"365","suppressedMessages":"366","errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0},{"filePath":"367","messages":"368","suppressedMessages":"369","errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0},{"filePath":"370","messages":"371","suppressedMessages":"372","errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0},{"filePath":"373","messages":"374","suppressedMessages":"375","errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0},{"filePath":"376","messages":"377","suppressedMessages":"378","errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0},{"filePath":"379","messages":"380","suppressedMessages":"381","errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0},{"filePath":"382","messages":"383","suppressedMessages":"384","errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0},{"filePath":"385","messages":"386","suppressedMessages":"387","errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0},{"filePath":"388","messages":"389","suppressedMessages":"390","errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0},{"filePath":"391","messages":"392","suppressedMessages":"393","errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0},{"filePath":"394","messages":"395","suppressedMessages":"396","errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0},{"filePath":"397","messages":"398","suppressedMessages":"399","errorCount":0,"fatalErrorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"400"},{"filePath":"401","messages":"402","suppressedMessages":"403","errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0},{"filePath":"404","messages":"405","suppressedMessages":"406","errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0},{"filePath":"407","messages":"408","suppressedMessages":"409","errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0},{"filePath":"410","messages":"411","suppressedMessages":"412","errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0},{"filePath":"413","messages":"414","suppressedMessages":"415","errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0},{"filePath":"416","messages":"417","suppressedMessages":"418","errorCount":0,"fatalErrorCount":0,"warningCount":2,"fixableErrorCount":0,"fixableWarningCount":0,"source":"419"},{"filePath":"420","messages":"421","suppressedMessages":"422","errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0},{"filePath":"423","messages":"424","suppressedMessages":"425","errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0},{"filePath":"426","messages":"427","suppressedMessages":"428","errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0},{"filePath":"429","messages":"430","suppressedMessages":"431","errorCount":0,"fatalErrorCount":0,"warningCount":2,"fixableErrorCount":0,"fixableWarningCount":0,"source":"432"},{"filePath":"433","messages":"434","suppressedMessages":"435","errorCount":0,"fatalErrorCount":0,"warningCount":2,"fixableErrorCount":0,"fixableWarningCount":0,"source":"436"},{"filePath":"437","messages":"438","suppressedMessages":"439","errorCount":0,"fatalErrorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"440"},{"filePath":"441","messages":"442","suppressedMessages":"443","errorCount":0,"fatalErrorCount":0,"warningCount":2,"fixableErrorCount":0,"fixableWarningCount":0,"source":"444"},{"filePath":"445","messages":"446","suppressedMessages":"447","errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0},{"filePath":"448","messages":"449","suppressedMessages":"450","errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0},{"filePath":"451","messages":"452","suppressedMessages":"453","errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0},{"filePath":"454","messages":"455","suppressedMessages":"456","errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0},{"filePath":"457","messages":"458","suppressedMessages":"459","errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0},{"filePath":"460","messages":"461","suppressedMessages":"462","errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0},{"filePath":"463","messages":"464","suppressedMessages":"465","errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0},{"filePath":"466","messages":"467","suppressedMessages":"468","errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0},{"filePath":"469","messages":"470","suppressedMessages":"471","errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0},{"filePath":"472","messages":"473","suppressedMessages":"474","errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0},{"filePath":"475","messages":"476","suppressedMessages":"477","errorCount":0,"fatalErrorCount":0,"warningCount":3,"fixableErrorCount":0,"fixableWarningCount":0,"source":"478"},{"filePath":"479","messages":"480","suppressedMessages":"481","errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0},{"filePath":"482","messages":"483","suppressedMessages":"484","errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0},{"filePath":"485","messages":"486","suppressedMessages":"487","errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0},{"filePath":"488","messages":"489","suppressedMessages":"490","errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0},"C:\\Users\\ADMIN\\OneDrive - FPT Corporation\\Documents\\GitHub\\Thriftorium\\src\\index.js",[],[],"C:\\Users\\ADMIN\\OneDrive - FPT Corporation\\Documents\\GitHub\\Thriftorium\\src\\App.jsx",[],[],"C:\\Users\\ADMIN\\OneDrive - FPT Corporation\\Documents\\GitHub\\Thriftorium\\src\\redux\\store.js",[],[],"C:\\Users\\ADMIN\\OneDrive - FPT Corporation\\Documents\\GitHub\\Thriftorium\\src\\context\\AuthContext.js",[],[],"C:\\Users\\ADMIN\\OneDrive - FPT Corporation\\Documents\\GitHub\\Thriftorium\\src\\redux\\orebiSlice.js",[],[],"C:\\Users\\ADMIN\\OneDrive - FPT Corporation\\Documents\\GitHub\\Thriftorium\\src\\routes\\Router.jsx",[],[],"C:\\Users\\ADMIN\\OneDrive - FPT Corporation\\Documents\\GitHub\\Thriftorium\\src\\pages\\Forbidden\\Forbidden.js",[],[],"C:\\Users\\ADMIN\\OneDrive - FPT Corporation\\Documents\\GitHub\\Thriftorium\\src\\layouts\\ProfileLayout.jsx",[],[],"C:\\Users\\ADMIN\\OneDrive - FPT Corporation\\Documents\\GitHub\\Thriftorium\\src\\layouts\\AdminLayout.jsx",[],[],"C:\\Users\\ADMIN\\OneDrive - FPT Corporation\\Documents\\GitHub\\Thriftorium\\src\\routes\\components\\ManagementRoute.jsx",[],[],"C:\\Users\\ADMIN\\OneDrive - FPT Corporation\\Documents\\GitHub\\Thriftorium\\src\\routes\\components\\PublicRoute.jsx",[],[],"C:\\Users\\ADMIN\\OneDrive - FPT Corporation\\Documents\\GitHub\\Thriftorium\\src\\layouts\\PublicLayout.jsx",[],[],"C:\\Users\\ADMIN\\OneDrive - FPT Corporation\\Documents\\GitHub\\Thriftorium\\src\\routes\\components\\PrivateRoute.jsx",[],[],"C:\\Users\\ADMIN\\OneDrive - FPT Corporation\\Documents\\GitHub\\Thriftorium\\src\\pages\\Shop\\Shop.jsx",["491","492","493"],[],"import React, { useState, useEffect, useMemo } from \"react\";\r\nimport { useLocation, useSearchParams } from \"react-router-dom\";\r\nimport Breadcrumbs from \"../../components/pageProps/Breadcrumbs\";\r\nimport ProductBanner from \"../../components/pageProps/shopPage/ProductBanner\";\r\nimport ShopSideNav from \"../../components/pageProps/shopPage/ShopSideNav\";\r\nimport Product from \"../../components/home/Products/Product\";\r\nimport ProductService from \"../../service/ProductService\";\r\n\r\nconst Shop = () => {\r\n  const location = useLocation();\r\n  const [searchParams, setSearchParams] = useSearchParams();\r\n  \r\n  // State for products and loading\r\n  const [products, setProducts] = useState([]);\r\n  const [loading, setLoading] = useState(false);\r\n  const [totalProducts, setTotalProducts] = useState(0);\r\n  \r\n  // State for individual filters\r\n  const [searchFilter, setSearchFilter] = useState(searchParams.get('search') || '');\r\n  const [categoryFilter, setCategoryFilter] = useState(searchParams.get('category') || '');\r\n  const [lowPriceFilter, setLowPriceFilter] = useState(searchParams.get('lowPrice') || '');\r\n  const [highPriceFilter, setHighPriceFilter] = useState(searchParams.get('highPrice') || '');\r\n  const [sortBy, setSortBy] = useState(searchParams.get('sortBy') || 'newest');\r\n\r\n  // Combined filters for API call - memoized to prevent unnecessary re-renders\r\n  const filters = useMemo(() => ({\r\n    search: searchFilter,\r\n    category: categoryFilter,\r\n    lowPrice: lowPriceFilter,\r\n    highPrice: highPriceFilter,\r\n    sortBy: sortBy\r\n  }), [searchFilter, categoryFilter, lowPriceFilter, highPriceFilter, sortBy]);\r\n\r\n  const handleSortChange = (newSortBy) => {\r\n    setSortBy(newSortBy);\r\n  };\r\n\r\n  const handleFiltersChange = (newFilters) => {\r\n    if (newFilters.search !== undefined) setSearchFilter(newFilters.search);\r\n    if (newFilters.category !== undefined) setCategoryFilter(newFilters.category);\r\n    if (newFilters.lowPrice !== undefined) setLowPriceFilter(newFilters.lowPrice);\r\n    if (newFilters.highPrice !== undefined) setHighPriceFilter(newFilters.highPrice);\r\n  };\r\n\r\n  // Fetch products from API\r\n  useEffect(() => {\r\n    const fetchProducts = async () => {\r\n      try {\r\n        setLoading(true);\r\n        const params = {\r\n          sortBy: filters.sortBy,\r\n          ...(filters.search && { search: filters.search }),\r\n          ...(filters.category && { category: filters.category }),\r\n          ...(filters.lowPrice && { lowPrice: parseFloat(filters.lowPrice) }),\r\n          ...(filters.highPrice && { highPrice: parseFloat(filters.highPrice) })\r\n        };\r\n\r\n        const data = await ProductService.getProductsBase(params);\r\n        setProducts(data ?? []);\r\n        setTotalProducts(data?.length || 0);\r\n      } catch (error) {\r\n        console.error(\"Error fetching products:\", error);\r\n        setProducts([]);\r\n        setTotalProducts(0);\r\n      } finally {\r\n        setLoading(false);\r\n      }\r\n    };\r\n\r\n    fetchProducts();\r\n  }, [filters]);\r\n\r\n  // Update filters when URL parameters change (e.g., when clicking category in header)\r\n  useEffect(() => {\r\n    const urlSearch = searchParams.get('search') || '';\r\n    const urlCategory = searchParams.get('category') || '';\r\n    const urlLowPrice = searchParams.get('lowPrice') || '';\r\n    const urlHighPrice = searchParams.get('highPrice') || '';\r\n    const urlSortBy = searchParams.get('sortBy') || 'newest';\r\n\r\n    // Only update if values are different to avoid unnecessary re-renders\r\n    if (urlSearch !== searchFilter) setSearchFilter(urlSearch);\r\n    if (urlCategory !== categoryFilter) setCategoryFilter(urlCategory);\r\n    if (urlLowPrice !== lowPriceFilter) setLowPriceFilter(urlLowPrice);\r\n    if (urlHighPrice !== highPriceFilter) setHighPriceFilter(urlHighPrice);\r\n    if (urlSortBy !== sortBy) setSortBy(urlSortBy);\r\n  }, [searchParams, searchFilter, categoryFilter, lowPriceFilter, highPriceFilter, sortBy]);\r\n\r\n  return (\r\n    <div className=\"max-w-container mx-auto px-4\">\r\n      <Breadcrumbs title=\"Products\" />\r\n      {/* ================= Products Start here =================== */}\r\n      <div className=\"w-full h-full flex pb-20 gap-10\">\r\n        <div className=\"w-[20%] lgl:w-[25%] hidden mdl:inline-flex h-full\">\r\n          <ShopSideNav \r\n            filters={{\r\n              category: categoryFilter,\r\n              lowPrice: lowPriceFilter,\r\n              highPrice: highPriceFilter\r\n            }}\r\n            onFiltersChange={handleFiltersChange}\r\n          />\r\n        </div>\r\n        <div className=\"w-full mdl:w-[80%] lgl:w-[75%] h-full flex flex-col gap-10\">\r\n          <ProductBanner \r\n            onSortChange={handleSortChange}\r\n            currentSort={sortBy}\r\n          />\r\n          {loading ? (\r\n            <div className=\"flex justify-center items-center py-20\">\r\n              <div className=\"text-lg\">Đang tải sản phẩm...</div>\r\n            </div>\r\n          ) : (\r\n            <div className=\"grid grid-cols-1 md:grid-cols-2 xl:grid-cols-3 gap-10 mdl:gap-4 lg:gap-10\">\r\n              {products && products.length > 0 ? (\r\n                products.map((item) => (\r\n                  <div key={item.productId} className=\"w-full\">\r\n                    <Product\r\n                      _id={item.productId}\r\n                      img={item.imageProducts?.[0]?.image || '/placeholder-image.jpg'}\r\n                      productName={item.name}\r\n                      price={item.purchasePrice}\r\n                      color={item.color}\r\n                      badge={item.badge}\r\n                      des={item.description}\r\n                      category={item.category?.name}\r\n                      averageRating={item.averageRating}\r\n                      totalRatings={item.ratings?.length || 0}\r\n                    />\r\n                  </div>\r\n                ))\r\n              ) : (\r\n                <div className=\"col-span-full text-center py-10\">\r\n                  <p className=\"text-lg text-gray-500\">Không tìm thấy sản phẩm nào</p>\r\n                </div>\r\n              )}\r\n            </div>\r\n          )}\r\n        </div>\r\n      </div>\r\n      {/* ================= Products End here ===================== */}\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default Shop;\r\n","C:\\Users\\ADMIN\\OneDrive - FPT Corporation\\Documents\\GitHub\\Thriftorium\\src\\pages\\Account\\SignUp.jsx",["494","495","496","497","498"],[],"import React, { useState } from \"react\";\r\nimport { Link, useNavigate } from \"react-router-dom\";\r\nimport AuthService from \"../../service/AuthService\"; // Import hàm signup từ AuthService.js\r\n\r\nconst SignUp = () => {\r\n  // ============= Initial State Start here =============\r\n  const [clientName, setClientName] = useState(\"\");\r\n  const [email, setEmail] = useState(\"\");\r\n  const [phone, setPhone] = useState(\"\");\r\n  const [password, setPassword] = useState(\"\");\r\n  const [address, setAddress] = useState(\"\");\r\n  const [verificationCode, setVerificationCode] = useState(\"\");\r\n  const [errVerificationCode, setErrVerificationCode] = useState(\"\");\r\n\r\n  // ============= Error Msg Start here =================\r\n  const [errClientName, setErrClientName] = useState(\"\");\r\n  const [errEmail, setErrEmail] = useState(\"\");\r\n  const [errPhone, setErrPhone] = useState(\"\");\r\n  const [errPassword, setErrPassword] = useState(\"\");\r\n  const [errAddress, setErrAddress] = useState(\"\");\r\n  // ============= Error Msg End here ===================\r\n\r\n  const [successMsg, setSuccessMsg] = useState(\"\");\r\n\r\n  // ============= Event Handler Start here =============\r\n  const navigate = useNavigate();\r\n  const handleName = (e) => {\r\n    setClientName(e.target.value);\r\n    setErrClientName(\"\");\r\n  };\r\n  const handleEmail = (e) => {\r\n    setEmail(e.target.value);\r\n    setErrEmail(\"\");\r\n  };\r\n  const handlePhone = (e) => {\r\n    setPhone(e.target.value);\r\n    setErrPhone(\"\");\r\n  };\r\n  const handlePassword = (e) => {\r\n    setPassword(e.target.value);\r\n    setErrPassword(\"\");\r\n  };\r\n  const handleAddress = (e) => {\r\n    setAddress(e.target.value);\r\n    setErrAddress(\"\");\r\n  };\r\n  // ============= Event Handler End here ===============\r\n\r\n  // ================= Email Validation start here =============\r\n  const validateEmail = (email) => {\r\n    if (!email) {\r\n      setErrEmail(\"Please input your email!\");\r\n      return false;\r\n    } else if (\r\n      !String(email)\r\n        .toLowerCase()\r\n        .match(/^[A-Z0-9._%+-]+@[A-Z0-9.-]+\\.[A-Z]{2,4}$/i)\r\n    ) {\r\n      setErrEmail(\"Enter a valid email address!\");\r\n      return false;\r\n    }\r\n    setErrEmail(\"\");\r\n    return true;\r\n  };\r\n  // ================= Email Validation End here ===============\r\n  const validatePassword = (password) => {\r\n    if (!password) {\r\n      setErrPassword(\"Please input your password!\");\r\n      return false;\r\n    }\r\n\r\n    if (password.length < 12) {\r\n      setErrPassword(\"Passwords must be at least 12 characters.\");\r\n      return false;\r\n    }\r\n\r\n    if (!/[^\\w\\s]/.test(password)) {\r\n      setErrPassword(\r\n        \"Passwords must have at least one non alphanumeric character.\"\r\n      );\r\n      return false;\r\n    }\r\n\r\n    if (!/\\d/.test(password)) {\r\n      setErrPassword(\"Passwords must have at least one digit ('0'-'9').\");\r\n      return false;\r\n    }\r\n\r\n    if (!/[A-Z]/.test(password)) {\r\n      setErrPassword(\"Passwords must have at least one uppercase ('A'-'Z').\");\r\n      return false;\r\n    }\r\n\r\n    // If everything is valid\r\n    setErrPassword(\"\"); // clear error if needed\r\n    return true;\r\n  };\r\n\r\n  const handleSignUp = async (e) => {\r\n    e.preventDefault();\r\n\r\n    if (!clientName) {\r\n      setErrClientName(\"Please input your username!\");\r\n    }\r\n    validateEmail(email);\r\n    if (!phone) {\r\n      setErrPhone(\"Please input your phone number!\");\r\n    }\r\n    validatePassword(password);\r\n    if (!address) {\r\n      setErrAddress(\"Please input your address!\");\r\n    }\r\n\r\n    if (\r\n      clientName &&\r\n      email &&\r\n      validateEmail(email) &&\r\n      validatePassword(password) &&\r\n      address\r\n    ) {\r\n      const userData = {\r\n        username: clientName,\r\n        email: email,\r\n        name: clientName,\r\n        password: password,\r\n        address: address,\r\n        phone: phone,\r\n      };\r\n\r\n      try {\r\n        // Gọi API đăng ký\r\n        await AuthService.signup(userData);\r\n        setSuccessMsg(\r\n          `Hello ${clientName}, welcome to OREBI! We have received your sign-up request. We are processing it now and will notify you soon at ${email}. Log in to verify your account.`\r\n        );\r\n\r\n        // Reset form fields\r\n        setClientName(\"\");\r\n        setEmail(\"\");\r\n        setPhone(\"\");\r\n        setPassword(\"\");\r\n        setAddress(\"\");\r\n      } catch (error) {\r\n        setErrClientName(error.message); // Hiển thị lỗi nếu có\r\n      }\r\n    }\r\n  };\r\n  return (\r\n    <div className=\"w-full h-screen flex items-center justify-center bg-gradient-to-r from-[#a8edea] via-[#fed6e3] to-[#a8edea]\">\r\n      <div className=\"w-full max-w-md p-8 bg-white rounded-lg shadow-lg border-2 border-gray-200\">\r\n        {successMsg ? (\r\n          // <form onSubmit={handleVerificationSubmit}>\r\n          //   <h1 className=\"text-3xl font-semibold text-center mb-6\">\r\n          //     Enter Verification Code\r\n          //   </h1>\r\n          //   <div className=\"flex flex-col mb-4\">\r\n          //     <label\r\n          //       htmlFor=\"verificationCode\"\r\n          //       className=\"font-semibold text-lg\"\r\n          //     >\r\n          //       <span className=\"text-red-500\">*</span> Verification Code\r\n          //     </label>\r\n          //     <input\r\n          //       type=\"text\"\r\n          //       id=\"verificationCode\"\r\n          //       value={verificationCode}\r\n          //       onChange={(e) => {setVerificationCode(e.target.value)}}\r\n          //       className=\"p-2 border border-gray-300 rounded-md\"\r\n          //       placeholder=\"Enter your 6-digit code\"\r\n          //     />\r\n          //     {errVerificationCode && (\r\n          //       <p className=\"text-red-500 text-sm\">{errVerificationCode}</p>\r\n          //     )}\r\n          //   </div>\r\n          //   <button\r\n          //     type=\"submit\"\r\n          //     className=\"w-full bg-blue-500 text-white p-2 rounded-lg\"\r\n          //   >\r\n          //     Verify Code\r\n          //   </button>\r\n          // </form>\r\n          <div className=\"text-center\">\r\n            <p className=\"text-green-500\">{successMsg}</p>\r\n            <Link to=\"/signin\">\r\n              <button className=\"mt-4 bg-blue-500 text-white p-2 rounded-lg w-full\">\r\n                Log in\r\n              </button>\r\n            </Link>\r\n          </div>\r\n        ) : (\r\n          <form onSubmit={handleSignUp}>\r\n            <h1 className=\"text-3xl font-semibold text-center mb-6\">\r\n              Create Account\r\n            </h1>\r\n\r\n            <div className=\"flex flex-col mb-4\">\r\n              <label htmlFor=\"clientName\" className=\"font-semibold text-lg\">\r\n                <span className=\"text-red-500\">*</span> Username\r\n              </label>\r\n              <input\r\n                type=\"text\"\r\n                id=\"clientName\"\r\n                value={clientName}\r\n                onChange={handleName}\r\n                className=\"p-2 border border-gray-300 rounded-md\"\r\n                placeholder=\"Enter your username\"\r\n              />\r\n              {errClientName && (\r\n                <p className=\"text-red-500 text-sm\">{errClientName}</p>\r\n              )}\r\n            </div>\r\n\r\n            <div className=\"flex flex-col mb-4\">\r\n              <label htmlFor=\"email\" className=\"font-semibold text-lg\">\r\n                <span className=\"text-red-500\">*</span> Email\r\n              </label>\r\n              <input\r\n                type=\"email\"\r\n                id=\"email\"\r\n                value={email}\r\n                onChange={handleEmail}\r\n                className=\"p-2 border border-gray-300 rounded-md\"\r\n                placeholder=\"Enter your email\"\r\n              />\r\n              {errEmail && <p className=\"text-red-500 text-sm\">{errEmail}</p>}\r\n            </div>\r\n\r\n            <div className=\"flex flex-col mb-4\">\r\n              <label htmlFor=\"name\" className=\"font-semibold text-lg\">\r\n                <span className=\"text-red-500\">*</span> Name\r\n              </label>\r\n              <input\r\n                type=\"text\"\r\n                id=\"name\"\r\n                value={clientName}\r\n                onChange={handleName}\r\n                className=\"p-2 border border-gray-300 rounded-md\"\r\n                placeholder=\"Enter your name\"\r\n              />\r\n              {errClientName && (\r\n                <p className=\"text-red-500 text-sm\">{errClientName}</p>\r\n              )}\r\n            </div>\r\n\r\n            <div className=\"flex flex-col mb-4\">\r\n              <label htmlFor=\"phone\" className=\"font-semibold text-lg\">\r\n                <span className=\"text-red-500\">*</span> Phone\r\n              </label>\r\n              <input\r\n                type=\"text\"\r\n                id=\"phone\"\r\n                value={phone}\r\n                onChange={handlePhone}\r\n                className=\"p-2 border border-gray-300 rounded-md\"\r\n                placeholder=\"Enter your phone number\"\r\n              />\r\n              {errPhone && <p className=\"text-red-500 text-sm\">{errPhone}</p>}\r\n            </div>\r\n\r\n            <div className=\"flex flex-col mb-4\">\r\n              <label htmlFor=\"password\" className=\"font-semibold text-lg\">\r\n                <span className=\"text-red-500\">*</span> Password\r\n              </label>\r\n              <input\r\n                type=\"password\"\r\n                id=\"password\"\r\n                value={password}\r\n                onChange={handlePassword}\r\n                className=\"p-2 border border-gray-300 rounded-md\"\r\n                placeholder=\"Create your password\"\r\n              />\r\n              {errPassword && (\r\n                <p className=\"text-red-500 text-sm\">{errPassword}</p>\r\n              )}\r\n            </div>\r\n\r\n            <div className=\"flex flex-col mb-4\">\r\n              <label htmlFor=\"address\" className=\"font-semibold text-lg\">\r\n                <span className=\"text-red-500\">*</span> Address\r\n              </label>\r\n              <input\r\n                type=\"text\"\r\n                id=\"address\"\r\n                value={address}\r\n                onChange={handleAddress}\r\n                className=\"p-2 border border-gray-300 rounded-md\"\r\n                placeholder=\"Enter your address\"\r\n              />\r\n              {errAddress && (\r\n                <p className=\"text-red-500 text-sm\">{errAddress}</p>\r\n              )}\r\n            </div>\r\n\r\n            <button\r\n              type=\"submit\"\r\n              className=\"w-full bg-blue-500 text-white p-2 rounded-lg\"\r\n            >\r\n              Create Account\r\n            </button>\r\n\r\n            <p className=\"text-center mt-4\">\r\n              Already have an account?{\" \"}\r\n              <Link to=\"/signin\" className=\"text-blue-600\">\r\n                Log in\r\n              </Link>\r\n            </p>\r\n          </form>\r\n        )}\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default SignUp;\r\n","C:\\Users\\ADMIN\\OneDrive - FPT Corporation\\Documents\\GitHub\\Thriftorium\\src\\pages\\Account\\ResetPassword.jsx",[],[],"C:\\Users\\ADMIN\\OneDrive - FPT Corporation\\Documents\\GitHub\\Thriftorium\\src\\pages\\Home\\Home.jsx",[],[],"C:\\Users\\ADMIN\\OneDrive - FPT Corporation\\Documents\\GitHub\\Thriftorium\\src\\pages\\Account\\NewPassword.jsx",["499"],[],"import React, { useState } from \"react\";\r\nimport { Link, useNavigate } from \"react-router-dom\";\r\nimport AuthService from \"../../service/AuthService\";\r\nimport { toast } from \"react-toastify\";\r\n\r\nconst NewPassword = () => {\r\n  const [email, setEmail] = useState(\"\");\r\n  const [username, setUsername] = useState(\"\");\r\n  const [code, setCode] = useState(\"\");\r\n  const [newPassword, setNewPassword] = useState(\"\");\r\n  const [confirmPassword, setConfirmPassword] = useState(\"\");\r\n  const navigate = useNavigate();\r\n\r\n  const handlePasswordChange = (e) => setNewPassword(e.target.value);\r\n  const handleConfirmPasswordChange = (e) => setConfirmPassword(e.target.value);\r\n\r\n  const handleSubmit = async (e) => {\r\n    e.preventDefault();\r\n    if (!email || !username || !code || !newPassword || !confirmPassword) {\r\n      toast.error(\"Vui lòng nhập đầy đủ thông tin.\");\r\n      return;\r\n    }\r\n    if (newPassword !== confirmPassword) {\r\n      toast.error(\"Mật khẩu xác nhận không khớp.\");\r\n      return;\r\n    }\r\n    try {\r\n      await AuthService.resetPassword({\r\n        username,\r\n        email,\r\n        newPassword: newPassword,\r\n        confirmPassword,\r\n        code: code,\r\n      });\r\n      toast.success(\"Đặt lại mật khẩu thành công!\");\r\n      setTimeout(() => navigate(\"/signin\"), 1500);\r\n    } catch (error) {\r\n      if(error.response.data[0].code == \"InvalidToken\"){\r\n        toast.error(\"Mã xác nhận không hợp lệ. Vui lòng nhập lại hoặc quay lại để nhận mã mới.\");\r\n      }\r\n      else{\r\n        toast.error(\"Đặt lại mật khẩu thất bại. Vui lòng kiểm tra lại thông tin.\");\r\n      }\r\n    }\r\n  };\r\n\r\n  return (\r\n    <div className=\"w-full h-screen flex items-center justify-center bg-gradient-to-r from-[#a8edea] via-[#fed6e3] to-[#a8edea]\">\r\n      <div className=\"w-full max-w-md p-8 bg-white rounded-lg shadow-lg border-2 border-gray-200\">\r\n        <h1 className=\"text-3xl font-semibold text-center mb-6\">Enter New Password</h1>\r\n        \r\n        <form onSubmit={handleSubmit}>\r\n          <div className=\"flex flex-col mb-6\">\r\n            <label htmlFor=\"email\" className=\"font-semibold text-lg\">\r\n              <span className=\"text-red-500\">*</span> Email\r\n            </label>\r\n            <input\r\n              type=\"email\"\r\n              id=\"email\"\r\n              placeholder=\"Enter your email\"\r\n              value={email}\r\n              onChange={e => setEmail(e.target.value)}\r\n              className=\"p-2 border border-gray-300 rounded-md\"\r\n              required\r\n            />\r\n          </div>\r\n          <div className=\"flex flex-col mb-6\">\r\n            <label htmlFor=\"username\" className=\"font-semibold text-lg\">\r\n              <span className=\"text-red-500\">*</span> Username\r\n            </label>\r\n            <input\r\n              type=\"text\"\r\n              id=\"username\"\r\n              placeholder=\"Enter your username\"\r\n              value={username}\r\n              onChange={e => setUsername(e.target.value)}\r\n              className=\"p-2 border border-gray-300 rounded-md\"\r\n              required\r\n            />\r\n          </div>\r\n          <div className=\"flex flex-col mb-6\">\r\n            <label htmlFor=\"token\" className=\"font-semibold text-lg\">\r\n              <span className=\"text-red-500\">*</span> Verification Code\r\n            </label>\r\n            <input\r\n              type=\"text\"\r\n              id=\"token\"\r\n              placeholder=\"Enter verification code\"\r\n              value={code}\r\n              onChange={e => setCode(e.target.value)}\r\n              className=\"p-2 border border-gray-300 rounded-md\"\r\n              required\r\n            />\r\n          </div>\r\n          <div className=\"flex flex-col mb-6\">\r\n            <label htmlFor=\"password\" className=\"font-semibold text-lg\">\r\n              <span className=\"text-red-500\">*</span> Password\r\n            </label>\r\n            <input\r\n              type=\"password\"\r\n              id=\"password\"\r\n              placeholder=\"Enter your password\"\r\n              value={newPassword}\r\n              onChange={handlePasswordChange}\r\n              className=\"p-2 border border-gray-300 rounded-md\"\r\n              required\r\n            />\r\n          </div>\r\n\r\n          <div className=\"flex flex-col mb-6\">\r\n            <label htmlFor=\"confirmPassword\" className=\"font-semibold text-lg\">\r\n              <span className=\"text-red-500\">*</span> Confirm Password\r\n            </label>\r\n            <input\r\n              type=\"password\"\r\n              id=\"confirmPassword\"\r\n              placeholder=\"Confirm your password\"\r\n              value={confirmPassword}\r\n              onChange={handleConfirmPasswordChange}\r\n              className=\"p-2 border border-gray-300 rounded-md\"\r\n              required\r\n            />\r\n          </div>\r\n\r\n          {/* Centering buttons and making them the same size */}\r\n          <div className=\"flex justify-center space-x-4 mt-6\">\r\n            <Link to=\"/reset-password\" className=\"bg-blue-500 text-white px-6 py-2 rounded-lg text-sm w-full text-center\">\r\n              ← Back\r\n            </Link>\r\n            <button type=\"submit\" className=\"bg-blue-500 text-white px-6 py-2 rounded-lg text-sm w-full text-center\">\r\n              Đặt lại mật khẩu\r\n            </button>\r\n          </div>\r\n        </form>\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default NewPassword;","C:\\Users\\ADMIN\\OneDrive - FPT Corporation\\Documents\\GitHub\\Thriftorium\\src\\pages\\Profile\\AccountInformation.jsx",[],[],"C:\\Users\\ADMIN\\OneDrive - FPT Corporation\\Documents\\GitHub\\Thriftorium\\src\\pages\\Account\\SignIn.jsx",[],[],"C:\\Users\\ADMIN\\OneDrive - FPT Corporation\\Documents\\GitHub\\Thriftorium\\src\\pages\\Profile\\ChangePassword.jsx",["500"],[],"// src/pages/Profile/ChangePassword.js\r\nimport React, { useState } from \"react\";\r\nimport { NavLink } from \"react-router-dom\";\r\nimport {\r\n  FaUser,\r\n  FaReceipt,\r\n  FaTicketAlt,\r\n  FaKey,\r\n  FaSignOutAlt,\r\n  FaEye,\r\n  FaEyeSlash,\r\n} from \"react-icons/fa\";\r\nimport { useAuth } from \"../../context/AuthContext\";\r\nimport AuthService from \"../../service/AuthService\";\r\nimport { toast } from \"react-toastify\";\r\n\r\nconst importAsset = (file) => {\r\n  try {\r\n    return require(`../../assets/images/${file}`);\r\n  } catch {\r\n    return \"\";\r\n  }\r\n};\r\n\r\nexport default function ChangePassword() {\r\n  const [currentPwd, setCurrentPwd] = useState(\"\");\r\n  const [newPwd, setNewPwd] = useState(\"\");\r\n  const [confirmPwd, setConfirmPwd] = useState(\"\");\r\n  const [showCurrent, setShowCurrent] = useState(false);\r\n  const [showNew, setShowNew] = useState(false);\r\n  const [showConfirm, setShowConfirm] = useState(false);\r\n  const [errors, setErrors] = useState({\r\n    currentPwd: \"\",\r\n    newPwd: [],\r\n    confirmPwd: \"\",\r\n  });\r\n  const { logout, user } = useAuth();\r\n\r\n  const validateNewPassword = (password) => {\r\n    const errs = [];\r\n    if (password.length < 12) {\r\n      errs.push(\"Passwords must be at least 12 characters.\");\r\n    }\r\n    if (!/[^a-zA-Z0-9]/.test(password)) {\r\n      errs.push(\"Passwords must have at least one non alphanumeric character.\");\r\n    }\r\n    if (!/\\d/.test(password)) {\r\n      errs.push(\"Passwords must have at least one digit ('0'-'9').\");\r\n    }\r\n    if (!/[A-Z]/.test(password)) {\r\n      errs.push(\"Passwords must have at least one uppercase ('A'-'Z').\");\r\n    }\r\n    if (!/[a-z]/.test(password)) {\r\n      errs.push(\"Passwords must have at least one lowercase ('a'-'z').\");\r\n    }\r\n    return errs;\r\n  };\r\n\r\n  const handleChangePassword = async () => {\r\n    const newPwdErrors = validateNewPassword(newPwd);\r\n    let confirmPwdError = \"\";\r\n    if (newPwd !== confirmPwd) {\r\n      confirmPwdError = \"Passwords do not match.\";\r\n    }\r\n    setErrors({\r\n      currentPwd: \"\",\r\n      newPwd: newPwdErrors,\r\n      confirmPwd: confirmPwdError,\r\n    });\r\n    if (newPwdErrors.length > 0 || confirmPwdError) {\r\n      return;\r\n    }\r\n    const data = {\r\n      userName: user.userName,\r\n      currentPassword: currentPwd,\r\n      newPassword: newPwd,\r\n      confirmNewPassword: confirmPwd,\r\n    };\r\n    try {\r\n      await AuthService.changePassword(data);\r\n      toast.success(\"Đổi mật khẩu thành công!\");\r\n    } catch (error) {\r\n      console.log(error);\r\n      if (error.response.data[0].code == \"PasswordMismatch\") {\r\n        setErrors({\r\n          currentPwd: \"Current password is incorrect.\",\r\n          newPwd: [],\r\n          confirmPwd: \"\",\r\n        });\r\n      }\r\n    }\r\n  };\r\n\r\n  return (\r\n    <div className=\"bg-gray-50 min-h-screen py-10\">\r\n      <div className=\"max-w-container mx-auto px-4\">\r\n        {/* Header */}\r\n        <h1 className=\"text-4xl font-bold\">Change Password</h1>\r\n        <p className=\"text-sm text-gray-600 mt-1 mb-8\">\r\n          /profile/change password\r\n        </p>\r\n\r\n        <div className=\"flex flex-col md:flex-row gap-6\">\r\n          {/* Sidebar */}\r\n          <div className=\"w-full md:w-1/3 bg-white rounded-lg shadow p-6 space-y-8\">\r\n            <div className=\"flex items-center space-x-4\">\r\n              <img\r\n                src={importAsset(\"orebiLogo.png\")}\r\n                alt=\"avatar\"\r\n                className=\"w-16 h-16 rounded-full object-cover\"\r\n              />\r\n              <div className=\"font-semibold\">Bùi Khánh Duy</div>\r\n            </div>\r\n            <nav className=\"space-y-2\">\r\n              <NavLink\r\n                to=\"/profile/account-information\"\r\n                className={({ isActive }) =>\r\n                  \"flex items-center px-4 py-2 rounded-lg \" +\r\n                  (isActive\r\n                    ? \"bg-green-400 text-white\"\r\n                    : \"text-gray-700 hover:bg-gray-100\")\r\n                }\r\n              >\r\n                <FaUser className=\"mr-3\" /> Account Information\r\n              </NavLink>\r\n              <NavLink\r\n                to=\"/profile/my-order\"\r\n                className={({ isActive }) =>\r\n                  \"flex items-center px-4 py-2 rounded-lg \" +\r\n                  (isActive\r\n                    ? \"bg-green-400 text-white\"\r\n                    : \"text-gray-700 hover:bg-gray-100\")\r\n                }\r\n              >\r\n                <FaReceipt className=\"mr-3\" /> My Order\r\n              </NavLink>\r\n              <NavLink\r\n                to=\"/profile/voucher\"\r\n                className={({ isActive }) =>\r\n                  \"flex items-center px-4 py-2 rounded-lg \" +\r\n                  (isActive\r\n                    ? \"bg-green-400 text-white\"\r\n                    : \"text-gray-700 hover:bg-gray-100\")\r\n                }\r\n              >\r\n                <FaTicketAlt className=\"mr-3\" /> Voucher\r\n              </NavLink>\r\n              <NavLink\r\n                to=\"/profile/change-password\"\r\n                className={({ isActive }) =>\r\n                  \"flex items-center px-4 py-2 rounded-lg \" +\r\n                  (isActive\r\n                    ? \"bg-green-400 text-white\"\r\n                    : \"text-gray-700 hover:bg-gray-100\")\r\n                }\r\n              >\r\n                <FaKey className=\"mr-3\" /> Change Password\r\n              </NavLink>\r\n              <button\r\n                onClick={() => logout()}\r\n                className=\"flex items-center w-full px-4 py-2 text-red-500 hover:bg-red-50 rounded-lg\"\r\n              >\r\n                <FaSignOutAlt className=\"mr-3\" /> Log Out\r\n              </button>\r\n            </nav>\r\n          </div>\r\n\r\n          {/* Change Password Form */}\r\n          <div className=\"w-full md:w-2/3 bg-white rounded-lg shadow p-6 border border-gray-200\">\r\n            <h2 className=\"text-2xl font-semibold mb-6\">Change Password</h2>\r\n            <div className=\"space-y-4\">\r\n              {/* Current */}\r\n              <div className=\"relative\">\r\n                <label className=\"block text-sm font-medium mb-1\">\r\n                  Current Password\r\n                </label>\r\n                <input\r\n                  type={showCurrent ? \"text\" : \"password\"}\r\n                  value={currentPwd}\r\n                  onChange={(e) => setCurrentPwd(e.target.value)}\r\n                  className=\"w-full border border-gray-300 rounded px-3 py-2 focus:outline-none focus:ring-2 focus:ring-green-300\"\r\n                />\r\n                <span\r\n                  onClick={() => setShowCurrent((v) => !v)}\r\n                  className=\"absolute inset-y-0 right-3 top-9 flex items-center cursor-pointer text-gray-500\"\r\n                >\r\n                  {showCurrent ? <FaEyeSlash /> : <FaEye />}\r\n                </span>\r\n                {errors.currentPwd && (\r\n                  <div className=\"text-red-500 text-xs mt-1\">{errors.currentPwd}</div>\r\n                )}\r\n              </div>\r\n              {/* New */}\r\n              <div className=\"relative\">\r\n                <label className=\"block text-sm font-medium mb-1\">\r\n                  New Password\r\n                </label>\r\n                <input\r\n                  type={showNew ? \"text\" : \"password\"}\r\n                  value={newPwd}\r\n                  onChange={(e) => setNewPwd(e.target.value)}\r\n                  className=\"w-full border border-gray-300 rounded px-3 py-2 focus:outline-none focus:ring-2 focus:ring-green-300\"\r\n                />\r\n                <span\r\n                  onClick={() => setShowNew((v) => !v)}\r\n                  className=\"absolute inset-y-0 right-3 top-9 flex items-center cursor-pointer text-gray-500\"\r\n                >\r\n                  {showNew ? <FaEyeSlash /> : <FaEye />}\r\n                </span>\r\n                {errors.newPwd && errors.newPwd.length > 0 && (\r\n                  <ul className=\"text-red-500 text-xs mt-1\">\r\n                    {errors.newPwd.map((err, idx) => (\r\n                      <li key={idx}>{err}</li>\r\n                    ))}\r\n                  </ul>\r\n                )}\r\n              </div>\r\n              {/* Confirm */}\r\n              <div className=\"relative\">\r\n                <label className=\"block text-sm font-medium mb-1\">\r\n                  Confirm New Password\r\n                </label>\r\n                <input\r\n                  type={showConfirm ? \"text\" : \"password\"}\r\n                  value={confirmPwd}\r\n                  onChange={(e) => setConfirmPwd(e.target.value)}\r\n                  className=\"w-full border border-gray-300 rounded px-3 py-2 focus:outline-none focus:ring-2 focus:ring-green-300\"\r\n                />\r\n                <span\r\n                  onClick={() => setShowConfirm((v) => !v)}\r\n                  className=\"absolute inset-y-0 right-3 top-9 flex items-center cursor-pointer text-gray-500\"\r\n                >\r\n                  {showConfirm ? <FaEyeSlash /> : <FaEye />}\r\n                </span>\r\n                {errors.confirmPwd && (\r\n                  <div className=\"text-red-500 text-xs mt-1\">{errors.confirmPwd}</div>\r\n                )}\r\n              </div>\r\n            </div>\r\n\r\n            <div className=\"flex justify-end mt-6\">\r\n              <button\r\n                onClick={() => {\r\n                  handleChangePassword();\r\n                }}\r\n                className=\"bg-black text-white px-8 py-2 rounded-lg hover:bg-gray-800 transition\"\r\n              >\r\n                Change Password\r\n              </button>\r\n            </div>\r\n          </div>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  );\r\n}\r\n","C:\\Users\\ADMIN\\OneDrive - FPT Corporation\\Documents\\GitHub\\Thriftorium\\src\\pages\\Profile\\Voucher.jsx",[],[],"C:\\Users\\ADMIN\\OneDrive - FPT Corporation\\Documents\\GitHub\\Thriftorium\\src\\pages\\ProductDetails\\ProductDetails.jsx",["501","502","503","504"],[],"import React, { useState, useEffect } from \"react\";\r\nimport { useParams, useNavigate, Link } from \"react-router-dom\"; // Đảm bảo import đúng useNavigate và Link\r\nimport {\r\n  FaStar,\r\n  FaRegStar,\r\n  FaCheckCircle,\r\n  FaEdit,\r\n  FaTrash,\r\n} from \"react-icons/fa\";\r\nimport ProductService from \"../../service/ProductService\";\r\nimport RatingService from \"../../service/RatingService\";\r\nimport CartService from \"../../service/CartService\";\r\nimport ReviewService from \"../../service/ReviewService\";\r\nimport AccountAppService from \"../../service/AccountAppService\";\r\nimport { toast } from \"react-toastify\";\r\nimport { useAuth } from \"../../context/AuthContext\";\r\n\r\nconst ProductDetails = () => {\r\n  const { productId } = useParams();\r\n  const navigate = useNavigate(); // Khai báo navigate\r\n  const [product, setProduct] = useState(null);\r\n  const [loading, setLoading] = useState(true);\r\n  const [qty, setQty] = useState(1); // Quản lý số lượng\r\n  // Separate states for Rating (stars) and Review (text)\r\n  const [rating, setRating] = useState(0); // state cho rating stars\r\n  const [reviewContent, setReviewContent] = useState(\"\"); // state cho review content\r\n  const [isSubmittingRating, setIsSubmittingRating] = useState(false);\r\n  const [isSubmittingReview, setIsSubmittingReview] = useState(false);\r\n  const [editingRating, setEditingRating] = useState(null);\r\n  const [editingReview, setEditingReview] = useState(null);\r\n  const [userRatings, setUserRatings] = useState([]);\r\n  const [reviews, setReviews] = useState([]);\r\n  const [loadingReviews, setLoadingReviews] = useState(true);\r\n  const [reviewUsers, setReviewUsers] = useState({});\r\n\r\n  // Get current user info from localStorage\r\n  const { user } = useAuth();\r\n  const isLoggedIn = !!localStorage.getItem(\"token\");\r\n\r\n  useEffect(() => {\r\n    const fetchProductDetails = async () => {\r\n      try {\r\n        // Giả sử slug là productId, hoặc có thể extract ID từ slug\r\n        const data = await ProductService.getProductDetails(productId);\r\n        setProduct(data);\r\n      } catch (error) {\r\n        console.error(\"Error fetching product details:\", error);\r\n        setProduct(null);\r\n      }\r\n      setLoading(false);\r\n    };\r\n\r\n    if (productId) {\r\n      fetchProductDetails();\r\n    } else {\r\n      setLoading(false);\r\n    }\r\n  }, [productId]);\r\n\r\n  useEffect(() => {\r\n    const fetchUserRatings = async () => {\r\n      if (user) {\r\n        try {\r\n          const ratings = await RatingService.getRatingByAccountId(user.userID);\r\n          setUserRatings(ratings || []);\r\n        } catch (error) {\r\n          console.error(\"Error fetching user ratings:\", error);\r\n        }\r\n      }\r\n    };\r\n\r\n    fetchUserRatings();\r\n  }, [isLoggedIn, user?.userID]);\r\n\r\n\r\n\r\n  // Fetch reviews từ ReviewService\r\n  useEffect(() => {\r\n    const fetchReviews = async () => {\r\n      if (productId) {\r\n        setLoadingReviews(true);\r\n        try {\r\n          const reviewsData = await ReviewService.getReviewByProductId(\r\n            productId\r\n          );\r\n          console.log(reviewsData);\r\n          setReviews(reviewsData || []);\r\n\r\n          // Fetch user info for each review\r\n          const userPromises = reviewsData.map(async (review) => {\r\n            try {\r\n              const userData = await AccountAppService.getAccountById(review.accountID);\r\n              return { userId: review.accountID, userData };\r\n            } catch (error) {\r\n              console.error(`Error fetching user data for ID ${review.accountID}:`, error);\r\n              return { userId: review.accountID, userData: null };\r\n            }\r\n          });\r\n\r\n          const users = await Promise.all(userPromises);\r\n          const userMap = {};\r\n          users.forEach(({ userId, userData }) => {\r\n            userMap[userId] = userData;\r\n          });\r\n          setReviewUsers(userMap);\r\n        } catch (error) {\r\n          console.error(\"Error fetching reviews:\", error);\r\n          setReviews([]);\r\n        }\r\n        setLoadingReviews(false);\r\n      }\r\n    };\r\n\r\n    fetchReviews();\r\n  }, [productId]);\r\n\r\n  const userProductRating = userRatings.find(\r\n    (rating) => rating.productID === parseInt(productId)\r\n  );\r\n\r\n  // Kiểm tra user đã review chưa\r\n  const userReview = reviews.find(\r\n    (review) => review.accountID === user?.userID\r\n  );\r\n\r\n  const handleAddRating = async () => {\r\n    if (!isLoggedIn) {\r\n      toast.error(\"Vui lòng đăng nhập để đánh giá sản phẩm\");\r\n      return;\r\n    }\r\n\r\n    if (rating === 0) {\r\n      toast.error(\"Vui lòng chọn số sao đánh giá\");\r\n      return;\r\n    }\r\n\r\n    setIsSubmittingRating(true);\r\n    try {\r\n      const ratingData = {\r\n        accountID: user.userID,\r\n        rate: rating,\r\n        productID: parseInt(productId),\r\n      };\r\n      console.log(ratingData);\r\n\r\n      await RatingService.addRating(ratingData);\r\n      toast.success(\"Đánh giá đã được thêm thành công!\");\r\n\r\n      // Reset form\r\n      setRating(0);\r\n\r\n      // Refresh product data and user ratings\r\n      const updatedProduct = await ProductService.getProductDetails(productId);\r\n      setProduct(updatedProduct);\r\n\r\n      const updatedUserRatings = await RatingService.getRatingByAccountId(\r\n        user.userID\r\n      );\r\n      setUserRatings(updatedUserRatings || []);\r\n    } catch (error) {\r\n      console.error(\"Error adding rating:\", error);\r\n      toast.error(\"Có lỗi xảy ra khi thêm đánh giá\");\r\n    }\r\n    setIsSubmittingRating(false);\r\n  };\r\n\r\n  // Handle updating rating\r\n  const handleUpdateRating = async () => {\r\n    if (!editingRating) return;\r\n\r\n    setIsSubmittingRating(true);\r\n    try {\r\n      const ratingData = {\r\n        ratingId: editingRating.ratingId,\r\n        accountID: user.userID,\r\n        rate: rating,\r\n        productId: parseInt(productId),\r\n      };\r\n\r\n      await RatingService.updateRating(ratingData);\r\n      toast.success(\"Đánh giá đã được cập nhật thành công!\");\r\n\r\n      // Reset form\r\n      setRating(0);\r\n      setEditingRating(null);\r\n\r\n      // Refresh product data and user ratings\r\n      const updatedProduct = await ProductService.getProductDetails(productId);\r\n      setProduct(updatedProduct);\r\n\r\n      const updatedUserRatings = await RatingService.getRatingByAccountId(\r\n        user.userID\r\n      );\r\n      setUserRatings(updatedUserRatings || []);\r\n    } catch (error) {\r\n      console.error(\"Error updating rating:\", error);\r\n      toast.error(\"Có lỗi xảy ra khi cập nhật đánh giá\");\r\n    }\r\n    setIsSubmittingRating(false);\r\n  };\r\n\r\n  // Handle deleting rating\r\n  const handleDeleteRating = async (ratingId) => {\r\n    if (!window.confirm(\"Bạn có chắc chắn muốn xóa đánh giá này?\")) return;\r\n\r\n    try {\r\n      await RatingService.deleteRating(ratingId);\r\n      toast.success(\"Đánh giá đã được xóa thành công!\");\r\n\r\n      // Refresh product data and user ratings\r\n      const updatedProduct = await ProductService.getProductDetails(productId);\r\n      setProduct(updatedProduct);\r\n\r\n      const updatedUserRatings = await RatingService.getRatingByAccountId(\r\n        user.userID\r\n      );\r\n      setUserRatings(updatedUserRatings || []);\r\n    } catch (error) {\r\n      console.error(\"Error deleting rating:\", error);\r\n      toast.error(\"Có lỗi xảy ra khi xóa đánh giá\");\r\n    }\r\n  };\r\n\r\n  // ===== REVIEW FUNCTIONS =====\r\n\r\n  // Handle adding review\r\n  const handleAddReview = async () => {\r\n    if (!isLoggedIn) {\r\n      toast.error(\"Vui lòng đăng nhập để viết đánh giá\");\r\n      return;\r\n    }\r\n\r\n    if (!reviewContent.trim()) {\r\n      toast.error(\"Vui lòng nhập nội dung đánh giá\");\r\n      return;\r\n    }\r\n\r\n    setIsSubmittingReview(true);\r\n    try {\r\n      const reviewData = {\r\n        accountID: user.userID,\r\n        productID: parseInt(productId),\r\n        content: reviewContent.trim(),\r\n      };\r\n\r\n      await ReviewService.createReview(reviewData);\r\n      toast.success(\"Đánh giá đã được thêm thành công!\");\r\n\r\n      // Reset form\r\n      setReviewContent(\"\");\r\n\r\n      // Refresh reviews\r\n      const updatedReviews = await ReviewService.getReviewByProductId(\r\n        productId\r\n      );\r\n      setReviews(updatedReviews || []);\r\n    } catch (error) {\r\n      console.error(\"Error adding review:\", error);\r\n      if (error.response?.status === 400) {\r\n        toast.error(\"Bạn đã đánh giá sản phẩm này rồi!\");\r\n      } else {\r\n        toast.error(\"Có lỗi xảy ra khi thêm đánh giá\");\r\n      }\r\n    }\r\n    setIsSubmittingReview(false);\r\n  };\r\n\r\n  // Handle updating review\r\n  const handleUpdateReview = async () => {\r\n    if (!editingReview) return;\r\n\r\n    if (!reviewContent.trim()) {\r\n      toast.error(\"Vui lòng nhập nội dung đánh giá\");\r\n      return;\r\n    }\r\n\r\n    setIsSubmittingReview(true);\r\n    try {\r\n      const reviewData = {\r\n        reviewID: editingReview.reviewID,\r\n        content: reviewContent.trim(),\r\n      };\r\n\r\n      await ReviewService.updateReview(editingReview.reviewID, reviewData);\r\n      toast.success(\"Đánh giá đã được cập nhật thành công!\");\r\n\r\n      // Reset form\r\n      setReviewContent(\"\");\r\n      setEditingReview(null);\r\n\r\n      // Refresh reviews\r\n      const updatedReviews = await ReviewService.getReviewByProductId(\r\n        productId\r\n      );\r\n      setReviews(updatedReviews || []);\r\n    } catch (error) {\r\n      console.error(\"Error updating review:\", error);\r\n      toast.error(\"Có lỗi xảy ra khi cập nhật đánh giá\");\r\n    }\r\n    setIsSubmittingReview(false);\r\n  };\r\n\r\n  // Handle deleting review\r\n  const handleDeleteReview = async (reviewID) => {\r\n    if (!window.confirm(\"Bạn có chắc chắn muốn xóa đánh giá này?\")) return;\r\n\r\n    try {\r\n      await ReviewService.deleteReview(reviewID);\r\n      toast.success(\"Đánh giá đã được xóa thành công!\");\r\n\r\n      // Refresh reviews\r\n      const updatedReviews = await ReviewService.getReviewByProductId(\r\n        productId\r\n      );\r\n      setReviews(updatedReviews || []);\r\n    } catch (error) {\r\n      console.error(\"Error deleting review:\", error);\r\n      toast.error(\"Có lỗi xảy ra khi xóa đánh giá\");\r\n    }\r\n  };\r\n\r\n  // Handle starting edit review mode\r\n  const handleStartEditReview = (review) => {\r\n    setEditingReview(review);\r\n    setReviewContent(review.content);\r\n  };\r\n\r\n  // Handle canceling edit review\r\n  const handleCancelEditReview = () => {\r\n    setEditingReview(null);\r\n    setReviewContent(\"\");\r\n  };\r\n\r\n\r\n\r\n  if (loading) return <div className=\"p-8 text-center\">Đang tải...</div>;\r\n  if (!product)\r\n    return <div className=\"p-8 text-center\">Không tìm thấy sản phẩm</div>;\r\n\r\n  const {\r\n    productID,\r\n    name: title,\r\n    purchasePrice: price,\r\n    description,\r\n    imageProducts,\r\n    ratings,\r\n  } = product;\r\n\r\n  // Tính average rating từ ratings của product\r\n  const averageRating =\r\n    ratings && ratings.length > 0\r\n      ? ratings.reduce((sum, r) => sum + (r.rate || 0), 0) / ratings.length\r\n      : 0;\r\n\r\n  const images = imageProducts?.map((img) => img.image) || [];\r\n  const [mainImage, ...thumbs] = images;\r\n\r\n  // Hàm import hình ảnh sản phẩm\r\n  const importImg = (file) => {\r\n    try {\r\n      return require(`../../assets/images/products/bestSeller/${file}`);\r\n    } catch {\r\n      return file; // Trả về URL trực tiếp nếu không phải local file\r\n    }\r\n  };\r\n\r\n  // Hàm import asset chung (logo, avatar…)\r\n  const importAsset = (file) => {\r\n    try {\r\n      return require(`../../assets/images/${file}`);\r\n    } catch {\r\n      return \"\";\r\n    }\r\n  };\r\n\r\n  // Tạo các sao cho review\r\n  const stars = (count) =>\r\n    Array.from({ length: 5 }, (_, i) =>\r\n      i < count ? (\r\n        <FaStar key={i} className=\"inline text-yellow-400\" />\r\n      ) : (\r\n        <FaRegStar key={i} className=\"inline text-gray-300\" />\r\n      )\r\n    );\r\n\r\n  // Interactive star rating component\r\n  const StarRating = ({ rating, onRatingChange, readonly = false }) => {\r\n    return (\r\n      <div className=\"flex space-x-1\">\r\n        {Array.from({ length: 5 }, (_, i) => (\r\n          <button\r\n            key={i}\r\n            type=\"button\"\r\n            disabled={readonly}\r\n            onClick={() => !readonly && onRatingChange(i + 1)}\r\n            className={`text-2xl ${\r\n              readonly ? \"cursor-default\" : \"cursor-pointer hover:scale-110\"\r\n            } transition-transform`}\r\n          >\r\n            {i < rating ? (\r\n              <FaStar className=\"text-yellow-400\" />\r\n            ) : (\r\n              <FaRegStar className=\"text-gray-300\" />\r\n            )}\r\n          </button>\r\n        ))}\r\n      </div>\r\n    );\r\n  };\r\n\r\n  // Xử lý tăng giảm số lượng\r\n  const handleIncreaseQty = () => setQty((prevQty) => prevQty + 1);\r\n  const handleDecreaseQty = () => setQty((prevQty) => Math.max(1, prevQty - 1));\r\n\r\n  // Handle adding to cart\r\n  const handleAddToCart = async () => {\r\n    if (!isLoggedIn) {\r\n      toast.error(\"Vui lòng đăng nhập để thêm sản phẩm vào giỏ hàng\");\r\n      return;\r\n    }\r\n\r\n    try {\r\n      const cartData = {\r\n        accountID: user.userID,\r\n        productId: parseInt(productId),\r\n        quantity: qty,\r\n      };\r\n\r\n      await CartService.addCart(cartData);\r\n      toast.success(`Đã thêm ${qty} sản phẩm vào giỏ hàng!`);\r\n\r\n      // Reset quantity to 1 after adding\r\n      setQty(1);\r\n    } catch (error) {\r\n      console.error(\"Error adding to cart:\", error);\r\n      toast.error(\"Có lỗi xảy ra khi thêm vào giỏ hàng\");\r\n    }\r\n  };\r\n\r\n  // Handle buy now\r\n  const handleBuyNow = async () => {\r\n    if (!isLoggedIn) {\r\n      toast.error(\"Vui lòng đăng nhập để mua hàng\");\r\n      return;\r\n    }\r\n\r\n    try {\r\n      const cartData = {\r\n        accountID: user.userID,\r\n        productId: parseInt(productId),\r\n        quantity: qty,\r\n      };\r\n\r\n      await CartService.addCart(cartData);\r\n      navigate(\"/cart\");\r\n    } catch (error) {\r\n      console.error(\"Error adding to cart:\", error);\r\n      toast.error(\"Có lỗi xảy ra khi thêm vào giỏ hàng\");\r\n    }\r\n  };\r\n\r\n  return (\r\n    <div className=\"bg-white\">\r\n      <div className=\"max-w-container mx-auto px-4 pt-6\">\r\n        {/* Header */}\r\n        <h1 className=\"text-4xl italic font-bold\">Product</h1>\r\n        <p className=\"text-sm text-gray-600 mt-1 mb-2\">\r\n          /product listing/{title}\r\n        </p>\r\n\r\n        {/* Gallery + Info */}\r\n        <div className=\"mt-8 grid grid-cols-1 md:grid-cols-6 md:grid-rows-3 gap-6\">\r\n          {/* Thumbnails */}\r\n          <div className=\"hidden md:grid md:col-span-1 md:row-span-3 grid grid-rows-3 gap-4 h-full\">\r\n            {thumbs.slice(0, 3).map((f, i) => (\r\n              <img\r\n                key={i}\r\n                src={importImg(f)}\r\n                alt={`thumb-${i}`}\r\n                className=\"w-full h-full object-cover rounded-lg\"\r\n              />\r\n            ))}\r\n          </div>\r\n\r\n          {/* Main image */}\r\n          <div className=\"md:col-span-3 md:row-span-3 bg-gray-100 rounded-lg overflow-hidden\">\r\n            {mainImage ? (\r\n              <img\r\n                src={importImg(mainImage)}\r\n                alt=\"main\"\r\n                className=\"w-full h-full aspect-square object-cover\"\r\n              />\r\n            ) : (\r\n              <div className=\"text-gray-500 p-8 text-center\">No image</div>\r\n            )}\r\n          </div>\r\n\r\n          {/* Info & Actions */}\r\n          <div className=\"md:col-span-2 md:row-span-3 flex flex-col\">\r\n            <div>\r\n              <h2 className=\"text-2xl font-semibold mb-2\">{title}</h2>\r\n              <div className=\"flex items-center space-x-2 text-sm mb-4\">\r\n                <span className=\"text-xl font-semibold text-red-600\">\r\n                  {price?.toLocaleString()} VND\r\n                </span>\r\n                <span className=\"text-gray-400\">|</span>\r\n                <span className=\"flex items-center space-x-1\">\r\n                  {stars(Math.round(averageRating))}\r\n                </span>\r\n                <span className=\"text-gray-500\">\r\n                  | {ratings?.length || 0} đánh giá\r\n                </span>\r\n              </div>\r\n              <p className=\"text-gray-700 mb-4\">\r\n                {description || \"Không có mô tả\"}\r\n              </p>\r\n            </div>\r\n\r\n            {/* Quantity + Add to Cart */}\r\n            <div className=\"flex items-center space-x-4 mb-4\">\r\n              <div className=\"inline-flex items-center h-12 bg-black text-white rounded-lg\">\r\n                <button onClick={handleDecreaseQty} className=\"px-5\">\r\n                  –\r\n                </button>\r\n                <span className=\"px-6\">{qty}</span>\r\n                <button onClick={handleIncreaseQty} className=\"px-5\">\r\n                  +\r\n                </button>\r\n              </div>\r\n              <button\r\n                onClick={handleAddToCart}\r\n                className=\"flex-1 h-12 bg-red-600 text-white px-6 rounded-lg hover:bg-red-700 transition\"\r\n              >\r\n                Add to Cart\r\n              </button>\r\n            </div>\r\n\r\n            {/* Buy Now */}\r\n            <button\r\n              onClick={handleBuyNow}\r\n              className=\"w-full h-12 bg-black text-white px-6 rounded-lg hover:bg-gray-800 transition\"\r\n            >\r\n              Buy Now\r\n            </button>\r\n          </div>\r\n        </div>\r\n\r\n        {/* Rating Section */}\r\n        {isLoggedIn && (\r\n          <div className=\"mt-8 p-6 bg-gray-50 rounded-lg\">\r\n            <h3 className=\"text-lg font-semibold mb-4\">\r\n              {userProductRating ? \"Cập nhật đánh giá sao\" : \"Đánh giá sao\"}\r\n            </h3>\r\n\r\n            {userProductRating ? (\r\n              <div className=\"space-y-4\">\r\n                <div className=\"flex items-center justify-between p-4 bg-white rounded-lg border\">\r\n                  <div>\r\n                    <span className=\"text-sm text-gray-600\">Đánh giá hiện tại của bạn:</span>\r\n                    <div className=\"flex items-center space-x-2 mt-1\">\r\n                      {stars(userProductRating.rate)}\r\n                      <span className=\"text-sm text-gray-600\">({userProductRating.rate} sao)</span>\r\n                    </div>\r\n                  </div>\r\n                  <div className=\"flex space-x-2\">\r\n                    <button\r\n                      onClick={() => {\r\n                        setEditingRating(userProductRating);\r\n                        setRating(userProductRating.rate);\r\n                      }}\r\n                      className=\"px-3 py-1 text-sm bg-blue-600 text-white rounded hover:bg-blue-700 transition\"\r\n                    >\r\n                      Chỉnh sửa\r\n                    </button>\r\n                    <button\r\n                      onClick={() => handleDeleteRating(userProductRating.ratingId)}\r\n                      className=\"px-3 py-1 text-sm bg-red-600 text-white rounded hover:bg-red-700 transition\"\r\n                    >\r\n                      Xóa\r\n                    </button>\r\n                  </div>\r\n                </div>\r\n\r\n                {editingRating && (\r\n                  <div className=\"space-y-4 p-4 bg-white rounded-lg border\">\r\n                    <div>\r\n                      <label className=\"block text-sm font-medium mb-2\">\r\n                        Đánh giá mới:\r\n                      </label>\r\n                      <StarRating\r\n                        rating={rating}\r\n                        onRatingChange={setRating}\r\n                      />\r\n                    </div>\r\n                    <div className=\"flex space-x-3\">\r\n                      <button\r\n                        onClick={handleUpdateRating}\r\n                        disabled={isSubmittingRating || rating === 0}\r\n                        className=\"px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 disabled:bg-gray-400 disabled:cursor-not-allowed transition\"\r\n                      >\r\n                        {isSubmittingRating ? \"Đang cập nhật...\" : \"Cập nhật đánh giá\"}\r\n                      </button>\r\n                      <button\r\n                        onClick={() => {\r\n                          setEditingRating(null);\r\n                          setRating(0);\r\n                        }}\r\n                        className=\"px-4 py-2 bg-gray-500 text-white rounded-lg hover:bg-gray-600 transition\"\r\n                      >\r\n                        Hủy\r\n                      </button>\r\n                    </div>\r\n                  </div>\r\n                )}\r\n              </div>\r\n            ) : (\r\n              <div className=\"space-y-4\">\r\n                <div>\r\n                  <label className=\"block text-sm font-medium mb-2\">\r\n                    Đánh giá sao của bạn:\r\n                  </label>\r\n                  <StarRating\r\n                    rating={rating}\r\n                    onRatingChange={setRating}\r\n                  />\r\n                </div>\r\n                <button\r\n                  onClick={handleAddRating}\r\n                  disabled={isSubmittingRating || rating === 0}\r\n                  className=\"px-6 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 disabled:bg-gray-400 disabled:cursor-not-allowed transition\"\r\n                >\r\n                  {isSubmittingRating ? \"Đang gửi...\" : \"Gửi đánh giá sao\"}\r\n                </button>\r\n              </div>\r\n            )}\r\n          </div>\r\n        )}\r\n\r\n        {/* Review Section */}\r\n        {isLoggedIn && (\r\n          <div className=\"mt-6 p-6 bg-blue-50 rounded-lg\">\r\n            <h3 className=\"text-lg font-semibold mb-4\">\r\n              {editingReview\r\n                ? \"Chỉnh sửa nhận xét\"\r\n                : userReview\r\n                ? \"Nhận xét của bạn\"\r\n                : \"Viết nhận xét\"}\r\n            </h3>\r\n\r\n            {userReview && !editingReview ? (\r\n              <div className=\"space-y-4\">\r\n                <div className=\"p-4 bg-white rounded-lg border\">\r\n                  <div className=\"flex items-center justify-between mb-2\">\r\n                    <span className=\"text-sm text-gray-600\">Nhận xét của bạn:</span>\r\n                    <div className=\"flex space-x-2\">\r\n                      <button\r\n                        onClick={() => handleStartEditReview(userReview)}\r\n                        className=\"px-3 py-1 text-sm bg-blue-600 text-white rounded hover:bg-blue-700 transition\"\r\n                      >\r\n                        Chỉnh sửa\r\n                      </button>\r\n                      <button\r\n                        onClick={() => handleDeleteReview(userReview.reviewID)}\r\n                        className=\"px-3 py-1 text-sm bg-red-600 text-white rounded hover:bg-red-700 transition\"\r\n                      >\r\n                        Xóa\r\n                      </button>\r\n                    </div>\r\n                  </div>\r\n                  <p className=\"text-gray-700\">{userReview.content}</p>\r\n                </div>\r\n              </div>\r\n            ) : (\r\n              (!userReview || editingReview) && (\r\n                <div className=\"space-y-4\">\r\n                  <div>\r\n                    <label className=\"block text-sm font-medium mb-2\">\r\n                      Nội dung nhận xét:\r\n                    </label>\r\n                    <textarea\r\n                      value={reviewContent}\r\n                      onChange={(e) => setReviewContent(e.target.value)}\r\n                      placeholder=\"Chia sẻ trải nghiệm của bạn về sản phẩm này...\"\r\n                      rows={4}\r\n                      className=\"w-full border border-gray-300 rounded-lg px-3 py-2 focus:outline-none focus:ring-2 focus:ring-blue-300 resize-none\"\r\n                      disabled={isSubmittingReview}\r\n                    />\r\n                  </div>\r\n\r\n                  <div className=\"flex space-x-3\">\r\n                    <button\r\n                      onClick={\r\n                        editingReview ? handleUpdateReview : handleAddReview\r\n                      }\r\n                      disabled={\r\n                        isSubmittingReview ||\r\n                        !reviewContent?.trim()\r\n                      }\r\n                      className=\"px-6 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 disabled:bg-gray-400 disabled:cursor-not-allowed transition\"\r\n                    >\r\n                      {isSubmittingReview\r\n                        ? \"Đang xử lý...\"\r\n                        : editingReview\r\n                        ? \"Cập nhật nhận xét\"\r\n                        : \"Gửi nhận xét\"}\r\n                    </button>\r\n\r\n                    {editingReview && (\r\n                      <button\r\n                        onClick={handleCancelEditReview}\r\n                        className=\"px-6 py-2 bg-gray-500 text-white rounded-lg hover:bg-gray-600 transition\"\r\n                      >\r\n                        Hủy\r\n                      </button>\r\n                    )}\r\n                  </div>\r\n                </div>\r\n              )\r\n            )}\r\n          </div>\r\n        )}\r\n\r\n        {/* Description | Reviews */}\r\n        <div className=\"mt-10 mb-12\">\r\n          <h3 className=\"text-xl font-semibold mb-4\">Description | Reviews</h3>\r\n          <p className=\"mb-4 text-gray-700\">\r\n            {description || \"Không có mô tả chi tiết\"}\r\n          </p>\r\n          {loadingReviews ? (\r\n            <div className=\"text-center py-4\">Đang tải đánh giá...</div>\r\n          ) : reviews && reviews.length > 0 ? (\r\n            reviews.map((review, idx) => (\r\n              <div\r\n                key={review.reviewID || idx}\r\n                className=\"mb-4 border border-gray-300 rounded-lg p-4 flex space-x-4\"\r\n              >\r\n                <img\r\n                  src={importAsset(\"orebiLogo.png\")}\r\n                  alt=\"User\"\r\n                  className=\"w-12 h-12 rounded-full object-cover\"\r\n                />\r\n                <div className=\"flex-1\">\r\n                  <div className=\"font-semibold mb-1\">\r\n                    {reviewUsers[review.accountID]?.name || \"Người dùng\"}\r\n                  </div>\r\n                  {review.content && (\r\n                    <p className=\"text-sm text-gray-700 mb-2\">\r\n                      {review.content}\r\n                    </p>\r\n                  )}\r\n                  <div className=\"flex justify-between items-center\">\r\n                    <span className=\"text-xs text-gray-500\">\r\n                      {review.createdAt || review.reviewDate\r\n                        ? new Date(\r\n                            review.createdAt || review.reviewDate\r\n                          ).toLocaleDateString(\"vi-VN\")\r\n                        : \"\"}\r\n                    </span>\r\n                    <div className=\"flex items-center space-x-4\">\r\n                      {/* Hiển thị nút edit/delete chỉ cho review của user hiện tại */}\r\n                      {review.accountID === user?.userID && (\r\n                        <div className=\"flex space-x-2\">\r\n                          <button\r\n                            onClick={() => handleStartEditReview(review)}\r\n                            className=\"text-blue-600 hover:bg-blue-50 p-1 rounded text-sm transition\"\r\n                          >\r\n                            <FaEdit />\r\n                          </button>\r\n                          <button\r\n                            onClick={() => handleDeleteReview(review.reviewID)}\r\n                            className=\"text-red-600 hover:bg-red-50 p-1 rounded text-sm transition\"\r\n                          >\r\n                            <FaTrash />\r\n                          </button>\r\n                        </div>\r\n                      )}\r\n                    </div>\r\n                  </div>\r\n                </div>\r\n              </div>\r\n            ))\r\n          ) : (\r\n            <div className=\"mb-4 border border-gray-300 rounded-lg p-4 text-center\">\r\n              <div className=\"text-gray-500 py-8\">\r\n                <div className=\"text-lg mb-2\">📝</div>\r\n                <div>Chưa có đánh giá nào cho sản phẩm này</div>\r\n                <div className=\"text-sm mt-1\">\r\n                  Hãy là người đầu tiên đánh giá!\r\n                </div>\r\n              </div>\r\n            </div>\r\n          )}\r\n        </div>\r\n      </div>\r\n\r\n\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default ProductDetails;\r\n","C:\\Users\\ADMIN\\OneDrive - FPT Corporation\\Documents\\GitHub\\Thriftorium\\src\\pages\\About\\About.jsx",[],[],"C:\\Users\\ADMIN\\OneDrive - FPT Corporation\\Documents\\GitHub\\Thriftorium\\src\\pages\\Profile\\MyOrder.jsx",[],[],"C:\\Users\\ADMIN\\OneDrive - FPT Corporation\\Documents\\GitHub\\Thriftorium\\src\\pages\\Blog\\BlogDetail.jsx",["505","506"],[],"import React, { useState, useEffect } from \"react\";\r\nimport { useParams, useNavigate, Link } from \"react-router-dom\";\r\nimport { FaArrowLeft, FaCalendarAlt, FaUser, FaTag, FaShare } from \"react-icons/fa\";\r\nimport BlogService from \"../../service/BlogService\";\r\nimport Breadcrumbs from \"../../components/pageProps/Breadcrumbs\";\r\nimport { toast } from \"react-toastify\";\r\n\r\nconst BlogDetail = () => {\r\n  const { blogID } = useParams();\r\n  const navigate = useNavigate();\r\n  const [blog, setBlog] = useState(null);\r\n  const [relatedBlogs, setRelatedBlogs] = useState([]);\r\n  const [loading, setLoading] = useState(true);\r\n  const [notFound, setNotFound] = useState(false);\r\n\r\n  useEffect(() => {\r\n    if (blogID) {\r\n      fetchBlogDetail();\r\n      fetchRelatedBlogs();\r\n    }\r\n  }, [blogID]);\r\n\r\n  const fetchBlogDetail = async () => {\r\n    setLoading(true);\r\n    setNotFound(false);\r\n    \r\n    try {\r\n      const data = await BlogService.getBlogById(blogID);\r\n      \r\n      if (data) {\r\n        setBlog(data);\r\n      } else {\r\n        setNotFound(true);\r\n      }\r\n    } catch (error) {\r\n      console.error(\"Error fetching blog detail:\", error);\r\n      \r\n      if (error.response?.status === 404) {\r\n        setNotFound(true);\r\n      } else {\r\n        toast.error(\"Có lỗi xảy ra khi tải chi tiết blog\");\r\n      }\r\n    }\r\n    \r\n    setLoading(false);\r\n  };\r\n\r\n  const fetchRelatedBlogs = async () => {\r\n    try {\r\n      const allBlogs = await BlogService.getAllBlogs();\r\n      \r\n      if (allBlogs && allBlogs.length > 0) {\r\n        // Lấy 3 blogs khác (không bao gồm blog hiện tại)\r\n        const filtered = allBlogs\r\n          .filter(b => b.blogID !== parseInt(blogID))\r\n          .slice(0, 3);\r\n        setRelatedBlogs(filtered);\r\n      }\r\n    } catch (error) {\r\n      console.error(\"Error fetching related blogs:\", error);\r\n      setRelatedBlogs([]);\r\n    }\r\n  };\r\n\r\n  const formatDate = (dateString) => {\r\n    if (!dateString) return \"N/A\";\r\n    return new Date(dateString).toLocaleDateString(\"vi-VN\", {\r\n      weekday: \"long\",\r\n      year: \"numeric\",\r\n      month: \"long\",\r\n      day: \"numeric\"\r\n    });\r\n  };\r\n\r\n  const handleShare = () => {\r\n    if (navigator.share) {\r\n      navigator.share({\r\n        title: blog.title,\r\n        text: `Đọc bài viết: ${blog.title}`,\r\n        url: window.location.href,\r\n      });\r\n    } else {\r\n      // Fallback: copy URL to clipboard\r\n      navigator.clipboard.writeText(window.location.href);\r\n      toast.success(\"Đã sao chép link bài viết!\");\r\n    }\r\n  };\r\n\r\n  const handleRelatedBlogClick = (relatedBlogID) => {\r\n    navigate(`/blog/${relatedBlogID}`);\r\n  };\r\n\r\n  // Loading state\r\n  if (loading) {\r\n    return (\r\n      <div className=\"max-w-container mx-auto px-4 py-10\">\r\n        <div className=\"flex justify-center items-center min-h-96\">\r\n          <div className=\"text-center\">\r\n            <div className=\"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600 mx-auto\"></div>\r\n            <p className=\"mt-4 text-gray-600\">Đang tải chi tiết blog...</p>\r\n          </div>\r\n        </div>\r\n      </div>\r\n    );\r\n  }\r\n\r\n  // Not found state\r\n  if (notFound) {\r\n    return (\r\n      <div className=\"max-w-container mx-auto px-4 py-10\">\r\n        <div className=\"text-center py-16\">\r\n          <div className=\"text-6xl mb-4\">🔍</div>\r\n          <h1 className=\"text-2xl font-bold text-gray-900 mb-2\">\r\n            Không tìm thấy bài viết\r\n          </h1>\r\n          <p className=\"text-gray-600 mb-6\">\r\n            Bài viết bạn đang tìm kiếm không tồn tại hoặc đã bị xóa.\r\n          </p>\r\n          <button\r\n            onClick={() => navigate(\"/blog\")}\r\n            className=\"inline-flex items-center px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition\"\r\n          >\r\n            <FaArrowLeft className=\"mr-2\" />\r\n            Quay lại danh sách blog\r\n          </button>\r\n        </div>\r\n      </div>\r\n    );\r\n  }\r\n\r\n  // Blog detail content\r\n  return (\r\n    <div className=\"max-w-container mx-auto px-4 py-10\">\r\n      {/* Breadcrumb */}\r\n      <Breadcrumbs title={blog?.title || \"Chi tiết blog\"} prevLocation=\"Blog\" />\r\n\r\n      {/* Back button */}\r\n      <div className=\"mt-6 mb-8\">\r\n        <button\r\n          onClick={() => navigate(\"/blog\")}\r\n          className=\"inline-flex items-center text-blue-600 hover:text-blue-800 transition\"\r\n        >\r\n          <FaArrowLeft className=\"mr-2\" />\r\n          Quay lại danh sách blog\r\n        </button>\r\n      </div>\r\n\r\n      {blog && (\r\n        <div className=\"grid grid-cols-1 lg:grid-cols-3 gap-8\">\r\n          {/* Main content */}\r\n          <article className=\"lg:col-span-2\">\r\n            {/* Blog header */}\r\n            <header className=\"mb-8\">\r\n              {/* Status badge */}\r\n              <div className=\"mb-4\">\r\n                <span\r\n                  className={`inline-flex px-3 py-1 text-sm font-medium rounded-full ${\r\n                    blog.status\r\n                      ? \"bg-green-100 text-green-800\"\r\n                      : \"bg-red-100 text-red-800\"\r\n                  }`}\r\n                >\r\n                  {blog.status ? \"Đang hoạt động\" : \"Không hoạt động\"}\r\n                </span>\r\n              </div>\r\n\r\n              {/* Title */}\r\n              <h1 className=\"text-3xl lg:text-4xl font-bold text-gray-900 mb-4 leading-tight\">\r\n                {blog.title}\r\n              </h1>\r\n\r\n              {/* Meta info */}\r\n              <div className=\"flex flex-wrap items-center gap-4 text-gray-600 text-sm mb-6\">\r\n                <div className=\"flex items-center\">\r\n                  <FaUser className=\"mr-2\" />\r\n                  <span>Tác giả: {blog.author}</span>\r\n                </div>\r\n                <div className=\"flex items-center\">\r\n                  <FaCalendarAlt className=\"mr-2\" />\r\n                  <span>{formatDate(blog.createAt)}</span>\r\n                </div>\r\n                {blog.updateAt && blog.updateAt !== blog.createAt && (\r\n                  <div className=\"flex items-center\">\r\n                    <FaTag className=\"mr-2\" />\r\n                    <span>Cập nhật: {formatDate(blog.updateAt)}</span>\r\n                  </div>\r\n                )}\r\n              </div>\r\n\r\n              {/* Share button */}\r\n              <div className=\"flex items-center gap-4\">\r\n                <button\r\n                  onClick={handleShare}\r\n                  className=\"inline-flex items-center px-4 py-2 border border-gray-300 rounded-lg hover:bg-gray-50 transition text-gray-700\"\r\n                >\r\n                  <FaShare className=\"mr-2\" />\r\n                  Chia sẻ\r\n                </button>\r\n              </div>\r\n            </header>\r\n\r\n            {/* Blog images */}\r\n            {blog.imageBlogs && blog.imageBlogs.length > 0 && (\r\n              <div className=\"mb-8\">\r\n                {blog.imageBlogs.length === 1 ? (\r\n                  <img\r\n                    src={blog.imageBlogs[0].image}\r\n                    alt={blog.title}\r\n                    className=\"w-full h-64 lg:h-96 object-cover rounded-lg\"\r\n                    onError={(e) => {\r\n                      e.target.style.display = 'none';\r\n                    }}\r\n                  />\r\n                ) : (\r\n                  <div className=\"grid grid-cols-1 md:grid-cols-2 gap-4\">\r\n                    {blog.imageBlogs.map((img, index) => (\r\n                      <img\r\n                        key={index}\r\n                        src={img.image}\r\n                        alt={`${blog.title} - Hình ${index + 1}`}\r\n                        className=\"w-full h-48 object-cover rounded-lg\"\r\n                        onError={(e) => {\r\n                          e.target.style.display = 'none';\r\n                        }}\r\n                      />\r\n                    ))}\r\n                  </div>\r\n                )}\r\n              </div>\r\n            )}\r\n\r\n            {/* Blog content */}\r\n            <div className=\"prose prose-lg max-w-none\">\r\n              <div className=\"text-gray-700 leading-relaxed whitespace-pre-wrap\">\r\n                {blog.content}\r\n              </div>\r\n            </div>\r\n\r\n            {/* Blog footer */}\r\n            <footer className=\"mt-8 pt-8 border-t border-gray-200\">\r\n              <div className=\"flex items-center justify-between\">\r\n                <div className=\"text-sm text-gray-500\">\r\n                  ID Blog: {blog.blogID}\r\n                  {blog.accountID && (\r\n                    <span className=\"ml-4\">Account ID: {blog.accountID}</span>\r\n                  )}\r\n                </div>\r\n                <button\r\n                  onClick={handleShare}\r\n                  className=\"text-sm text-blue-600 hover:text-blue-800 transition\"\r\n                >\r\n                  Chia sẻ bài viết này\r\n                </button>\r\n              </div>\r\n            </footer>\r\n          </article>\r\n\r\n          {/* Sidebar */}\r\n          <aside className=\"lg:col-span-1\">\r\n            {/* Author info */}\r\n            <div className=\"bg-gray-50 rounded-lg p-6 mb-8\">\r\n              <h3 className=\"text-lg font-semibold mb-4\">Về tác giả</h3>\r\n              <div className=\"flex items-center mb-4\">\r\n                <div className=\"w-12 h-12 bg-blue-600 rounded-full flex items-center justify-center text-white font-semibold\">\r\n                  {blog.author?.charAt(0)?.toUpperCase() || \"A\"}\r\n                </div>\r\n                <div className=\"ml-4\">\r\n                  <h4 className=\"font-medium text-gray-900\">{blog.author}</h4>\r\n                  <p className=\"text-sm text-gray-600\">Tác giả</p>\r\n                </div>\r\n              </div>\r\n              <p className=\"text-sm text-gray-600\">\r\n                Các bài viết được chia sẻ trên Thriftorium nhằm mang đến thông tin hữu ích \r\n                về thế giới tái sử dụng và bảo vệ môi trường.\r\n              </p>\r\n            </div>\r\n\r\n            {/* Related blogs */}\r\n            {relatedBlogs.length > 0 && (\r\n              <div className=\"bg-white rounded-lg border border-gray-200 p-6\">\r\n                <h3 className=\"text-lg font-semibold mb-4\">Bài viết liên quan</h3>\r\n                <div className=\"space-y-4\">\r\n                  {relatedBlogs.map((relatedBlog) => (\r\n                    <div\r\n                      key={relatedBlog.blogID}\r\n                      onClick={() => handleRelatedBlogClick(relatedBlog.blogID)}\r\n                      className=\"cursor-pointer group\"\r\n                    >\r\n                      <h4 className=\"text-sm font-medium text-gray-900 group-hover:text-blue-600 transition line-clamp-2\">\r\n                        {relatedBlog.title}\r\n                      </h4>\r\n                      <p className=\"text-xs text-gray-500 mt-1\">\r\n                        {formatDate(relatedBlog.createAt)}\r\n                      </p>\r\n                      <p className=\"text-xs text-gray-600 mt-2 line-clamp-2\">\r\n                        {relatedBlog.content?.substring(0, 100)}...\r\n                      </p>\r\n                    </div>\r\n                  ))}\r\n                </div>\r\n                \r\n                <div className=\"mt-6\">\r\n                  <button\r\n                    onClick={() => navigate(\"/blog\")}\r\n                    className=\"w-full text-center text-sm text-blue-600 hover:text-blue-800 transition\"\r\n                  >\r\n                    Xem tất cả bài viết →\r\n                  </button>\r\n                </div>\r\n              </div>\r\n            )}\r\n          </aside>\r\n        </div>\r\n      )}\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default BlogDetail; ","C:\\Users\\ADMIN\\OneDrive - FPT Corporation\\Documents\\GitHub\\Thriftorium\\src\\pages\\Blog\\Blog.jsx",["507"],[],"// src/pages/Blog/Blog.js\r\nimport React, { useEffect, useState } from \"react\";\r\nimport { Link, useLocation, useNavigate } from \"react-router-dom\";\r\nimport Breadcrumbs from \"../../components/pageProps/Breadcrumbs\";\r\nimport BlogService from \"../../service/BlogService\";\r\nimport { toast } from \"react-toastify\";\r\n\r\nexport default function Blog() {\r\n  const location = useLocation();\r\n  const navigate = useNavigate();\r\n  const [prevLocation, setPrevLocation] = useState(\"\");\r\n  const [blogs, setBlogs] = useState([]);\r\n  const [loading, setLoading] = useState(true);\r\n  const [featuredBlog, setFeaturedBlog] = useState(null);\r\n\r\n  useEffect(() => {\r\n    if (location.state && location.state.data) {\r\n      setPrevLocation(location.state.data);\r\n    }\r\n  }, [location]);\r\n\r\n  useEffect(() => {\r\n    fetchBlogs();\r\n  }, []);\r\n\r\n  const fetchBlogs = async () => {\r\n    setLoading(true);\r\n    try {\r\n      const data = await BlogService.getAllBlogs();\r\n      \r\n      if (data && data.length > 0) {\r\n        // Lấy blog đầu tiên làm featured blog\r\n        setFeaturedBlog(data[0]);\r\n        // Lấy 5 blogs gần đây nhất (trừ featured blog)\r\n        setBlogs(data.slice(1, 6));\r\n      } else {\r\n        setBlogs([]);\r\n        setFeaturedBlog(null);\r\n      }\r\n    } catch (error) {\r\n      console.error(\"Error fetching blogs:\", error);\r\n      toast.error(\"Có lỗi xảy ra khi tải danh sách blog\");\r\n      setBlogs([]);\r\n      setFeaturedBlog(null);\r\n    }\r\n    setLoading(false);\r\n  };\r\n\r\n  const formatDate = (dateString) => {\r\n    if (!dateString) return \"N/A\";\r\n    return new Date(dateString).toLocaleDateString(\"vi-VN\", {\r\n      day: \"numeric\",\r\n      month: \"long\", \r\n      year: \"numeric\"\r\n    });\r\n  };\r\n\r\n  const truncateContent = (content, maxLength = 300) => {\r\n    if (!content) return \"Nội dung blog...\";\r\n    return content.length > maxLength ? content.substring(0, maxLength) + \"...\" : content;\r\n  };\r\n\r\n  const handleBlogClick = (blogID) => {\r\n    // Navigate to blog detail page (you can implement this later)\r\n    navigate(`/blog/${blogID}`);\r\n  };\r\n\r\n  if (loading) {\r\n    return (\r\n      <div className=\"max-w-container mx-auto px-4 py-10\">\r\n        <Breadcrumbs title=\"Blog\" prevLocation={prevLocation} />\r\n        <div className=\"mt-6 flex justify-center items-center min-h-96\">\r\n          <div className=\"text-center\">\r\n            <div className=\"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600 mx-auto\"></div>\r\n            <p className=\"mt-4 text-gray-600\">Đang tải danh sách blog...</p>\r\n          </div>\r\n        </div>\r\n      </div>\r\n    );\r\n  }\r\n\r\n  return (\r\n    <div className=\"max-w-container mx-auto px-4 py-10\">\r\n      {/* Breadcrumb + Title */}\r\n      <Breadcrumbs title=\"Blog\" prevLocation={prevLocation} />\r\n\r\n      {/* Main grid */}\r\n      <div className=\"mt-6 grid grid-cols-1 md:grid-cols-3 gap-8\">\r\n        {/* Left column: featured blog */}\r\n        <div className=\"md:col-span-2 space-y-6\">\r\n          {featuredBlog ? (\r\n            <>\r\n              {/* Featured Blog Image */}\r\n              {featuredBlog.imageBlogs && featuredBlog.imageBlogs.length > 0 ? (\r\n                <img\r\n                  src={featuredBlog.imageBlogs[0].image}\r\n                  alt={featuredBlog.title}\r\n                  className=\"w-full h-64 object-cover rounded-lg border\"\r\n                  onError={(e) => {\r\n                    e.target.src = \"/assets/images/thriftorium-logo.png\";\r\n                  }}\r\n                />\r\n              ) : (\r\n                <div className=\"w-full h-64 bg-gray-200 rounded-lg border flex items-center justify-center\">\r\n                  <span className=\"text-gray-500\">Không có hình ảnh</span>\r\n                </div>\r\n              )}\r\n\r\n              {/* Featured Blog Content */}\r\n              <div className=\"space-y-4\">\r\n                <h2 className=\"text-2xl font-bold uppercase text-gray-900\">\r\n                  {featuredBlog.title}\r\n                </h2>\r\n\r\n                <div className=\"flex items-center text-sm text-gray-500 space-x-4\">\r\n                  <span>Tác giả: {featuredBlog.author}</span>\r\n                  <span>•</span>\r\n                  <span>Ngày đăng: {formatDate(featuredBlog.createAt)}</span>\r\n                  <span>•</span>\r\n                  <span className={`px-2 py-1 rounded-full text-xs ${\r\n                    featuredBlog.status \r\n                      ? \"bg-green-100 text-green-800\" \r\n                      : \"bg-red-100 text-red-800\"\r\n                  }`}>\r\n                    {featuredBlog.status ? \"Đang hoạt động\" : \"Không hoạt động\"}\r\n                  </span>\r\n                </div>\r\n\r\n                <div className=\"prose prose-gray max-w-none\">\r\n                  <p className=\"text-gray-700 leading-relaxed\">\r\n                    {truncateContent(featuredBlog.content)}\r\n                  </p>\r\n                </div>\r\n\r\n                <div className=\"flex items-center gap-4\">\r\n                  <button\r\n                    onClick={() => handleBlogClick(featuredBlog.blogID)}\r\n                    className=\"inline-flex items-center px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition\"\r\n                  >\r\n                    Đọc thêm\r\n                    <svg className=\"ml-2 w-4 h-4\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\r\n                      <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2} d=\"M9 5l7 7-7 7\" />\r\n                    </svg>\r\n                  </button>\r\n                  \r\n                  <button\r\n                    onClick={() => navigate(\"/blogs\")}\r\n                    className=\"inline-flex items-center px-4 py-2 border border-gray-300 text-gray-700 rounded-lg hover:bg-gray-50 transition\"\r\n                  >\r\n                    Xem tất cả bài viết\r\n                  </button>\r\n                </div>\r\n              </div>\r\n            </>\r\n          ) : (\r\n            <div className=\"text-center py-12\">\r\n              <div className=\"text-4xl mb-4\">📝</div>\r\n              <h2 className=\"text-xl font-semibold text-gray-900 mb-2\">\r\n                Chưa có blog nào\r\n              </h2>\r\n              <p className=\"text-gray-600\">\r\n                Hiện tại chưa có bài viết blog nào được đăng tải.\r\n              </p>\r\n            </div>\r\n          )}\r\n        </div>\r\n\r\n        {/* Right column: recent posts */}\r\n        <aside className=\"md:col-span-1\">\r\n          <h3 className=\"text-xl font-semibold mb-4\">Bài viết gần đây</h3>\r\n          \r\n          {blogs.length > 0 ? (\r\n            <ul className=\"space-y-4\">\r\n              {blogs.map((blog) => (\r\n                <li key={blog.blogID} className=\"border border-gray-200 rounded-lg p-4 hover:shadow-md transition cursor-pointer\">\r\n                  <div onClick={() => handleBlogClick(blog.blogID)}>\r\n                    <h4 className=\"text-gray-800 font-medium hover:text-blue-600 transition line-clamp-2\">\r\n                      {blog.title}\r\n                    </h4>\r\n                    <p className=\"text-sm text-gray-600 mt-2 line-clamp-2\">\r\n                      {truncateContent(blog.content, 100)}\r\n                    </p>\r\n                    <div className=\"flex items-center justify-between mt-3 text-xs text-gray-500\">\r\n                      <span>Ngày đăng: {formatDate(blog.createAt)}</span>\r\n                      <span>Bởi: {blog.author}</span>\r\n                    </div>\r\n                  </div>\r\n                </li>\r\n              ))}\r\n            </ul>\r\n          ) : (\r\n            <div className=\"text-center py-8 border border-gray-200 rounded-lg\">\r\n              <div className=\"text-gray-400 mb-2\">📰</div>\r\n              <p className=\"text-gray-500 text-sm\">\r\n                Chưa có bài viết gần đây\r\n              </p>\r\n            </div>\r\n          )}\r\n\r\n          {/* View All Blogs Button */}\r\n          <div className=\"mt-6\">\r\n            <button\r\n              onClick={() => navigate(\"/blogs\")}\r\n              className=\"w-full px-4 py-2 text-center border border-gray-300 rounded-lg hover:bg-gray-50 transition text-gray-700\"\r\n            >\r\n              Xem tất cả bài viết\r\n            </button>\r\n          </div>\r\n        </aside>\r\n      </div>\r\n    </div>\r\n  );\r\n}\r\n","C:\\Users\\ADMIN\\OneDrive - FPT Corporation\\Documents\\GitHub\\Thriftorium\\src\\pages\\Blog\\BlogList.jsx",["508","509","510","511"],[],"import React, { useState, useEffect } from \"react\";\r\nimport { useNavigate, useSearchParams } from \"react-router-dom\";\r\nimport { FaSearch, FaCalendarAlt, FaUser, FaEye, FaFilter } from \"react-icons/fa\";\r\nimport BlogService from \"../../service/BlogService\";\r\nimport Breadcrumbs from \"../../components/pageProps/Breadcrumbs\";\r\nimport { toast } from \"react-toastify\";\r\n\r\nconst BlogList = () => {\r\n  const navigate = useNavigate();\r\n  const [searchParams, setSearchParams] = useSearchParams();\r\n  \r\n  // State management\r\n  const [blogs, setBlogs] = useState([]);\r\n  const [loading, setLoading] = useState(true);\r\n  const [searchTerm, setSearchTerm] = useState(searchParams.get(\"search\") || \"\");\r\n  const [currentPage, setCurrentPage] = useState(parseInt(searchParams.get(\"page\")) || 1);\r\n  const [totalPages, setTotalPages] = useState(1);\r\n  const [totalBlogs, setTotalBlogs] = useState(0);\r\n  const [pageSize] = useState(9); // 9 blogs per page\r\n  const [sortBy, setSortBy] = useState(searchParams.get(\"sort\") || \"newest\");\r\n  const [statusFilter, setStatusFilter] = useState(searchParams.get(\"status\") || \"all\");\r\n\r\n  // Input states\r\n  const [searchInput, setSearchInput] = useState(searchTerm);\r\n\r\n  useEffect(() => {\r\n    fetchBlogs();\r\n  }, [currentPage, searchTerm, sortBy, statusFilter]);\r\n\r\n  useEffect(() => {\r\n    // Update URL params when filters change\r\n    const params = new URLSearchParams();\r\n    if (searchTerm) params.set(\"search\", searchTerm);\r\n    if (currentPage > 1) params.set(\"page\", currentPage.toString());\r\n    if (sortBy !== \"newest\") params.set(\"sort\", sortBy);\r\n    if (statusFilter !== \"all\") params.set(\"status\", statusFilter);\r\n    \r\n    setSearchParams(params);\r\n  }, [searchTerm, currentPage, sortBy, statusFilter, setSearchParams]);\r\n\r\n  const fetchBlogs = async () => {\r\n    setLoading(true);\r\n    \r\n    try {\r\n      let data = [];\r\n      \r\n      if (searchTerm.trim()) {\r\n        // Use search API with server-side pagination\r\n        const searchResult = await BlogService.getBlogSearch(searchTerm, currentPage, pageSize);\r\n        \r\n        if (searchResult) {\r\n          data = searchResult.items || searchResult.data || searchResult;\r\n          setTotalPages(searchResult.totalPages || Math.ceil((searchResult.total || data.length) / pageSize));\r\n          setTotalBlogs(searchResult.total || data.length);\r\n        }\r\n      } else {\r\n        // Use getAllBlogs and handle client-side pagination/filtering\r\n        const allBlogs = await BlogService.getAllBlogs();\r\n        \r\n        if (allBlogs && allBlogs.length > 0) {\r\n          let filteredBlogs = [...allBlogs];\r\n          \r\n          // Apply status filter\r\n          if (statusFilter !== \"all\") {\r\n            const isActive = statusFilter === \"active\";\r\n            filteredBlogs = filteredBlogs.filter(blog => blog.status === isActive);\r\n          }\r\n          \r\n          // Apply sorting\r\n          filteredBlogs.sort((a, b) => {\r\n            switch (sortBy) {\r\n              case \"oldest\":\r\n                return new Date(a.createAt) - new Date(b.createAt);\r\n              case \"title\":\r\n                return a.title.localeCompare(b.title);\r\n              case \"author\":\r\n                return a.author.localeCompare(b.author);\r\n              case \"newest\":\r\n              default:\r\n                return new Date(b.createAt) - new Date(a.createAt);\r\n            }\r\n          });\r\n          \r\n          // Client-side pagination\r\n          const startIndex = (currentPage - 1) * pageSize;\r\n          const endIndex = startIndex + pageSize;\r\n          data = filteredBlogs.slice(startIndex, endIndex);\r\n          \r\n          setTotalBlogs(filteredBlogs.length);\r\n          setTotalPages(Math.ceil(filteredBlogs.length / pageSize));\r\n        }\r\n      }\r\n      \r\n      setBlogs(data);\r\n    } catch (error) {\r\n      console.error(\"Error fetching blogs:\", error);\r\n      toast.error(\"Có lỗi xảy ra khi tải danh sách blog\");\r\n      setBlogs([]);\r\n      setTotalPages(1);\r\n      setTotalBlogs(0);\r\n    }\r\n    \r\n    setLoading(false);\r\n  };\r\n\r\n  const handleSearch = (e) => {\r\n    e.preventDefault();\r\n    setSearchTerm(searchInput.trim());\r\n    setCurrentPage(1);\r\n  };\r\n\r\n  const handleClearSearch = () => {\r\n    setSearchInput(\"\");\r\n    setSearchTerm(\"\");\r\n    setCurrentPage(1);\r\n  };\r\n\r\n  const handlePageChange = (page) => {\r\n    setCurrentPage(page);\r\n    window.scrollTo({ top: 0, behavior: \"smooth\" });\r\n  };\r\n\r\n  const handleSortChange = (newSort) => {\r\n    setSortBy(newSort);\r\n    setCurrentPage(1);\r\n  };\r\n\r\n  const handleStatusChange = (newStatus) => {\r\n    setStatusFilter(newStatus);\r\n    setCurrentPage(1);\r\n  };\r\n\r\n  const formatDate = (dateString) => {\r\n    if (!dateString) return \"N/A\";\r\n    return new Date(dateString).toLocaleDateString(\"vi-VN\", {\r\n      day: \"numeric\",\r\n      month: \"short\",\r\n      year: \"numeric\"\r\n    });\r\n  };\r\n\r\n  const truncateContent = (content, maxLength = 150) => {\r\n    if (!content) return \"Nội dung blog...\";\r\n    return content.length > maxLength ? content.substring(0, maxLength) + \"...\" : content;\r\n  };\r\n\r\n  const handleBlogClick = (blogID) => {\r\n    navigate(`/blog/${blogID}`);\r\n  };\r\n\r\n  // Pagination component\r\n  const renderPagination = () => {\r\n    if (totalPages <= 1) return null;\r\n\r\n    const pages = [];\r\n    const maxVisiblePages = 5;\r\n    \r\n    let startPage = Math.max(1, currentPage - Math.floor(maxVisiblePages / 2));\r\n    let endPage = Math.min(totalPages, startPage + maxVisiblePages - 1);\r\n    \r\n    if (endPage - startPage + 1 < maxVisiblePages) {\r\n      startPage = Math.max(1, endPage - maxVisiblePages + 1);\r\n    }\r\n\r\n    // Previous button\r\n    if (currentPage > 1) {\r\n      pages.push(\r\n        <button\r\n          key=\"prev\"\r\n          onClick={() => handlePageChange(currentPage - 1)}\r\n          className=\"px-3 py-2 border border-gray-300 rounded-l-lg hover:bg-gray-50 transition\"\r\n        >\r\n          ‹\r\n        </button>\r\n      );\r\n    }\r\n\r\n    // Page numbers\r\n    for (let i = startPage; i <= endPage; i++) {\r\n      pages.push(\r\n        <button\r\n          key={i}\r\n          onClick={() => handlePageChange(i)}\r\n          className={`px-3 py-2 border-t border-b border-gray-300 transition ${\r\n            i === currentPage\r\n              ? \"bg-blue-600 text-white border-blue-600\"\r\n              : \"hover:bg-gray-50\"\r\n          }`}\r\n        >\r\n          {i}\r\n        </button>\r\n      );\r\n    }\r\n\r\n    // Next button\r\n    if (currentPage < totalPages) {\r\n      pages.push(\r\n        <button\r\n          key=\"next\"\r\n          onClick={() => handlePageChange(currentPage + 1)}\r\n          className=\"px-3 py-2 border border-gray-300 rounded-r-lg hover:bg-gray-50 transition\"\r\n        >\r\n          ›\r\n        </button>\r\n      );\r\n    }\r\n\r\n    return (\r\n      <div className=\"flex justify-center items-center mt-8 space-x-1\">\r\n        {pages}\r\n      </div>\r\n    );\r\n  };\r\n\r\n  return (\r\n    <div className=\"max-w-container mx-auto px-4 py-10\">\r\n      {/* Breadcrumb */}\r\n      <Breadcrumbs title=\"Tất cả bài viết\" prevLocation=\"Blog\" />\r\n\r\n      {/* Header */}\r\n      <div className=\"mt-6 mb-8\">\r\n        <h1 className=\"text-3xl font-bold text-gray-900 mb-2\">Tất cả bài viết</h1>\r\n        <p className=\"text-gray-600\">\r\n          Khám phá tất cả các bài viết về thế giới tái sử dụng và bảo vệ môi trường\r\n        </p>\r\n      </div>\r\n\r\n      {/* Search and Filters */}\r\n      <div className=\"bg-gray-50 rounded-lg p-6 mb-8\">\r\n        <div className=\"grid grid-cols-1 lg:grid-cols-12 gap-4\">\r\n          {/* Search bar */}\r\n          <div className=\"lg:col-span-6\">\r\n            <form onSubmit={handleSearch} className=\"relative\">\r\n              <input\r\n                type=\"text\"\r\n                value={searchInput}\r\n                onChange={(e) => setSearchInput(e.target.value)}\r\n                placeholder=\"Tìm kiếm bài viết...\"\r\n                className=\"w-full pl-10 pr-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500\"\r\n              />\r\n              <FaSearch className=\"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400\" />\r\n              {searchInput && (\r\n                <button\r\n                  type=\"button\"\r\n                  onClick={handleClearSearch}\r\n                  className=\"absolute right-3 top-1/2 transform -translate-y-1/2 text-gray-400 hover:text-gray-600\"\r\n                >\r\n                  ✕\r\n                </button>\r\n              )}\r\n            </form>\r\n          </div>\r\n\r\n          {/* <div className=\"lg:col-span-3\">\r\n            <select\r\n              value={sortBy}\r\n              onChange={(e) => handleSortChange(e.target.value)}\r\n              className=\"w-full px-3 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500\"\r\n            >\r\n              <option value=\"newest\">Mới nhất</option>\r\n              <option value=\"oldest\">Cũ nhất</option>\r\n              <option value=\"title\">Theo tiêu đề</option>\r\n              <option value=\"author\">Theo tác giả</option>\r\n            </select>\r\n          </div>\r\n\r\n          <div className=\"lg:col-span-3\">\r\n            <select\r\n              value={statusFilter}\r\n              onChange={(e) => handleStatusChange(e.target.value)}\r\n              className=\"w-full px-3 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500\"\r\n            >\r\n              <option value=\"all\">Tất cả trạng thái</option>\r\n              <option value=\"active\">Đang hoạt động</option>\r\n              <option value=\"inactive\">Không hoạt động</option>\r\n            </select>\r\n          </div> */}\r\n        </div>\r\n\r\n        {/* Search results info */}\r\n        {!loading && (\r\n          <div className=\"mt-4 text-sm text-gray-600\">\r\n            {searchTerm ? (\r\n              <span>\r\n                Tìm thấy <strong>{totalBlogs}</strong> kết quả cho \"{searchTerm}\"\r\n              </span>\r\n            ) : (\r\n              <span>\r\n                Hiển thị <strong>{totalBlogs}</strong> bài viết\r\n                {statusFilter !== \"all\" && (\r\n                  <span> - Trạng thái: <strong>\r\n                    {statusFilter === \"active\" ? \"Đang hoạt động\" : \"Không hoạt động\"}\r\n                  </strong></span>\r\n                )}\r\n              </span>\r\n            )}\r\n          </div>\r\n        )}\r\n      </div>\r\n\r\n      {/* Loading state */}\r\n      {loading && (\r\n        <div className=\"flex justify-center items-center min-h-96\">\r\n          <div className=\"text-center\">\r\n            <div className=\"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600 mx-auto\"></div>\r\n            <p className=\"mt-4 text-gray-600\">Đang tải danh sách blog...</p>\r\n          </div>\r\n        </div>\r\n      )}\r\n\r\n      {/* Blog grid */}\r\n      {!loading && (\r\n        <>\r\n          {blogs.length > 0 ? (\r\n            <>\r\n              <div className=\"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6\">\r\n                {blogs.map((blog) => (\r\n                  <article\r\n                    key={blog.blogID}\r\n                    onClick={() => handleBlogClick(blog.blogID)}\r\n                    className=\"bg-white rounded-lg border border-gray-200 overflow-hidden hover:shadow-lg transition cursor-pointer group\"\r\n                  >\r\n                    {/* Blog image */}\r\n                    <div className=\"aspect-video bg-gray-200 overflow-hidden\">\r\n                      {blog.imageBlogs && blog.imageBlogs.length > 0 ? (\r\n                        <img\r\n                          src={blog.imageBlogs[0].image}\r\n                          alt={blog.title}\r\n                          className=\"w-full h-full object-cover group-hover:scale-105 transition duration-300\"\r\n                          onError={(e) => {\r\n                            e.target.src = \"/assets/images/thriftorium-logo.png\";\r\n                          }}\r\n                        />\r\n                      ) : (\r\n                        <div className=\"w-full h-full flex items-center justify-center bg-gray-100\">\r\n                          <span className=\"text-gray-400\">📝</span>\r\n                        </div>\r\n                      )}\r\n                    </div>\r\n\r\n                    {/* Blog content */}\r\n                    <div className=\"p-6\">\r\n                      {/* Status badge */}\r\n                      <div className=\"flex items-center justify-between mb-3\">\r\n                        <span\r\n                          className={`inline-flex px-2 py-1 text-xs font-medium rounded-full ${\r\n                            blog.status\r\n                              ? \"bg-green-100 text-green-800\"\r\n                              : \"bg-red-100 text-red-800\"\r\n                          }`}\r\n                        >\r\n                          {blog.status ? \"Hoạt động\" : \"Không hoạt động\"}\r\n                        </span>\r\n                        \r\n                        {blog.imageBlogs && blog.imageBlogs.length > 1 && (\r\n                          <span className=\"text-xs text-gray-500\">\r\n                            +{blog.imageBlogs.length - 1} ảnh\r\n                          </span>\r\n                        )}\r\n                      </div>\r\n\r\n                      {/* Title */}\r\n                      <h3 className=\"text-lg font-semibold text-gray-900 mb-2 line-clamp-2 group-hover:text-blue-600 transition\">\r\n                        {blog.title}\r\n                      </h3>\r\n\r\n                      {/* Content preview */}\r\n                      <p className=\"text-gray-600 text-sm mb-4 line-clamp-3\">\r\n                        {truncateContent(blog.content)}\r\n                      </p>\r\n\r\n                      {/* Meta info */}\r\n                      <div className=\"flex items-center justify-between text-xs text-gray-500\">\r\n                        <div className=\"flex items-center space-x-3\">\r\n                          <span className=\"flex items-center\">\r\n                            <FaUser className=\"mr-1\" />\r\n                            {blog.author}\r\n                          </span>\r\n                          <span className=\"flex items-center\">\r\n                            <FaCalendarAlt className=\"mr-1\" />\r\n                            {formatDate(blog.createAt)}\r\n                          </span>\r\n                        </div>\r\n                        \r\n                        <div className=\"flex items-center text-blue-600 group-hover:text-blue-800\">\r\n                          <FaEye className=\"mr-1\" />\r\n                          <span>Xem chi tiết</span>\r\n                        </div>\r\n                      </div>\r\n                    </div>\r\n                  </article>\r\n                ))}\r\n              </div>\r\n\r\n              {/* Pagination */}\r\n              {renderPagination()}\r\n\r\n              {/* Pagination info */}\r\n              <div className=\"mt-4 text-center text-sm text-gray-600\">\r\n                Trang {currentPage} / {totalPages} - Tổng {totalBlogs} bài viết\r\n              </div>\r\n            </>\r\n          ) : (\r\n            /* Empty state */\r\n            <div className=\"text-center py-16\">\r\n              <div className=\"text-6xl mb-4\">🔍</div>\r\n              <h2 className=\"text-2xl font-bold text-gray-900 mb-2\">\r\n                {searchTerm ? \"Không tìm thấy kết quả\" : \"Chưa có bài viết nào\"}\r\n              </h2>\r\n              <p className=\"text-gray-600 mb-6\">\r\n                {searchTerm\r\n                  ? `Không có bài viết nào phù hợp với \"${searchTerm}\"`\r\n                  : \"Hiện tại chưa có bài viết blog nào được đăng tải.\"}\r\n              </p>\r\n              {searchTerm && (\r\n                <button\r\n                  onClick={handleClearSearch}\r\n                  className=\"inline-flex items-center px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition\"\r\n                >\r\n                  Xóa bộ lọc\r\n                </button>\r\n              )}\r\n            </div>\r\n          )}\r\n        </>\r\n      )}\r\n\r\n      {/* Quick navigation */}\r\n      <div className=\"mt-12 text-center\">\r\n        <button\r\n          onClick={() => navigate(\"/blog\")}\r\n          className=\"inline-flex items-center px-6 py-3 border border-gray-300 rounded-lg hover:bg-gray-50 transition text-gray-700\"\r\n        >\r\n          ← Quay lại trang Blog chính\r\n        </button>\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default BlogList; ","C:\\Users\\ADMIN\\OneDrive - FPT Corporation\\Documents\\GitHub\\Thriftorium\\src\\pages\\payment\\PaymentSuccess.jsx",[],[],"C:\\Users\\ADMIN\\OneDrive - FPT Corporation\\Documents\\GitHub\\Thriftorium\\src\\pages\\Subscription\\Subscription.jsx",["512","513"],[],"import React, { useState, useEffect } from 'react';\r\nimport { message } from 'antd';\r\nimport { useNavigate } from 'react-router-dom';\r\nimport { createSubscription, getSubscriptionByAccountId } from '../../service/SubscriptionService';\r\nimport { getAllSubscriptionPlans } from '../../service/SubscriptionPlanService';\r\nimport { useAuth } from '../../context/AuthContext';\r\n\r\nconst Subscription = () => {\r\n  const [selectedPlan, setSelectedPlan] = useState(null);\r\n  const [paymentMethod, setPaymentMethod] = useState('vnpay');\r\n  const [subscriptionPlans, setSubscriptionPlans] = useState([]);\r\n  const [currentSubscription, setCurrentSubscription] = useState(null);\r\n  const [loading, setLoading] = useState(false);\r\n  const { user } = useAuth();\r\n  const navigate = useNavigate();\r\n\r\n  const [formData, setFormData] = useState({\r\n    accountName: '',\r\n    paymentDetails: '',\r\n    billingPeriod: '',\r\n    cardNumber: '',\r\n    birthday: '',\r\n    country: '',\r\n    city: '',\r\n    socialSecurity: ''\r\n  });\r\n\r\n  useEffect(() => {\r\n    const fetchData = async () => {\r\n      try {\r\n        setLoading(true);\r\n        // Fetch all subscription plans\r\n        const plans = await getAllSubscriptionPlans();\r\n        setSubscriptionPlans(plans);\r\n\r\n        // Fetch current user's subscription if they have one\r\n        if (user?.userID) {\r\n          const userSub = await getSubscriptionByAccountId(user.userID);\r\n          setCurrentSubscription(userSub);\r\n        }\r\n      } catch (error) {\r\n        message.error('Failed to fetch subscription data');\r\n        console.error('Error:', error);\r\n      } finally {\r\n        setLoading(false);\r\n      }\r\n    };\r\n\r\n    fetchData();\r\n  }, [user]);\r\n\r\n  const handleInputChange = (e) => {\r\n    setFormData({\r\n      ...formData,\r\n      [e.target.name]: e.target.value\r\n    });\r\n  };\r\n\r\n  const handleSubscribe = async () => {\r\n    if (!selectedPlan) {\r\n      message.error('Please select a subscription plan');\r\n      return;\r\n    }\r\n\r\n    if (!user) {\r\n      message.error('Please login to subscribe');\r\n      navigate('/signin');\r\n      return;\r\n    }\r\n\r\n    try {\r\n      setLoading(true);\r\n      const vnpayUrl = await createSubscription(user.userID, selectedPlan.planID);\r\n      // Redirect to VNPay payment page\r\n      window.location.href = vnpayUrl;\r\n    } catch (error) {\r\n      message.error('Failed to create subscription');\r\n      console.error('Error:', error);\r\n    } finally {\r\n      setLoading(false);\r\n    }\r\n  };\r\n\r\n  return (\r\n    <div className=\"min-h-screen bg-gray-50\">\r\n      <main className=\"max-w-container mx-auto px-4 py-8\">\r\n        <div className=\"flex items-center mb-8\">\r\n          <div className=\"w-8 h-8 bg-green-600 rounded-full flex items-center justify-center mr-3\">\r\n            <span className=\"text-white font-bold text-sm\">T</span>\r\n          </div>\r\n          <span className=\"text-lg font-semibold text-gray-900\">Thirtorium</span>\r\n        </div>\r\n\r\n        <div className=\"grid grid-cols-1 lg:grid-cols-2 gap-8\">\r\n          {/* Left Side - Form */}\r\n          <div className=\"bg-white rounded-lg shadow-sm p-6\">\r\n            <h2 className=\"text-2xl font-bold text-gray-900 mb-6\">Create your own shop</h2>\r\n            <p className=\"text-gray-600 mb-8\">\r\n              Do more with the help of Thriftorium, shop that sell more sell on Thriftorium\r\n            </p>\r\n\r\n            <div className=\"space-y-6\">\r\n              <div>\r\n                <label className=\"block text-sm font-medium text-gray-700 mb-2\">\r\n                  Shop ID\r\n                </label>\r\n                <input\r\n                  type=\"text\"\r\n                  name=\"accountName\"\r\n                  placeholder=\"Enter account name\"\r\n                  value={formData.accountName}\r\n                  onChange={handleInputChange}\r\n                  className=\"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-green-500\"\r\n                />\r\n              </div>\r\n\r\n              {/* Payment Method - Only VNPay */}\r\n              <div className=\"grid grid-cols-1 gap-4\">\r\n                <button\r\n                  onClick={() => setPaymentMethod('vnpay')}\r\n                  className=\"p-3 border-2 border-purple-500 bg-purple-50 rounded-lg flex flex-col items-center\"\r\n                >\r\n                  <div className=\"w-6 h-4 bg-purple-500 rounded mb-2 flex items-center justify-center\">\r\n                    <span className=\"text-white text-xs font-bold\">V</span>\r\n                  </div>\r\n                  <span className=\"text-xs font-medium text-purple-700\">VNPay</span>\r\n                </button>\r\n              </div>\r\n\r\n              <div className=\"flex space-x-4 pt-4\">\r\n                <button \r\n                  onClick={() => navigate('/')}\r\n                  className=\"flex-1 px-6 py-3 border border-gray-300 text-gray-700 rounded-lg hover:bg-gray-50\"\r\n                >\r\n                  Cancel\r\n                </button>\r\n                <button \r\n                  onClick={handleSubscribe}\r\n                  disabled={loading || !selectedPlan}\r\n                  className={`flex-1 px-6 py-3 bg-blue-600 text-white rounded-lg font-medium\r\n                    ${loading || !selectedPlan ? 'opacity-50 cursor-not-allowed' : 'hover:bg-blue-700'}`}\r\n                >\r\n                  {loading ? 'Processing...' : 'Subscribe'}\r\n                </button>\r\n              </div>\r\n\r\n              <p className=\"text-xs text-gray-500 mt-4\">\r\n                By subscribing, you agree to our terms and conditions.\r\n              </p>\r\n            </div>\r\n          </div>\r\n\r\n          {/* Right Side - Subscription Plans */}\r\n          <div className=\"bg-white rounded-lg shadow-sm p-6\">\r\n            <h3 className=\"text-xl font-bold text-gray-900 mb-6\">Choose your subscription plan</h3>\r\n            \r\n            <div className=\"space-y-4\">\r\n              {subscriptionPlans.map((plan) => (\r\n                <div \r\n                  key={plan.planID}\r\n                  className={`p-4 border rounded-lg cursor-pointer ${\r\n                    selectedPlan?.planID === plan.planID \r\n                      ? 'border-blue-500 bg-blue-50' \r\n                      : 'border-gray-200'\r\n                  }`}\r\n                  onClick={() => setSelectedPlan(plan)}\r\n                >\r\n                  <div className=\"flex items-center\">\r\n                    <div className={`w-4 h-4 rounded-full border-2 mr-3 ${\r\n                      selectedPlan?.planID === plan.planID \r\n                        ? 'border-blue-500 bg-blue-500' \r\n                        : 'border-gray-300'\r\n                    }`}>\r\n                      {selectedPlan?.planID === plan.planID && (\r\n                        <div className=\"w-2 h-2 bg-white rounded-full mx-auto mt-0.5\"></div>\r\n                      )}\r\n                    </div>\r\n                    <div>\r\n                      <h4 className=\"font-semibold text-gray-900\">{plan.planName}</h4>\r\n                      <p className=\"text-sm text-gray-600\">{plan.description}</p>\r\n                      <p className=\"text-sm font-semibold text-blue-600 mt-1\">{plan.price}đ / {plan.duration} days</p>\r\n                    </div>\r\n                  </div>\r\n                </div>\r\n              ))}\r\n            </div>\r\n\r\n            {/* Total Section */}\r\n            <div className=\"mt-8 pt-6 border-t border-gray-200\">\r\n              <div className=\"flex justify-between items-center mb-4\">\r\n                <span className=\"text-xl font-bold text-gray-900\">Total</span>\r\n                <span className=\"text-xl font-bold text-gray-900\">\r\n                  {selectedPlan ? `${selectedPlan.price}đ` : '0đ'}\r\n                </span>\r\n              </div>\r\n              \r\n              <div className=\"space-y-3 text-sm text-gray-600\">\r\n                <div className=\"flex items-start\">\r\n                  <div className=\"w-4 h-4 rounded-full bg-green-100 flex items-center justify-center mr-3 mt-0.5 flex-shrink-0\">\r\n                    <div className=\"w-2 h-2 rounded-full bg-green-500\"></div>\r\n                  </div>\r\n                  <span>Guaranteed to be safe & secure with VNPay payment gateway</span>\r\n                </div>\r\n                \r\n                <div className=\"flex items-start\">\r\n                  <div className=\"w-4 h-4 rounded-full bg-blue-100 flex items-center justify-center mr-3 mt-0.5 flex-shrink-0\">\r\n                    <div className=\"w-2 h-2 rounded-full bg-blue-500\"></div>\r\n                  </div>\r\n                  <span>Personalise your shop with your own info</span>\r\n                </div>\r\n                \r\n                <div className=\"flex items-start\">\r\n                  <div className=\"w-4 h-4 rounded-full bg-orange-100 flex items-center justify-center mr-3 mt-0.5 flex-shrink-0\">\r\n                    <div className=\"w-2 h-2 rounded-full bg-orange-500\"></div>\r\n                  </div>\r\n                  <span>Provide quality support in order & shipping management</span>\r\n                </div>\r\n                \r\n                <div className=\"flex items-start\">\r\n                  <div className=\"w-4 h-4 rounded-full bg-purple-100 flex items-center justify-center mr-3 mt-0.5 flex-shrink-0\">\r\n                    <div className=\"w-2 h-2 rounded-full bg-purple-500\"></div>\r\n                  </div>\r\n                  <span>This plan has trial period for 7 days</span>\r\n                </div>\r\n              </div>\r\n            </div>\r\n          </div>\r\n        </div>\r\n      </main>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default Subscription;","C:\\Users\\ADMIN\\OneDrive - FPT Corporation\\Documents\\GitHub\\Thriftorium\\src\\pages\\Cart\\Cart.jsx",["514","515","516"],[],"// src/pages/Cart/Cart.js\r\nimport React, { useEffect, useState } from \"react\";\r\nimport { useDispatch, useSelector } from \"react-redux\";\r\nimport { Link, useNavigate } from \"react-router-dom\";\r\nimport { motion } from \"framer-motion\";\r\nimport Breadcrumbs from \"../../components/pageProps/Breadcrumbs\";\r\nimport { resetCart } from \"../../redux/orebiSlice\";\r\nimport { emptyCart } from \"../../assets/images\";\r\nimport ItemCard from \"./ItemCard\";\r\nimport CartService from \"../../service/CartService\";\r\nimport { useAuth } from \"../../context/AuthContext\";\r\nimport { toast } from \"react-toastify\";\r\nimport UserVoucherService from \"../../service/UserVoucherService\";\r\n\r\nconst Cart = () => {\r\n  const dispatch = useDispatch();\r\n  const products = useSelector((state) => state.orebiReducer.products);\r\n  const { user } = useAuth();\r\n  const isLoggedIn = !!localStorage.getItem(\"token\");\r\n  const navigate = useNavigate();\r\n\r\n  const [cartItems, setCartItems] = useState([]);\r\n  const [loading, setLoading] = useState(true);\r\n  const [totalAmt, setTotalAmt] = useState(0);\r\n  const [shippingCharge, setShippingCharge] = useState(0);\r\n  const [discount, setDiscount] = useState(0);\r\n  const [couponCode, setCouponCode] = useState(\"\");\r\n  const [availableVouchers, setAvailableVouchers] = useState([]);\r\n  const [selectedVoucher, setSelectedVoucher] = useState(null);\r\n  const [loadingVouchers, setLoadingVouchers] = useState(false);\r\n\r\n  // Fetch cart data from API\r\n  useEffect(() => {\r\n    const fetchCartData = async () => {\r\n      if (isLoggedIn && user?.userID) {\r\n        try {\r\n          const data = await CartService.getCartByAccountId(user.userID);\r\n          setCartItems(data.cartItem || []);\r\n        } catch (error) {\r\n          console.error(\"Error fetching cart data:\", error);\r\n          setCartItems([]);\r\n        }\r\n      }\r\n      setLoading(false);\r\n    };\r\n\r\n    fetchCartData();\r\n  }, [isLoggedIn, user?.userID]);\r\n\r\n  // Fetch available vouchers\r\n  useEffect(() => {\r\n    const fetchAvailableVouchers = async () => {\r\n      if (!isLoggedIn || !user?.userID) return;\r\n\r\n      try {\r\n        setLoadingVouchers(true);\r\n        const vouchers = await UserVoucherService.getUnusedVouchersByAccountId(\r\n          user.userID\r\n        );\r\n        setAvailableVouchers(vouchers);\r\n    } catch (error) {\r\n        console.error(\"Error fetching vouchers:\", error);\r\n        toast.error(\"Không thể tải danh sách voucher\");\r\n      } finally {\r\n        setLoadingVouchers(false);\r\n      }\r\n    };\r\n\r\n    fetchAvailableVouchers();\r\n  }, [isLoggedIn, user?.userID]);\r\n\r\n  // Tính subtotal - sử dụng cartItems từ API thay vì Redux products\r\n  useEffect(() => {\r\n    let sum = 0;\r\n    cartItems.forEach((item) => {\r\n      sum += (item.product?.purchasePrice || 0) * item.quantity;\r\n    });\r\n    setTotalAmt(sum);\r\n  }, [cartItems]);\r\n\r\n  // Tính phí vận chuyển (đơn vị nghìn đồng)\r\n  useEffect(() => {\r\n    if (totalAmt <= 200000) {\r\n      setShippingCharge(30000);\r\n    } else if (totalAmt <= 400000) {\r\n      setShippingCharge(25000);\r\n    } else if (totalAmt <= 800000) {\r\n      setShippingCharge(20000);\r\n    } else {\r\n      setShippingCharge(0); // Miễn phí vận chuyển cho đơn hàng > 800k\r\n    }\r\n  }, [totalAmt]);\r\n\r\n  // Handle update cart quantity\r\n  const handleUpdateQuantity = async (productId, newQuantity) => {\r\n    if (newQuantity <= 0) return;\r\n    \r\n    try {\r\n      await CartService.updateCart(user.userID, productId, newQuantity);\r\n      \r\n      // Refresh from API to ensure data consistency\r\n      await refreshCartData();\r\n      \r\n    } catch (error) {\r\n      console.error(\"Error updating cart:\", error);\r\n      toast.error(\"Có lỗi xảy ra khi cập nhật giỏ hàng\");\r\n    }\r\n  };\r\n\r\n  // Handle remove item from cart\r\n  const handleRemoveItem = async (productId) => {\r\n    try {\r\n      await CartService.deleteCart(user.userID, productId);\r\n      \r\n      // Refresh from API to ensure data consistency\r\n      await refreshCartData();\r\n      \r\n      toast.success(\"Đã xóa sản phẩm khỏi giỏ hàng\");\r\n    } catch (error) {\r\n      console.error(\"Error removing item:\", error);\r\n      toast.error(\"Có lỗi xảy ra khi xóa sản phẩm\");\r\n    }\r\n  };\r\n\r\n  // Handle clear cart\r\n  const handleClearCart = async () => {\r\n    if (!window.confirm(\"Bạn có chắc chắn muốn xóa toàn bộ giỏ hàng?\")) return;\r\n    \r\n    try {\r\n      await CartService.deleteUserCart(user.userID);\r\n      setCartItems([]);\r\n      toast.success(\"Đã xóa toàn bộ giỏ hàng\");\r\n    } catch (error) {\r\n      console.error(\"Error clearing cart:\", error);\r\n      toast.error(\"Có lỗi xảy ra khi xóa giỏ hàng\");\r\n    }\r\n  };\r\n\r\n  // Refresh cart data from API\r\n  const refreshCartData = async () => {\r\n    try {\r\n      const data = await CartService.getCartByAccountId(user.userID);\r\n      setCartItems(data.cartItem || []);\r\n    } catch (error) {\r\n      console.error(\"Error refreshing cart data:\", error);\r\n    }\r\n  };\r\n\r\n  // Handle apply voucher\r\n  const handleApplyVoucher = async () => {\r\n    if (!couponCode) {\r\n      toast.warning(\"Vui lòng nhập mã voucher\");\r\n      return;\r\n    }\r\n\r\n    const voucher = availableVouchers.find((v) => v.voucherCode === couponCode);\r\n    if (!voucher) {\r\n      toast.error(\"Mã voucher không hợp lệ hoặc đã được sử dụng\");\r\n      setDiscount(0);\r\n      setSelectedVoucher(null);\r\n      return;\r\n    }\r\n\r\n    // Check if voucher is expired\r\n    const now = new Date();\r\n    const expireDate = new Date(voucher.expiredAt);\r\n    if (now > expireDate) {\r\n      toast.error(\"Voucher đã hết hạn\");\r\n      return;\r\n    }\r\n\r\n    // Check minimum order amount if applicable\r\n    if (\r\n      voucher.voucherTemplate?.milestoneAmount &&\r\n      totalAmt < voucher.voucherTemplate.milestoneAmount\r\n    ) {\r\n      toast.error(\r\n        `Đơn hàng tối thiểu ${voucher.voucherTemplate.milestoneAmount.toLocaleString()} VND để sử dụng voucher này`\r\n      );\r\n      return;\r\n    }\r\n\r\n    // Apply discount\r\n    const discountAmount = voucher.voucherTemplate?.discountPercentage\r\n      ? (totalAmt * voucher.voucherTemplate.discountPercentage) / 100\r\n      : 0;\r\n\r\n    setDiscount(discountAmount);\r\n    setSelectedVoucher(voucher);\r\n    toast.success(\"Áp dụng voucher thành công\");\r\n  };\r\n\r\n  // Tổng cuối = subtotal + shipping - discount\r\n  const finalTotal = Math.max(0, totalAmt + shippingCharge - discount);\r\n\r\n  if (loading) {\r\n    return (\r\n      <div className=\"max-w-container mx-auto px-4 py-20 text-center\">\r\n        Đang tải giỏ hàng...\r\n      </div>\r\n    );\r\n  }\r\n\r\n  return (\r\n    <div className=\"max-w-container mx-auto px-4\">\r\n      <Breadcrumbs title=\"Cart\" />\r\n\r\n      {!isLoggedIn ? (\r\n        // Not logged in state\r\n        <motion.div\r\n          initial={{ y: 30, opacity: 0 }}\r\n          animate={{ y: 0, opacity: 1 }}\r\n          transition={{ duration: 0.4 }}\r\n          className=\"flex flex-col mdl:flex-row justify-center items-center gap-4 pb-20\"\r\n        >\r\n          <div className=\"max-w-[500px] p-4 py-8 bg-white flex gap-4 flex-col items-center rounded-md shadow-lg\">\r\n            <h1 className=\"font-titleFont text-xl font-bold uppercase\">\r\n              Vui lòng đăng nhập\r\n            </h1>\r\n            <p className=\"text-sm text-center px-10 -mt-2\">\r\n              Bạn cần đăng nhập để xem giỏ hàng của mình.\r\n            </p>\r\n            <Link to=\"/signin\">\r\n              <button className=\"bg-primeColor rounded-md cursor-pointer hover:bg-black active:bg-gray-900 px-8 py-2 font-titleFont font-semibold text-lg text-gray-200 hover:text-white duration-300\">\r\n                Đăng nhập\r\n              </button>\r\n            </Link>\r\n          </div>\r\n        </motion.div>\r\n      ) : cartItems.length > 0 ? (\r\n        <div className=\"pb-20\">\r\n          {/* Header bảng */}\r\n          <div className=\"w-full h-20 bg-[#F5F7F7] text-primeColor hidden lgl:grid grid-cols-5 place-content-center px-6 text-lg font-titleFont font-semibold\">\r\n            <h2 className=\"col-span-2\">Product</h2>\r\n            <h2>Giá</h2>\r\n            <h2>Số lượng</h2>\r\n            <h2>Thành tiền</h2>\r\n          </div>\r\n\r\n          {/* Danh sách sản phẩm */}\r\n          <div className=\"mt-5\">\r\n            {cartItems.map((item) => (\r\n              <ItemCard\r\n                key={item.cartID}\r\n                item={item}\r\n                onUpdateQuantity={handleUpdateQuantity}\r\n                onRemoveItem={handleRemoveItem}\r\n              />\r\n            ))}\r\n          </div>\r\n\r\n          {/* Nút Reset */}\r\n          <button\r\n            onClick={handleClearCart}\r\n            className=\"py-2 px-10 bg-red-500 text-white font-semibold uppercase mb-4 hover:bg-red-700 duration-300\"\r\n          >\r\n            Xóa toàn bộ giỏ hàng\r\n          </button>\r\n\r\n          {/* Coupon */}\r\n          <div className=\"flex flex-col mdl:flex-row justify-between border py-4 px-4 items-center gap-2 mdl:gap-0\">\r\n            <div className=\"flex items-center gap-4\">\r\n              <input\r\n                value={couponCode}\r\n                onChange={(e) => setCouponCode(e.target.value)}\r\n                className=\"w-44 mdl:w-52 h-8 px-4 border text-primeColor text-sm outline-none border-gray-400\"\r\n                type=\"text\"\r\n                placeholder=\"Nhập mã voucher\"\r\n              />\r\n              <button\r\n                onClick={handleApplyVoucher}\r\n                disabled={loadingVouchers}\r\n                className=\"text-sm mdl:text-base font-semibold text-primeColor hover:underline\"\r\n              >\r\n                {loadingVouchers ? \"Đang tải...\" : \"Áp dụng\"}\r\n              </button>\r\n            </div>\r\n            {availableVouchers.length > 0 && (\r\n              <select\r\n                value={couponCode}\r\n                onChange={(e) => setCouponCode(e.target.value)}\r\n                className=\"w-full mdl:w-auto px-4 py-2 border border-gray-400 rounded\"\r\n              >\r\n                <option value=\"\">Chọn voucher có sẵn</option>\r\n                {availableVouchers.map((voucher) => (\r\n                  <option key={voucher.voucherCode} value={voucher.voucherCode}>\r\n                    {voucher.voucherTemplate?.name} - Giảm{\" \"}\r\n                    {voucher.voucherTemplate?.discountPercentage}%\r\n                  </option>\r\n                ))}\r\n              </select>\r\n            )}\r\n            <p className=\"text-lg font-semibold cursor-pointer\">Cập nhật giỏ</p>\r\n          </div>\r\n\r\n          {/* Cart totals */}\r\n          <div className=\"max-w-7xl gap-4 flex justify-end mt-4\">\r\n            <div className=\"w-96 flex flex-col gap-4\">\r\n              <h1 className=\"text-2xl font-semibold text-right\">Cart totals</h1>\r\n              <div>\r\n                <p className=\"flex items-center justify-between border-[1px] border-gray-400 border-b-0 py-1.5 text-lg px-4 font-medium\">\r\n                  Subtotal\r\n                  <span className=\"font-semibold\">{totalAmt.toLocaleString()} VND</span>\r\n                </p>\r\n                <p className=\"flex items-center justify-between border-[1px] border-gray-400 border-b-0 py-1.5 text-lg px-4 font-medium\">\r\n                  Giảm giá\r\n                  <span className=\"font-semibold\">\r\n                    {discount > 0 ? `-${discount.toLocaleString()} VND` : \"0 VND\"}\r\n                    {selectedVoucher && (\r\n                      <span className=\"text-sm text-gray-500 ml-2\">\r\n                        ({selectedVoucher.voucherTemplate?.discountPercentage}%)\r\n                      </span>\r\n                    )}\r\n                  </span>\r\n                </p>\r\n                <p className=\"flex items-center justify-between border-[1px] border-gray-400 border-b-0 py-1.5 text-lg px-4 font-medium\">\r\n                  Tổng cộng\r\n                  <span className=\"font-semibold\">{(totalAmt - discount).toLocaleString()} VND</span>\r\n                </p>\r\n                <p className=\"flex items-center justify-between border-[1px] border-gray-400 border-b-0 py-1.5 text-lg px-4 font-medium\">\r\n                  Phí vận chuyển\r\n                  <span className=\"font-semibold\">\r\n                    {shippingCharge === 0 ? (\r\n                      <span className=\"text-green-600\">Miễn phí</span>\r\n                    ) : (\r\n                      `${shippingCharge.toLocaleString()} VND`\r\n                    )}\r\n                  </span>\r\n                </p>\r\n                <p className=\"text-xs text-gray-500 px-4 -mt-1 mb-1\">\r\n                  (Trong TP.HCM: 30,000 VND - Ngoài TP.HCM: 50,000 VND)\r\n                </p>\r\n                <p className=\"flex items-center justify-between border-[1px] border-gray-400 py-1.5 text-lg px-4 font-bold\">\r\n                  Tổng thanh toán\r\n                  <span className=\"font-bold\">{finalTotal.toLocaleString()} VND</span>\r\n                </p>\r\n              </div>\r\n              <div className=\"flex flex-col gap-2 items-center\"> \r\n                {/* Nút Tiến hành thanh toán */}\r\n                <button \r\n                  onClick={() => {\r\n                    if (cartItems.length === 0) {\r\n                      toast.error(\"Giỏ hàng của bạn đang trống\");\r\n                      return;\r\n                    }\r\n                    navigate(\"/payment\", {\r\n                      state: {\r\n                        cartData: {\r\n                          cartItems,\r\n                          totalAmount: totalAmt,\r\n                          shippingCharge,\r\n                          discount,\r\n                          finalTotal,\r\n                          selectedVoucher\r\n                        }\r\n                      }\r\n                    });\r\n                  }}\r\n                  className=\"w-full h-10 bg-primeColor text-white hover:bg-black duration-300\"\r\n                >\r\n                    Tiến hành thanh toán\r\n                  </button>\r\n                {/* --- Thêm nút Tiếp tục mua sắm bên dưới --- */}\r\n                <Link to=\"/shop\" className=\"w-full\">\r\n                  <button className=\"w-full h-10 bg-gray-800 text-white hover:bg-gray-600 duration-300\">\r\n                    Tiếp tục mua sắm\r\n                  </button>\r\n                </Link>\r\n              </div>\r\n            </div>\r\n          </div>\r\n        </div>\r\n      ) : (\r\n        // Khi giỏ rỗng\r\n        <motion.div\r\n          initial={{ y: 30, opacity: 0 }}\r\n          animate={{ y: 0, opacity: 1 }}\r\n          transition={{ duration: 0.4 }}\r\n          className=\"flex flex-col mdl:flex-row justify-center items-center gap-4 pb-20\"\r\n        >\r\n          <div>\r\n            <img\r\n              className=\"w-80 rounded-lg p-4 mx-auto\"\r\n              src={emptyCart}\r\n              alt=\"emptyCart\"\r\n            />\r\n          </div>\r\n          <div className=\"max-w-[500px] p-4 py-8 bg-white flex gap-4 flex-col items-center rounded-md shadow-lg\">\r\n            <h1 className=\"font-titleFont text-xl font-bold uppercase\">\r\n              Giỏ hàng của bạn đang trống\r\n            </h1>\r\n            <p className=\"text-sm text-center px-10 -mt-2\">\r\n              Giỏ hàng của bạn còn trống. Hãy thêm sách, đồ điện tử, v.v… để làm\r\n              đầy và mang lại niềm vui cho giỏ hàng.\r\n            </p>\r\n            <Link to=\"/shop\">\r\n              <button className=\"bg-primeColor rounded-md cursor-pointer hover:bg-black active:bg-gray-900 px-8 py-2 font-titleFont font-semibold text-lg text-gray-200 hover:text-white duration-300\">\r\n                Tiếp tục mua sắm\r\n              </button>\r\n            </Link>\r\n          </div>\r\n        </motion.div>\r\n      )}\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default Cart;\r\n","C:\\Users\\ADMIN\\OneDrive - FPT Corporation\\Documents\\GitHub\\Thriftorium\\src\\pages\\payment\\Payment.jsx",[],[],"C:\\Users\\ADMIN\\OneDrive - FPT Corporation\\Documents\\GitHub\\Thriftorium\\src\\pages\\Admin\\category\\CategoryManager.jsx",[],[],"C:\\Users\\ADMIN\\OneDrive - FPT Corporation\\Documents\\GitHub\\Thriftorium\\src\\pages\\Admin\\blog\\BlogManager.jsx",["517","518"],[],"import React, { useState, useEffect } from \"react\";\r\nimport { FaPlus, FaEdit, FaTrash, FaSearch, FaEye, FaImage } from \"react-icons/fa\";\r\nimport BlogService from \"../../../service/BlogService\";\r\nimport BlogModal from \"./components/BlogModal\";\r\nimport { toast } from \"react-toastify\";\r\nimport { useAuth } from \"../../../context/AuthContext\";\r\n\r\nconst BlogManager = () => {\r\n  const { user } = useAuth();\r\n  const [blogs, setBlogs] = useState([]);\r\n  const [loading, setLoading] = useState(true);\r\n  const [searchTerm, setSearchTerm] = useState(\"\");\r\n  const [currentPage, setCurrentPage] = useState(1);\r\n  const [pageSize] = useState(10);\r\n  const [totalPages, setTotalPages] = useState(0);\r\n  const [isModalOpen, setIsModalOpen] = useState(false);\r\n  const [editingBlog, setEditingBlog] = useState(null);\r\n  const [modalMode, setModalMode] = useState(\"create\"); // create, edit, view\r\n\r\n  useEffect(() => {\r\n    fetchBlogs();\r\n  }, [currentPage, searchTerm]);\r\n\r\n  const fetchBlogs = async () => {\r\n    setLoading(true);\r\n    try {\r\n      let data;\r\n      \r\n      if (searchTerm && searchTerm.trim()) {\r\n        // Có search term -> dùng getBlogSearch\r\n        data = await BlogService.getBlogSearch(\r\n          searchTerm.trim(),\r\n          currentPage,\r\n          pageSize\r\n        );\r\n        setBlogs(data?.items || []);\r\n        setTotalPages(Math.ceil((data?.totalCount || 0) / pageSize));\r\n      } else {\r\n        // Không có search term -> dùng getAllBlogs\r\n        data = await BlogService.getAllBlogs();\r\n        setBlogs(data || []);\r\n        \r\n        // Tính pagination manually cho getAllBlogs\r\n        const totalItems = data?.length || 0;\r\n        const totalPagesCalculated = Math.ceil(totalItems / pageSize);\r\n        setTotalPages(totalPagesCalculated);\r\n        \r\n        // Apply pagination manually\r\n        const startIndex = (currentPage - 1) * pageSize;\r\n        const endIndex = startIndex + pageSize;\r\n        const paginatedBlogs = (data || []).slice(startIndex, endIndex);\r\n        setBlogs(paginatedBlogs);\r\n      }\r\n    } catch (error) {\r\n      console.error(\"Error fetching blogs:\", error);\r\n      toast.error(\"Có lỗi xảy ra khi tải danh sách blog\");\r\n      setBlogs([]);\r\n      setTotalPages(0);\r\n    }\r\n    setLoading(false);\r\n  };\r\n\r\n  const handleSearch = (e) => {\r\n    setSearchTerm(e.target.value);\r\n    setCurrentPage(1); // Reset to first page when searching\r\n  };\r\n\r\n  const handlePageChange = (page) => {\r\n    setCurrentPage(page);\r\n  };\r\n\r\n  const handleCreateBlog = () => {\r\n    setEditingBlog(null);\r\n    setModalMode(\"create\");\r\n    setIsModalOpen(true);\r\n  };\r\n\r\n  const handleEditBlog = (blog) => {\r\n    setEditingBlog(blog);\r\n    setModalMode(\"edit\");\r\n    setIsModalOpen(true);\r\n  };\r\n\r\n  const handleViewBlog = (blog) => {\r\n    setEditingBlog(blog);\r\n    setModalMode(\"view\");\r\n    setIsModalOpen(true);\r\n  };\r\n\r\n  const handleDeleteBlog = async (blogID) => {\r\n    if (!window.confirm(\"Bạn có chắc chắn muốn xóa blog này?\")) return;\r\n\r\n    try {\r\n      await BlogService.deleteBlog(blogID);\r\n      toast.success(\"Xóa blog thành công!\");\r\n      fetchBlogs(); // Refresh list\r\n    } catch (error) {\r\n      console.error(\"Error deleting blog:\", error);\r\n      if (error.response?.status === 401) {\r\n        toast.error(\"Bạn không có quyền xóa blog này!\");\r\n      } else {\r\n        toast.error(\"Có lỗi xảy ra khi xóa blog\");\r\n      }\r\n    }\r\n  };\r\n\r\n  const handleModalClose = () => {\r\n    setIsModalOpen(false);\r\n    setEditingBlog(null);\r\n    setModalMode(\"create\");\r\n  };\r\n\r\n  const handleModalSave = () => {\r\n    fetchBlogs(); // Refresh list after save\r\n    handleModalClose();\r\n  };\r\n\r\n  const formatDate = (dateString) => {\r\n    if (!dateString) return \"N/A\";\r\n    return new Date(dateString).toLocaleDateString(\"vi-VN\");\r\n  };\r\n\r\n  const truncateText = (text, maxLength = 100) => {\r\n    if (!text) return \"N/A\";\r\n    return text.length > maxLength ? text.substring(0, maxLength) + \"...\" : text;\r\n  };\r\n\r\n  return (\r\n    <div className=\"bg-white min-h-screen\">\r\n      <div className=\"max-w-7xl mx-auto px-4 py-8\">\r\n        {/* Header */}\r\n        <div className=\"mb-8\">\r\n          <h1 className=\"text-3xl font-bold text-gray-900 mb-2\">\r\n            Quản lý Blog\r\n          </h1>\r\n          <p className=\"text-gray-600\">\r\n            Quản lý danh sách blog và bài viết\r\n          </p>\r\n        </div>\r\n\r\n        {/* Actions Bar */}\r\n        <div className=\"mb-6 flex flex-col sm:flex-row justify-between items-start sm:items-center gap-4\">\r\n          {/* Search */}\r\n          <div className=\"relative flex-1 max-w-md\">\r\n            <FaSearch className=\"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400\" />\r\n            <input\r\n              type=\"text\"\r\n              value={searchTerm}\r\n              onChange={handleSearch}\r\n              placeholder=\"Tìm kiếm blog...\"\r\n              className=\"w-full pl-10 pr-4 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500\"\r\n            />\r\n          </div>\r\n\r\n          {/* Create Button */}\r\n          <button\r\n            onClick={handleCreateBlog}\r\n            className=\"bg-blue-600 text-white px-4 py-2 rounded-lg hover:bg-blue-700 transition flex items-center gap-2\"\r\n          >\r\n            <FaPlus />\r\n            Tạo blog mới\r\n          </button>\r\n        </div>\r\n\r\n        {/* Table */}\r\n        <div className=\"bg-white rounded-lg shadow overflow-hidden\">\r\n          {loading ? (\r\n            <div className=\"p-8 text-center\">\r\n              <div className=\"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600 mx-auto\"></div>\r\n              <p className=\"mt-2 text-gray-600\">Đang tải...</p>\r\n            </div>\r\n          ) : (\r\n            <>\r\n              <div className=\"overflow-x-auto\">\r\n                <table className=\"w-full divide-y divide-gray-200\">\r\n                  <thead className=\"bg-gray-50\">\r\n                    <tr>\r\n                      <th className=\"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider\">\r\n                        ID\r\n                      </th>\r\n                      <th className=\"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider\">\r\n                        Tiêu đề\r\n                      </th>\r\n                      <th className=\"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider\">\r\n                        Nội dung\r\n                      </th>\r\n                      <th className=\"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider\">\r\n                        Tác giả\r\n                      </th>\r\n                      <th className=\"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider\">\r\n                        Hình ảnh\r\n                      </th>\r\n                      <th className=\"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider\">\r\n                        Ngày tạo\r\n                      </th>\r\n                      <th className=\"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider\">\r\n                        Trạng thái\r\n                      </th>\r\n                      <th className=\"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider\">\r\n                        Thao tác\r\n                      </th>\r\n                    </tr>\r\n                  </thead>\r\n                  <tbody className=\"bg-white divide-y divide-gray-200\">\r\n                    {blogs.length > 0 ? (\r\n                      blogs.map((blog) => (\r\n                        <tr key={blog.blogID} className=\"hover:bg-gray-50\">\r\n                          <td className=\"px-6 py-4 whitespace-nowrap text-sm text-gray-900\">\r\n                            {blog.blogID}\r\n                          </td>\r\n                          <td className=\"px-6 py-4 text-sm text-gray-900\">\r\n                            <div className=\"max-w-xs\">\r\n                              {truncateText(blog.title, 50)}\r\n                            </div>\r\n                          </td>\r\n                          <td className=\"px-6 py-4 text-sm text-gray-900\">\r\n                            <div className=\"max-w-sm\">\r\n                              {truncateText(blog.content, 80)}\r\n                            </div>\r\n                          </td>\r\n                          <td className=\"px-6 py-4 whitespace-nowrap text-sm text-gray-900\">\r\n                            {blog.author || \"N/A\"}\r\n                          </td>\r\n                          <td className=\"px-6 py-4 whitespace-nowrap text-sm text-gray-900\">\r\n                            <div className=\"flex items-center\">\r\n                              <FaImage className=\"text-gray-400 mr-1\" />\r\n                              <span className=\"text-xs\">\r\n                                {blog.imageBlogs?.length || 0} ảnh\r\n                              </span>\r\n                            </div>\r\n                          </td>\r\n                          <td className=\"px-6 py-4 whitespace-nowrap text-sm text-gray-900\">\r\n                            {formatDate(blog.createAt)}\r\n                          </td>\r\n                          <td className=\"px-6 py-4 whitespace-nowrap\">\r\n                            <span\r\n                              className={`inline-flex px-2 py-1 text-xs font-semibold rounded-full ${\r\n                                blog.status\r\n                                  ? \"bg-green-100 text-green-800\"\r\n                                  : \"bg-red-100 text-red-800\"\r\n                              }`}\r\n                            >\r\n                              {blog.status ? \"Hoạt động\" : \"Không hoạt động\"}\r\n                            </span>\r\n                          </td>\r\n                          <td className=\"px-6 py-4 whitespace-nowrap text-sm font-medium\">\r\n                            <div className=\"flex space-x-2\">\r\n                              <button\r\n                                onClick={() => handleViewBlog(blog)}\r\n                                className=\"text-blue-600 hover:text-blue-900 p-1 rounded transition\"\r\n                                title=\"Xem chi tiết\"\r\n                              >\r\n                                <FaEye />\r\n                              </button>\r\n                              <button\r\n                                onClick={() => handleEditBlog(blog)}\r\n                                className=\"text-yellow-600 hover:text-yellow-900 p-1 rounded transition\"\r\n                                title=\"Chỉnh sửa\"\r\n                              >\r\n                                <FaEdit />\r\n                              </button>\r\n                              <button\r\n                                onClick={() => handleDeleteBlog(blog.blogID)}\r\n                                className=\"text-red-600 hover:text-red-900 p-1 rounded transition\"\r\n                                title=\"Xóa\"\r\n                              >\r\n                                <FaTrash />\r\n                              </button>\r\n                            </div>\r\n                          </td>\r\n                        </tr>\r\n                      ))\r\n                    ) : (\r\n                      <tr>\r\n                        <td\r\n                          colSpan=\"8\"\r\n                          className=\"px-6 py-8 text-center text-gray-500\"\r\n                        >\r\n                          <div className=\"flex flex-col items-center\">\r\n                            <div className=\"text-4xl mb-2\">📝</div>\r\n                            <div>Không có blog nào</div>\r\n                            <div className=\"text-sm mt-1\">\r\n                              {searchTerm\r\n                                ? \"Thử tìm kiếm với từ khóa khác\"\r\n                                : \"Hãy tạo blog đầu tiên của bạn\"}\r\n                            </div>\r\n                          </div>\r\n                        </td>\r\n                      </tr>\r\n                    )}\r\n                  </tbody>\r\n                </table>\r\n              </div>\r\n\r\n              {/* Pagination */}\r\n              {totalPages > 1 && (\r\n                <div className=\"bg-white px-6 py-3 border-t border-gray-200 flex items-center justify-between\">\r\n                  <div className=\"text-sm text-gray-700\">\r\n                    Trang {currentPage} của {totalPages}\r\n                  </div>\r\n                  <div className=\"flex space-x-1\">\r\n                    <button\r\n                      onClick={() => handlePageChange(currentPage - 1)}\r\n                      disabled={currentPage === 1}\r\n                      className=\"px-3 py-1 text-sm border border-gray-300 rounded hover:bg-gray-50 disabled:opacity-50 disabled:cursor-not-allowed\"\r\n                    >\r\n                      Trước\r\n                    </button>\r\n                    {Array.from({ length: totalPages }, (_, i) => i + 1)\r\n                      .slice(\r\n                        Math.max(0, currentPage - 3),\r\n                        Math.min(totalPages, currentPage + 2)\r\n                      )\r\n                      .map((page) => (\r\n                        <button\r\n                          key={page}\r\n                          onClick={() => handlePageChange(page)}\r\n                          className={`px-3 py-1 text-sm border rounded ${\r\n                            currentPage === page\r\n                              ? \"bg-blue-600 text-white border-blue-600\"\r\n                              : \"border-gray-300 hover:bg-gray-50\"\r\n                          }`}\r\n                        >\r\n                          {page}\r\n                        </button>\r\n                      ))}\r\n                    <button\r\n                      onClick={() => handlePageChange(currentPage + 1)}\r\n                      disabled={currentPage === totalPages}\r\n                      className=\"px-3 py-1 text-sm border border-gray-300 rounded hover:bg-gray-50 disabled:opacity-50 disabled:cursor-not-allowed\"\r\n                    >\r\n                      Sau\r\n                    </button>\r\n                  </div>\r\n                </div>\r\n              )}\r\n            </>\r\n          )}\r\n        </div>\r\n      </div>\r\n\r\n      {/* Blog Modal */}\r\n      {isModalOpen && (\r\n        <BlogModal\r\n          mode={modalMode}\r\n          blog={editingBlog}\r\n          onClose={handleModalClose}\r\n          onSave={handleModalSave}\r\n        />\r\n      )}\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default BlogManager; ","C:\\Users\\ADMIN\\OneDrive - FPT Corporation\\Documents\\GitHub\\Thriftorium\\src\\pages\\Admin\\user\\UserManager.jsx",["519"],[],"import React, { useState, useEffect } from \"react\";\r\nimport { \r\n  FaSearch, \r\n  FaEdit, \r\n  FaEye, \r\n  FaUserCheck, \r\n  FaUserTimes, \r\n  FaFilter,\r\n  FaUserPlus \r\n} from \"react-icons/fa\";\r\nimport AccountService from \"../../../service/AccountService\";\r\nimport UserModal from \"./components/UserModal\";\r\nimport { toast } from \"react-toastify\";\r\n\r\nconst UserManager = () => {\r\n  // State management\r\n  const [users, setUsers] = useState([]);\r\n  const [filteredUsers, setFilteredUsers] = useState([]);\r\n  const [loading, setLoading] = useState(true);\r\n  const [searchTerm, setSearchTerm] = useState(\"\");\r\n  const [statusFilter, setStatusFilter] = useState(\"all\");\r\n  const [roleFilter, setRoleFilter] = useState(\"all\");\r\n  const [sortField, setSortField] = useState(\"userID\");\r\n  const [sortDirection, setSortDirection] = useState(\"asc\");\r\n  \r\n  // Modal states\r\n  const [modalOpen, setModalOpen] = useState(false);\r\n  const [modalMode, setModalMode] = useState(\"view\"); // \"view\", \"edit\", \"create\"\r\n  const [selectedUser, setSelectedUser] = useState(null);\r\n  \r\n  // Pagination\r\n  const [currentPage, setCurrentPage] = useState(1);\r\n  const [itemsPerPage] = useState(10);\r\n\r\n  useEffect(() => {\r\n    fetchUsers();\r\n  }, []);\r\n\r\n  useEffect(() => {\r\n    filterAndSortUsers();\r\n  }, [users, searchTerm, statusFilter, roleFilter, sortField, sortDirection]);\r\n\r\n  const fetchUsers = async () => {\r\n    setLoading(true);\r\n    try {\r\n      const data = await AccountService.getAllAccount();\r\n      setUsers(data || []);\r\n    } catch (error) {\r\n      console.error(\"Error fetching users:\", error);\r\n      toast.error(\"Có lỗi xảy ra khi tải danh sách người dùng\");\r\n      setUsers([]);\r\n    }\r\n    setLoading(false);\r\n  };\r\n\r\n  const filterAndSortUsers = () => {\r\n    let filtered = [...users];\r\n\r\n    // Apply search filter\r\n    if (searchTerm.trim()) {\r\n      filtered = filtered.filter(user =>\r\n        user.name?.toLowerCase().includes(searchTerm.toLowerCase()) ||\r\n        user.email?.toLowerCase().includes(searchTerm.toLowerCase()) ||\r\n        user.phone?.includes(searchTerm) ||\r\n        user.userID?.toString().includes(searchTerm)\r\n      );\r\n    }\r\n\r\n    // Apply status filter\r\n    if (statusFilter !== \"all\") {\r\n      const isActive = statusFilter === \"active\";\r\n      filtered = filtered.filter(user => user.status === isActive);\r\n    }\r\n\r\n    // Apply role filter\r\n    if (roleFilter !== \"all\") {\r\n      filtered = filtered.filter(user => user.role === roleFilter);\r\n    }\r\n\r\n    // Apply sorting\r\n    filtered.sort((a, b) => {\r\n      let aValue = a[sortField];\r\n      let bValue = b[sortField];\r\n\r\n      // Handle different data types\r\n      if (typeof aValue === \"string\") {\r\n        aValue = aValue?.toLowerCase() || \"\";\r\n        bValue = bValue?.toLowerCase() || \"\";\r\n      }\r\n\r\n      if (sortDirection === \"asc\") {\r\n        return aValue > bValue ? 1 : aValue < bValue ? -1 : 0;\r\n      } else {\r\n        return aValue < bValue ? 1 : aValue > bValue ? -1 : 0;\r\n      }\r\n    });\r\n\r\n    setFilteredUsers(filtered);\r\n    setCurrentPage(1); // Reset to first page when filtering\r\n  };\r\n\r\n  const handleSort = (field) => {\r\n    if (sortField === field) {\r\n      setSortDirection(sortDirection === \"asc\" ? \"desc\" : \"asc\");\r\n    } else {\r\n      setSortField(field);\r\n      setSortDirection(\"asc\");\r\n    }\r\n  };\r\n\r\n  const handleStatusUpdate = async (userEmail, newStatus) => {\r\n    if (!window.confirm(`Bạn có chắc chắn muốn ${newStatus ? \"kích hoạt\" : \"vô hiệu hóa\"} tài khoản này?`)) {\r\n      return;\r\n    }\r\n\r\n    try {\r\n      await AccountService.updateAccountStatus(userEmail, { status: newStatus });\r\n      toast.success(`${newStatus ? \"Kích hoạt\" : \"Vô hiệu hóa\"} tài khoản thành công!`);\r\n      \r\n      // Refresh users list\r\n      await fetchUsers();\r\n    } catch (error) {\r\n      console.error(\"Error updating user status:\", error);\r\n      toast.error(\"Có lỗi xảy ra khi cập nhật trạng thái tài khoản\");\r\n    }\r\n  };\r\n\r\n  const openModal = (mode, user = null) => {\r\n    setModalMode(mode);\r\n    setSelectedUser(user);\r\n    setModalOpen(true);\r\n  };\r\n\r\n  const closeModal = () => {\r\n    setModalOpen(false);\r\n    setSelectedUser(null);\r\n    setModalMode(\"view\");\r\n  };\r\n\r\n  const handleModalSuccess = () => {\r\n    fetchUsers();\r\n    closeModal();\r\n  };\r\n\r\n  const formatDate = (dateString) => {\r\n    if (!dateString) return \"N/A\";\r\n    return new Date(dateString).toLocaleDateString(\"vi-VN\", {\r\n      day: \"2-digit\",\r\n      month: \"2-digit\",\r\n      year: \"numeric\",\r\n      hour: \"2-digit\",\r\n      minute: \"2-digit\"\r\n    });\r\n  };\r\n\r\n  const getRoleBadge = (role) => {\r\n    const roleConfig = {\r\n      \"Admin\": { bg: \"bg-red-100\", text: \"text-red-800\", label: \"Quản trị viên\" },\r\n      \"Customer\": { bg: \"bg-blue-100\", text: \"text-blue-800\", label: \"Khách hàng\" },\r\n      \"Staff\": { bg: \"bg-green-100\", text: \"text-green-800\", label: \"Nhân viên\" },\r\n      \"Manager\": { bg: \"bg-yellow-100\", text: \"text-yellow-800\", label: \"Quản lý\" }\r\n    };\r\n\r\n    const config = roleConfig[role] || { bg: \"bg-gray-100\", text: \"text-gray-800\", label: role };\r\n\r\n    return (\r\n      <span className={`inline-flex px-2 py-1 text-xs font-medium rounded-full ${config.bg} ${config.text}`}>\r\n        {config.label}\r\n      </span>\r\n    );\r\n  };\r\n\r\n  // Pagination logic\r\n  const totalPages = Math.ceil(filteredUsers.length / itemsPerPage);\r\n  const startIndex = (currentPage - 1) * itemsPerPage;\r\n  const endIndex = startIndex + itemsPerPage;\r\n  const currentUsers = filteredUsers.slice(startIndex, endIndex);\r\n\r\n  const renderPagination = () => {\r\n    if (totalPages <= 1) return null;\r\n\r\n    const pages = [];\r\n    const maxVisiblePages = 5;\r\n    \r\n    let startPage = Math.max(1, currentPage - Math.floor(maxVisiblePages / 2));\r\n    let endPage = Math.min(totalPages, startPage + maxVisiblePages - 1);\r\n    \r\n    if (endPage - startPage + 1 < maxVisiblePages) {\r\n      startPage = Math.max(1, endPage - maxVisiblePages + 1);\r\n    }\r\n\r\n    // Previous button\r\n    if (currentPage > 1) {\r\n      pages.push(\r\n        <button\r\n          key=\"prev\"\r\n          onClick={() => setCurrentPage(currentPage - 1)}\r\n          className=\"px-3 py-2 border border-gray-300 rounded-l-lg hover:bg-gray-50 transition\"\r\n        >\r\n          ‹\r\n        </button>\r\n      );\r\n    }\r\n\r\n    // Page numbers\r\n    for (let i = startPage; i <= endPage; i++) {\r\n      pages.push(\r\n        <button\r\n          key={i}\r\n          onClick={() => setCurrentPage(i)}\r\n          className={`px-3 py-2 border-t border-b border-gray-300 transition ${\r\n            i === currentPage\r\n              ? \"bg-blue-600 text-white border-blue-600\"\r\n              : \"hover:bg-gray-50\"\r\n          }`}\r\n        >\r\n          {i}\r\n        </button>\r\n      );\r\n    }\r\n\r\n    // Next button\r\n    if (currentPage < totalPages) {\r\n      pages.push(\r\n        <button\r\n          key=\"next\"\r\n          onClick={() => setCurrentPage(currentPage + 1)}\r\n          className=\"px-3 py-2 border border-gray-300 rounded-r-lg hover:bg-gray-50 transition\"\r\n        >\r\n          ›\r\n        </button>\r\n      );\r\n    }\r\n\r\n    return (\r\n      <div className=\"flex justify-center items-center mt-6 space-x-1\">\r\n        {pages}\r\n      </div>\r\n    );\r\n  };\r\n\r\n  return (\r\n    <div className=\"p-6\">\r\n      {/* Header */}\r\n      <div className=\"mb-6\">\r\n        <h1 className=\"text-2xl font-bold text-gray-900 mb-2\">Quản lý người dùng</h1>\r\n        <p className=\"text-gray-600\">Quản lý tài khoản người dùng trong hệ thống</p>\r\n      </div>\r\n\r\n      {/* Filters and Search */}\r\n      <div className=\"bg-white rounded-lg shadow-sm border border-gray-200 p-6 mb-6\">\r\n        <div className=\"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4\">\r\n          {/* Search */}\r\n          <div className=\"relative\">\r\n            <input\r\n              type=\"text\"\r\n              value={searchTerm}\r\n              onChange={(e) => setSearchTerm(e.target.value)}\r\n              placeholder=\"Tìm kiếm theo tên, email, SĐT...\"\r\n              className=\"w-full pl-10 pr-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500\"\r\n            />\r\n            <FaSearch className=\"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400\" />\r\n          </div>\r\n\r\n          {/* Status Filter */}\r\n          <select\r\n            value={statusFilter}\r\n            onChange={(e) => setStatusFilter(e.target.value)}\r\n            className=\"px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500\"\r\n          >\r\n            <option value=\"all\">Tất cả trạng thái</option>\r\n            <option value=\"active\">Hoạt động</option>\r\n            <option value=\"inactive\">Vô hiệu hóa</option>\r\n          </select>\r\n\r\n          {/* Role Filter */}\r\n          <select\r\n            value={roleFilter}\r\n            onChange={(e) => setRoleFilter(e.target.value)}\r\n            className=\"px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500\"\r\n          >\r\n            <option value=\"all\">Tất cả vai trò</option>\r\n            <option value=\"Admin\">Quản trị viên</option>\r\n            <option value=\"Manager\">Quản lý</option>\r\n            <option value=\"Customer\">Khách hàng</option>\r\n            <option value=\"Staff\">Nhân viên</option>\r\n          </select>\r\n\r\n          {/* Create User Button */}\r\n          <button\r\n            onClick={() => openModal(\"create\")}\r\n            className=\"inline-flex items-center justify-center px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition\"\r\n          >\r\n            <FaUserPlus className=\"mr-2\" />\r\n            Thêm người dùng\r\n          </button>\r\n        </div>\r\n\r\n        {/* Results info */}\r\n        <div className=\"mt-4 text-sm text-gray-600\">\r\n          Hiển thị {currentUsers.length} / {filteredUsers.length} người dùng\r\n          {searchTerm && (\r\n            <span> - Tìm kiếm: \"<strong>{searchTerm}</strong>\"</span>\r\n          )}\r\n        </div>\r\n      </div>\r\n\r\n      {/* Users Table */}\r\n      <div className=\"bg-white rounded-lg shadow-sm border border-gray-200 overflow-hidden\">\r\n        {loading ? (\r\n          <div className=\"flex justify-center items-center py-16\">\r\n            <div className=\"text-center\">\r\n              <div className=\"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600 mx-auto\"></div>\r\n              <p className=\"mt-4 text-gray-600\">Đang tải danh sách người dùng...</p>\r\n            </div>\r\n          </div>\r\n        ) : currentUsers.length > 0 ? (\r\n          <>\r\n            <div className=\"overflow-x-auto\">\r\n              <table className=\"w-full\">\r\n                <thead className=\"bg-gray-50 border-b border-gray-200\">\r\n                  <tr>\r\n                    <th \r\n                      className=\"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider cursor-pointer hover:bg-gray-100\"\r\n                      onClick={() => handleSort(\"userID\")}\r\n                    >\r\n                      ID {sortField === \"userID\" && (sortDirection === \"asc\" ? \"↑\" : \"↓\")}\r\n                    </th>\r\n                    <th \r\n                      className=\"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider cursor-pointer hover:bg-gray-100\"\r\n                      onClick={() => handleSort(\"name\")}\r\n                    >\r\n                      Tên {sortField === \"name\" && (sortDirection === \"asc\" ? \"↑\" : \"↓\")}\r\n                    </th>\r\n                    <th \r\n                      className=\"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider cursor-pointer hover:bg-gray-100\"\r\n                      onClick={() => handleSort(\"email\")}\r\n                    >\r\n                      Email {sortField === \"email\" && (sortDirection === \"asc\" ? \"↑\" : \"↓\")}\r\n                    </th>\r\n                    <th className=\"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider\">\r\n                      Số điện thoại\r\n                    </th>\r\n                    <th \r\n                      className=\"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider cursor-pointer hover:bg-gray-100\"\r\n                      onClick={() => handleSort(\"role\")}\r\n                    >\r\n                      Vai trò {sortField === \"role\" && (sortDirection === \"asc\" ? \"↑\" : \"↓\")}\r\n                    </th>\r\n                    <th \r\n                      className=\"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider cursor-pointer hover:bg-gray-100\"\r\n                      onClick={() => handleSort(\"status\")}\r\n                    >\r\n                      Trạng thái {sortField === \"status\" && (sortDirection === \"asc\" ? \"↑\" : \"↓\")}\r\n                    </th>\r\n                    <th \r\n                      className=\"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider cursor-pointer hover:bg-gray-100\"\r\n                      onClick={() => handleSort(\"createDate\")}\r\n                    >\r\n                      Ngày tạo {sortField === \"createDate\" && (sortDirection === \"asc\" ? \"↑\" : \"↓\")}\r\n                    </th>\r\n                    <th className=\"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider\">\r\n                      Thao tác\r\n                    </th>\r\n                  </tr>\r\n                </thead>\r\n                <tbody className=\"bg-white divide-y divide-gray-200\">\r\n                  {currentUsers.map((user) => (\r\n                    <tr key={user.userID} className=\"hover:bg-gray-50\">\r\n                      <td className=\"px-6 py-4 whitespace-nowrap text-sm font-medium text-gray-900\">\r\n                        #{user.userID}\r\n                      </td>\r\n                      <td className=\"px-6 py-4 whitespace-nowrap\">\r\n                        <div className=\"text-sm font-medium text-gray-900\">{user.name}</div>\r\n                      </td>\r\n                      <td className=\"px-6 py-4 whitespace-nowrap\">\r\n                        <div className=\"text-sm text-gray-900\">{user.email}</div>\r\n                      </td>\r\n                      <td className=\"px-6 py-4 whitespace-nowrap\">\r\n                        <div className=\"text-sm text-gray-900\">{user.phone || \"N/A\"}</div>\r\n                      </td>\r\n                      <td className=\"px-6 py-4 whitespace-nowrap\">\r\n                        {getRoleBadge(user.roles[0])}\r\n                      </td>\r\n                      <td className=\"px-6 py-4 whitespace-nowrap\">\r\n                        <span className={`inline-flex px-2 py-1 text-xs font-medium rounded-full ${\r\n                          user.status \r\n                            ? \"bg-green-100 text-green-800\" \r\n                            : \"bg-red-100 text-red-800\"\r\n                        }`}>\r\n                          {user.status ? \"Hoạt động\" : \"Vô hiệu hóa\"}\r\n                        </span>\r\n                      </td>\r\n                      <td className=\"px-6 py-4 whitespace-nowrap text-sm text-gray-900\">\r\n                        {formatDate(user.createDate)}\r\n                      </td>\r\n                      <td className=\"px-6 py-4 whitespace-nowrap text-sm font-medium\">\r\n                        <div className=\"flex items-center space-x-2\">\r\n                          <button\r\n                            onClick={() => openModal(\"view\", user)}\r\n                            className=\"text-blue-600 hover:bg-blue-50 p-1 rounded transition\"\r\n                            title=\"Xem chi tiết\"\r\n                          >\r\n                            <FaEye />\r\n                          </button>\r\n                          <button\r\n                            onClick={() => openModal(\"edit\", user)}\r\n                            className=\"text-yellow-600 hover:bg-yellow-50 p-1 rounded transition\"\r\n                            title=\"Chỉnh sửa\"\r\n                          >\r\n                            <FaEdit />\r\n                          </button>\r\n                          <button\r\n                            onClick={() => handleStatusUpdate(user.email, !user.status)}\r\n                            className={`p-1 rounded transition ${\r\n                              user.status \r\n                                ? \"text-red-600 hover:bg-red-50\" \r\n                                : \"text-green-600 hover:bg-green-50\"\r\n                            }`}\r\n                            title={user.status ? \"Vô hiệu hóa\" : \"Kích hoạt\"}\r\n                          >\r\n                            {user.status ? <FaUserTimes /> : <FaUserCheck />}\r\n                          </button>\r\n                        </div>\r\n                      </td>\r\n                    </tr>\r\n                  ))}\r\n                </tbody>\r\n              </table>\r\n            </div>\r\n\r\n            {/* Pagination */}\r\n            {renderPagination()}\r\n            \r\n            {/* Pagination info */}\r\n            <div className=\"px-6 py-4 border-t border-gray-200 text-center text-sm text-gray-600\">\r\n              Trang {currentPage} / {totalPages} - Tổng {filteredUsers.length} người dùng\r\n            </div>\r\n          </>\r\n        ) : (\r\n          <div className=\"text-center py-16\">\r\n            <div className=\"text-6xl mb-4\">👥</div>\r\n            <h3 className=\"text-lg font-medium text-gray-900 mb-2\">\r\n              {searchTerm || statusFilter !== \"all\" || roleFilter !== \"all\" \r\n                ? \"Không tìm thấy người dùng phù hợp\" \r\n                : \"Chưa có người dùng nào\"}\r\n            </h3>\r\n            <p className=\"text-gray-600 mb-6\">\r\n              {searchTerm || statusFilter !== \"all\" || roleFilter !== \"all\"\r\n                ? \"Thử thay đổi bộ lọc để xem thêm kết quả\"\r\n                : \"Hệ thống chưa có người dùng nào được đăng ký\"}\r\n            </p>\r\n            {(searchTerm || statusFilter !== \"all\" || roleFilter !== \"all\") && (\r\n              <button\r\n                onClick={() => {\r\n                  setSearchTerm(\"\");\r\n                  setStatusFilter(\"all\");\r\n                  setRoleFilter(\"all\");\r\n                }}\r\n                className=\"inline-flex items-center px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition\"\r\n              >\r\n                <FaFilter className=\"mr-2\" />\r\n                Xóa bộ lọc\r\n              </button>\r\n            )}\r\n          </div>\r\n        )}\r\n      </div>\r\n\r\n      {/* User Modal */}\r\n      {modalOpen && (\r\n        <UserModal\r\n          isOpen={modalOpen}\r\n          onClose={closeModal}\r\n          mode={modalMode}\r\n          user={selectedUser}\r\n          onSuccess={handleModalSuccess}\r\n        />\r\n      )}\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default UserManager; ","C:\\Users\\ADMIN\\OneDrive - FPT Corporation\\Documents\\GitHub\\Thriftorium\\src\\pages\\Admin\\subscription\\SubscriptionManager.jsx",[],[],"C:\\Users\\ADMIN\\OneDrive - FPT Corporation\\Documents\\GitHub\\Thriftorium\\src\\pages\\Admin\\products\\ProductManager.jsx",[],[],"C:\\Users\\ADMIN\\OneDrive - FPT Corporation\\Documents\\GitHub\\Thriftorium\\src\\pages\\Admin\\voucher\\VoucherManager.jsx",[],[],"C:\\Users\\ADMIN\\OneDrive - FPT Corporation\\Documents\\GitHub\\Thriftorium\\src\\pages\\Admin\\dashboard\\Dashboard.jsx",["520"],[],"import React, { useState, useEffect } from \"react\";\r\nimport {\r\n  FaShoppingBag,\r\n  FaChartLine,\r\n  FaBox,\r\n  FaMoneyBillWave,\r\n  FaChartBar,\r\n  FaChartPie,\r\n  FaPercentage,\r\n} from \"react-icons/fa\";\r\nimport DashboardService from \"../../../service/DashboardService\";\r\nimport { toast } from \"react-toastify\";\r\n\r\nexport default function Dashboard() {\r\n  // States for different statistics\r\n  const [weeklyStats, setWeeklyStats] = useState(null);\r\n  const [orderStats, setOrderStats] = useState(null);\r\n  const [topProducts, setTopProducts] = useState([]);\r\n  const [monthlyRevenue, setMonthlyRevenue] = useState([]);\r\n  const [totalStats, setTotalStats] = useState(null);\r\n  const [loading, setLoading] = useState(true);\r\n\r\n  // Fetch all dashboard data\r\n  useEffect(() => {\r\n    const fetchDashboardData = async () => {\r\n      try {\r\n        const [\r\n          weeklyData,\r\n          orderStatsData,\r\n          topProductsData,\r\n          revenueData,\r\n          totalsData,\r\n        ] = await Promise.all([\r\n          DashboardService.getTotalAmountAndProductsOfWeek(),\r\n          DashboardService.getStaticOrders(),\r\n          DashboardService.getTopProductsSoldInMonth(),\r\n          DashboardService.getStoreRevenueByMonth(),\r\n          DashboardService.getTotalOrdersAndAmount(),\r\n        ]);\r\n\r\n        // Validate and set weekly stats with proper defaults\r\n        setWeeklyStats({\r\n          totalAmount: weeklyData?.totalAmount || 0,\r\n          totalProducts: weeklyData?.totalProducts || 0,\r\n          totalProfit: weeklyData?.totalProfit === \"-Infinity\" || weeklyData?.totalProfit === null ? 0 : weeklyData?.totalProfit,\r\n          profitPercentage: weeklyData?.profitPercentage === \"-Infinity\" || weeklyData?.profitPercentage === null ? 0 : weeklyData?.profitPercentage\r\n        });\r\n\r\n        // Set order stats with defaults\r\n        setOrderStats(orderStatsData || {\r\n          ordersReturnOrCancell: 0,\r\n          orders: 0,\r\n          ordersComplete: 0,\r\n          ordersCancell: 0,\r\n          ordersReturnRefund: 0,\r\n          ordersReport: 0\r\n        });\r\n\r\n        // Set top products with validation\r\n        setTopProducts(topProductsData?.topProducts || []);\r\n\r\n        // Set monthly revenue with validation\r\n        setMonthlyRevenue(revenueData?.monthList || []);\r\n\r\n        // Set total stats with validation\r\n        setTotalStats(totalsData?.[0] || {\r\n          totalOrders: 0,\r\n          totalOrdersAmount: 0\r\n        });\r\n      } catch (error) {\r\n        console.error(\"Error fetching dashboard data:\", error);\r\n        toast.error(\"Không thể tải dữ liệu thống kê\");\r\n      } finally {\r\n        setLoading(false);\r\n      }\r\n    };\r\n\r\n    fetchDashboardData();\r\n  }, []);\r\n\r\n  if (loading) {\r\n    return (\r\n      <div className=\"flex items-center justify-center h-screen\">\r\n        <div className=\"text-xl text-gray-600\">Đang tải dữ liệu...</div>\r\n      </div>\r\n    );\r\n  }\r\n\r\n  // Calculate max revenue for the chart\r\n  const maxRevenue = Math.max(...(monthlyRevenue?.map(m => m.item2) || [1]));\r\n\r\n  return (\r\n    <div className=\"p-6 bg-gray-100 min-h-screen\">\r\n      <div className=\"max-w-7xl mx-auto\">\r\n        <h1 className=\"text-3xl font-bold text-gray-800 mb-8\">Dashboard</h1>\r\n\r\n        {/* Weekly Stats Cards */}\r\n        <div className=\"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6 mb-8\">\r\n          <div className=\"bg-white rounded-lg shadow p-6\">\r\n            <div className=\"flex items-center justify-between\">\r\n              <div>\r\n                <p className=\"text-sm text-gray-600\">Doanh thu tuần</p>\r\n                <p className=\"text-2xl font-bold text-gray-800\">\r\n                  {weeklyStats?.totalAmount?.toLocaleString()} VND\r\n                </p>\r\n              </div>\r\n              <FaMoneyBillWave className=\"text-green-500 text-3xl\" />\r\n            </div>\r\n          </div>\r\n\r\n          <div className=\"bg-white rounded-lg shadow p-6\">\r\n            <div className=\"flex items-center justify-between\">\r\n              <div>\r\n                <p className=\"text-sm text-gray-600\">Lợi nhuận tuần</p>\r\n                <div>\r\n                  <p className=\"text-2xl font-bold text-gray-800\">\r\n                    {weeklyStats?.totalProfit?.toLocaleString()} VND\r\n                  </p>\r\n                  <p className={`text-sm ${weeklyStats?.profitPercentage >= 0 ? 'text-green-500' : 'text-red-500'} flex items-center`}>\r\n                    {weeklyStats?.profitPercentage >= 0 ? '+' : ''}{weeklyStats?.profitPercentage?.toFixed(2)}%\r\n                    <FaPercentage className=\"ml-1\" />\r\n                  </p>\r\n                </div>\r\n              </div>\r\n              <FaChartLine className=\"text-blue-500 text-3xl\" />\r\n            </div>\r\n          </div>\r\n\r\n          <div className=\"bg-white rounded-lg shadow p-6\">\r\n            <div className=\"flex items-center justify-between\">\r\n              <div>\r\n                <p className=\"text-sm text-gray-600\">Sản phẩm đã bán (tuần)</p>\r\n                <p className=\"text-2xl font-bold text-gray-800\">\r\n                  {weeklyStats?.totalProducts || 0}\r\n                </p>\r\n              </div>\r\n              <FaBox className=\"text-purple-500 text-3xl\" />\r\n            </div>\r\n          </div>\r\n\r\n          <div className=\"bg-white rounded-lg shadow p-6\">\r\n            <div className=\"flex items-center justify-between\">\r\n              <div>\r\n                <p className=\"text-sm text-gray-600\">Tổng doanh thu</p>\r\n                <p className=\"text-2xl font-bold text-gray-800\">\r\n                  {totalStats?.totalOrdersAmount?.toLocaleString()} VND\r\n                </p>\r\n              </div>\r\n              <FaChartLine className=\"text-red-500 text-3xl\" />\r\n            </div>\r\n          </div>\r\n        </div>\r\n\r\n        {/* Order Statistics */}\r\n        <div className=\"grid grid-cols-1 lg:grid-cols-2 gap-6 mb-8\">\r\n          {/* Order Status Chart */}\r\n          <div className=\"bg-white rounded-lg shadow p-6\">\r\n            <h2 className=\"text-xl font-semibold mb-4 flex items-center\">\r\n              <FaChartPie className=\"mr-2 text-indigo-500\" />\r\n              Thống kê đơn hàng\r\n            </h2>\r\n            <div className=\"space-y-4\">\r\n              {orderStats && (\r\n                <>\r\n                  <StatItem \r\n                    label=\"Tổng đơn hàng\" \r\n                    value={orderStats.orders} \r\n                    color=\"bg-blue-500\"\r\n                    total={orderStats.orders || 1} \r\n                  />\r\n                  <StatItem \r\n                    label=\"Đơn hoàn thành\" \r\n                    value={orderStats.ordersComplete} \r\n                    color=\"bg-green-500\"\r\n                    total={orderStats.orders || 1} \r\n                  />\r\n                  <StatItem \r\n                    label=\"Đơn hủy\" \r\n                    value={orderStats.ordersCancell} \r\n                    color=\"bg-red-500\"\r\n                    total={orderStats.orders || 1} \r\n                  />\r\n                  <StatItem \r\n                    label=\"Đơn hoàn trả\" \r\n                    value={orderStats.ordersReturnOrCancell} \r\n                    color=\"bg-yellow-500\"\r\n                    total={orderStats.orders || 1} \r\n                  />\r\n                  <StatItem \r\n                    label=\"Đơn hoàn tiền\" \r\n                    value={orderStats.ordersReturnRefund} \r\n                    color=\"bg-purple-500\"\r\n                    total={orderStats.orders || 1} \r\n                  />\r\n                  <StatItem \r\n                    label=\"Đơn báo cáo\" \r\n                    value={orderStats.ordersReport} \r\n                    color=\"bg-orange-500\"\r\n                    total={orderStats.orders || 1} \r\n                  />\r\n                </>\r\n              )}\r\n            </div>\r\n          </div>\r\n\r\n          {/* Top Products */}\r\n          <div className=\"bg-white rounded-lg shadow p-6\">\r\n            <h2 className=\"text-xl font-semibold mb-4 flex items-center\">\r\n              <FaChartBar className=\"mr-2 text-orange-500\" />\r\n              Top sản phẩm bán chạy\r\n            </h2>\r\n            <div className=\"space-y-4\">\r\n              {topProducts.length > 0 ? (\r\n                topProducts.map((product, index) => (\r\n                  <div key={index} className=\"flex items-center\">\r\n                    <div className=\"w-8 h-8 bg-gray-200 rounded-full flex items-center justify-center mr-3\">\r\n                      {index + 1}\r\n                    </div>\r\n                    <div className=\"flex-1\">\r\n                      <div className=\"text-sm font-medium\">{product.item1}</div>\r\n                      <div className=\"text-xs text-gray-500\">\r\n                        Đã bán: {product.item2}\r\n                      </div>\r\n                    </div>\r\n                  </div>\r\n                ))\r\n              ) : (\r\n                <div className=\"text-center text-gray-500 py-4\">\r\n                  Chưa có dữ liệu sản phẩm bán chạy\r\n                </div>\r\n              )}\r\n            </div>\r\n          </div>\r\n        </div>\r\n\r\n        {/* Monthly Revenue Chart */}\r\n        <div className=\"bg-white rounded-lg shadow p-6 overflow-y-auto\">\r\n          <h2 className=\"text-xl font-semibold mb-4 flex items-center\">\r\n            <FaChartLine className=\"mr-2 text-green-500\" />\r\n            Doanh thu theo tháng\r\n          </h2>\r\n          <div className=\"h-80\">\r\n            <div className=\"space-y-4\">\r\n              {monthlyRevenue.map((month, index) => (\r\n                <div key={index} className=\"flex items-center\">\r\n                  <div className=\"w-32 text-sm text-gray-600\">{month.item1}</div>\r\n                  <div className=\"flex-1\">\r\n                    <div className=\"h-4 bg-gray-200 rounded-full overflow-hidden\">\r\n                      <div\r\n                        className=\"h-full bg-green-500\"\r\n                        style={{\r\n                          width: `${maxRevenue > 0 ? (month.item2 / maxRevenue) * 100 : 0}%`\r\n                        }}\r\n                      />\r\n                    </div>\r\n                  </div>\r\n                  <div className=\"w-32 text-right text-sm font-medium\">\r\n                    {month.item2?.toLocaleString()} VND\r\n                  </div>\r\n                </div>\r\n              ))}\r\n            </div>\r\n          </div>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  );\r\n}\r\n\r\n// StatItem component for order statistics\r\nfunction StatItem({ label, value = 0, color, total = 1 }) {\r\n  // Ensure total is at least 1 to avoid division by zero\r\n  const safeTotal = Math.max(1, total);\r\n  const percentage = (value / safeTotal) * 100;\r\n  \r\n  return (\r\n    <div className=\"flex items-center\">\r\n      <div className=\"w-32 text-sm text-gray-600\">{label}</div>\r\n      <div className=\"flex-1\">\r\n        <div className=\"h-4 bg-gray-200 rounded-full overflow-hidden\">\r\n          <div\r\n            className={`h-full ${color}`}\r\n            style={{\r\n              width: `${percentage}%`\r\n            }}\r\n          />\r\n        </div>\r\n      </div>\r\n      <div className=\"w-16 text-right text-sm font-medium\">{value}</div>\r\n    </div>\r\n  );\r\n}","C:\\Users\\ADMIN\\OneDrive - FPT Corporation\\Documents\\GitHub\\Thriftorium\\src\\pages\\Admin\\report\\ReportManager.jsx",["521"],[],"import React, { useState, useEffect } from \"react\";\r\nimport { FaSearch, FaEye, FaTrash } from \"react-icons/fa\";\r\nimport ReportService from \"../../../service/ReportService\";\r\nimport AccountService from \"../../../service/AccountService\";\r\nimport ProductService from \"../../../service/ProductService\";\r\nimport { toast } from \"react-toastify\";\r\n\r\nconst ReportManager = () => {\r\n  const [reports, setReports] = useState([]);\r\n  const [loading, setLoading] = useState(true);\r\n  const [search, setSearch] = useState(\"\");\r\n  const [currentPage, setCurrentPage] = useState(1);\r\n  const [totalPages, setTotalPages] = useState(1);\r\n  const pageSize = 10;\r\n\r\n  // Modal states\r\n  const [showViewModal, setShowViewModal] = useState(false);\r\n  const [selectedReport, setSelectedReport] = useState(null);\r\n  const [userInfo, setUserInfo] = useState(null);\r\n  const [productInfo, setProductInfo] = useState(null);\r\n\r\n  // Fetch reports\r\n  const fetchReports = async () => {\r\n    try {\r\n      setLoading(true);\r\n      let response;\r\n\r\n      if (search.trim()) {\r\n        response = await ReportService.searchReports(\r\n          search,\r\n          currentPage - 1,\r\n          pageSize\r\n        );\r\n      } else {\r\n        response = await ReportService.getAllReports();\r\n        response = {\r\n          items: response,\r\n          totalCount: response?.length || 0,\r\n        };\r\n      }\r\n\r\n      setReports(response.items || []);\r\n      setTotalPages(Math.ceil((response.totalCount || 0) / pageSize));\r\n    } catch (error) {\r\n      console.error(\"Error fetching reports:\", error);\r\n      toast.error(\"Không thể tải danh sách báo cáo\");\r\n    } finally {\r\n      setLoading(false);\r\n    }\r\n  };\r\n\r\n  useEffect(() => {\r\n    const timeoutId = setTimeout(\r\n      () => {\r\n        fetchReports();\r\n      },\r\n      search ? 500 : 0\r\n    );\r\n\r\n    return () => clearTimeout(timeoutId);\r\n  }, [currentPage, search]);\r\n\r\n  // Handle report deletion\r\n  const handleDelete = async (reportId) => {\r\n    if (!window.confirm(\"Bạn có chắc chắn muốn xóa báo cáo này?\")) return;\r\n\r\n    try {\r\n      await ReportService.deleteReport(reportId);\r\n      toast.success(\"Đã xóa báo cáo thành công\");\r\n      fetchReports();\r\n    } catch (error) {\r\n      console.error(\"Error deleting report:\", error);\r\n      toast.error(\"Không thể xóa báo cáo\");\r\n    }\r\n  };\r\n\r\n  // Format date\r\n  const formatDate = (dateString) => {\r\n    return new Date(dateString).toLocaleString(\"vi-VN\");\r\n  };\r\n\r\n  // Fetch user info when viewing report\r\n  const handleViewReport = async (report) => {\r\n    setSelectedReport(report);\r\n    setShowViewModal(true);\r\n\r\n    try {\r\n      const [userInfoData, productInfoData] = await Promise.all([\r\n        AccountService.getAccountById(report.accountID),\r\n        ProductService.getProductDetails(report.productID),\r\n      ]);\r\n      setUserInfo(userInfoData);\r\n      setProductInfo(productInfoData);\r\n    } catch (error) {\r\n      console.error(\"Error fetching report details:\", error);\r\n      toast.error(\"Không thể tải thông tin chi tiết\");\r\n    }\r\n  };\r\n\r\n  return (\r\n    <div className=\"p-6\">\r\n      {/* Header */}\r\n      <div className=\"mb-6\">\r\n        <h1 className=\"text-2xl font-bold mb-2\">Quản lý báo cáo</h1>\r\n        <div className=\"flex items-center gap-4\">\r\n          <div className=\"flex-1 relative\">\r\n            <input\r\n              type=\"text\"\r\n              placeholder=\"Tìm kiếm báo cáo...\"\r\n              value={search}\r\n              onChange={(e) => setSearch(e.target.value)}\r\n              className=\"w-full pl-10 pr-4 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500\"\r\n            />\r\n            <FaSearch className=\"absolute left-3 top-1/2 -translate-y-1/2 text-gray-400\" />\r\n          </div>\r\n        </div>\r\n      </div>\r\n\r\n      {/* Reports Table */}\r\n      <div className=\"bg-white rounded-lg shadow overflow-hidden\">\r\n        <table className=\"w-full\">\r\n          <thead className=\"bg-gray-50\">\r\n            <tr>\r\n              <th className=\"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider\">\r\n                ID\r\n              </th>\r\n              <th className=\"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider\">\r\n                Đơn hàng\r\n              </th>\r\n              <th className=\"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider\">\r\n                Sản phẩm\r\n              </th>\r\n              <th className=\"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider\">\r\n                Ngày tạo\r\n              </th>\r\n              <th className=\"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase tracking-wider\">\r\n                Thao tác\r\n              </th>\r\n            </tr>\r\n          </thead>\r\n          <tbody className=\"divide-y divide-gray-200\">\r\n            {loading ? (\r\n              <tr>\r\n                <td colSpan=\"6\" className=\"text-center py-4\">\r\n                  Đang tải...\r\n                </td>\r\n              </tr>\r\n            ) : reports.length === 0 ? (\r\n              <tr>\r\n                <td colSpan=\"6\" className=\"text-center py-4 text-gray-500\">\r\n                  Không có báo cáo nào\r\n                </td>\r\n              </tr>\r\n            ) : (\r\n              reports.map((report) => (\r\n                <tr key={report.reportID} className=\"hover:bg-gray-50\">\r\n                  <td className=\"px-6 py-4 whitespace-nowrap text-sm text-gray-900\">\r\n                    #{report.reportID}\r\n                  </td>\r\n                  <td className=\"px-6 py-4 whitespace-nowrap text-sm text-gray-900\">\r\n                    #{report.orderID}\r\n                  </td>\r\n                  <td className=\"px-6 py-4 whitespace-nowrap text-sm text-gray-900\">\r\n                    #{report.productID}\r\n                  </td>\r\n                  <td className=\"px-6 py-4 whitespace-nowrap text-sm text-gray-900\">\r\n                    {formatDate(report.createAt)}\r\n                  </td>\r\n                  <td className=\"px-6 py-4 whitespace-nowrap text-right text-sm font-medium\">\r\n                    <button\r\n                      onClick={() => handleViewReport(report)}\r\n                      className=\"text-blue-600 hover:text-blue-900 mx-2\"\r\n                    >\r\n                      <FaEye />\r\n                    </button>\r\n                    <button\r\n                      onClick={() => handleDelete(report.reportID)}\r\n                      className=\"text-red-600 hover:text-red-900 mx-2\"\r\n                    >\r\n                      <FaTrash />\r\n                    </button>\r\n                  </td>\r\n                </tr>\r\n              ))\r\n            )}\r\n          </tbody>\r\n        </table>\r\n      </div>\r\n\r\n      {/* Pagination */}\r\n      <div className=\"flex justify-between items-center mt-4\">\r\n        <div className=\"text-sm text-gray-700\">\r\n          Trang {currentPage} / {totalPages}\r\n        </div>\r\n        <div className=\"flex gap-2\">\r\n          <button\r\n            onClick={() => setCurrentPage((prev) => Math.max(prev - 1, 1))}\r\n            disabled={currentPage === 1}\r\n            className=\"px-4 py-2 border border-gray-300 rounded-md text-sm font-medium text-gray-700 hover:bg-gray-50 disabled:opacity-50 disabled:cursor-not-allowed\"\r\n          >\r\n            Trước\r\n          </button>\r\n          <button\r\n            onClick={() =>\r\n              setCurrentPage((prev) => Math.min(prev + 1, totalPages))\r\n            }\r\n            disabled={currentPage === totalPages}\r\n            className=\"px-4 py-2 border border-gray-300 rounded-md text-sm font-medium text-gray-700 hover:bg-gray-50 disabled:opacity-50 disabled:cursor-not-allowed\"\r\n          >\r\n            Sau\r\n          </button>\r\n        </div>\r\n      </div>\r\n\r\n      {/* View Modal */}\r\n      {showViewModal && selectedReport && (\r\n        <div className=\"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50\">\r\n          <div className=\"bg-white rounded-lg max-w-2xl w-full mx-4 max-h-[90vh] overflow-y-auto\">\r\n            <div className=\"p-6\">\r\n              <h2 className=\"text-xl font-bold mb-4\">\r\n                Chi tiết báo cáo #{selectedReport.reportID}\r\n              </h2>\r\n              <div className=\"space-y-4\">\r\n                {/* User Info */}\r\n                {userInfo && (\r\n                  <div className=\"bg-gray-50 p-4 rounded-lg\">\r\n                    <h3 className=\"font-medium text-gray-700 mb-2\">\r\n                      Thông tin người báo cáo:\r\n                    </h3>\r\n                    <div className=\"grid grid-cols-2 gap-4 text-sm\">\r\n                      <div>\r\n                        <span className=\"font-medium\">Tên người dùng:</span>\r\n                        <span className=\"ml-2\">{userInfo.userName}</span>\r\n                      </div>\r\n                      <div>\r\n                        <span className=\"font-medium\">Email:</span>\r\n                        <span className=\"ml-2\">{userInfo.email}</span>\r\n                      </div>\r\n                      <div>\r\n                        <span className=\"font-medium\">Số điện thoại:</span>\r\n                        <span className=\"ml-2\">{userInfo.phone || \"N/A\"}</span>\r\n                      </div>\r\n                    </div>\r\n                  </div>\r\n                )}\r\n\r\n                {/* Product Info */}\r\n                {productInfo && (\r\n                  <div className=\"bg-gray-50 p-4 rounded-lg\">\r\n                    <h3 className=\"font-medium text-gray-700 mb-2\">\r\n                      Thông tin sản phẩm:\r\n                    </h3>\r\n                    <div className=\"flex gap-4\">\r\n                      {productInfo.imageProducts?.[0]?.image && (\r\n                        <div className=\"w-24 h-24 flex-shrink-0\">\r\n                          <img\r\n                            src={productInfo.imageProducts[0].image}\r\n                            alt={productInfo.name}\r\n                            className=\"w-full h-full object-cover rounded-lg\"\r\n                          />\r\n                        </div>\r\n                      )}\r\n                      <div className=\"flex-1 space-y-2\">\r\n                        <div>\r\n                          <span className=\"font-medium\">Tên sản phẩm:</span>\r\n                          <span className=\"ml-2\">{productInfo.name}</span>\r\n                        </div>\r\n                        <div>\r\n                          <span className=\"font-medium\">Mã sản phẩm:</span>\r\n                          <span className=\"ml-2\">#{productInfo.productID}</span>\r\n                        </div>\r\n                        <div>\r\n                          <span className=\"font-medium\">Danh mục:</span>\r\n                          <span className=\"ml-2\">\r\n                            {productInfo.category?.name || \"N/A\"}\r\n                          </span>\r\n                        </div>\r\n                        <div>\r\n                          <span className=\"font-medium\">Giá:</span>\r\n                          <span className=\"ml-2\">\r\n                            {productInfo.price?.toLocaleString()} VND\r\n                          </span>\r\n                        </div>\r\n                      </div>\r\n                    </div>\r\n                  </div>\r\n                )}\r\n\r\n                {/* Report Content */}\r\n                <div>\r\n                  <h3 className=\"font-medium text-gray-700\">\r\n                    Nội dung báo cáo:\r\n                  </h3>\r\n                  <p className=\"mt-1 text-gray-600\">\r\n                    {selectedReport.reportText}\r\n                  </p>\r\n                </div>\r\n\r\n                {/* Report Image */}\r\n                {selectedReport.imageUrl && (\r\n                  <div>\r\n                    <h3 className=\"font-medium text-gray-700\">\r\n                      Hình ảnh báo cáo:\r\n                    </h3>\r\n                    <img\r\n                      src={selectedReport.imageUrl}\r\n                      alt=\"Report\"\r\n                      className=\"mt-2 max-w-full h-auto rounded-lg\"\r\n                    />\r\n                  </div>\r\n                )}\r\n\r\n                <div className=\"mt-6 flex justify-end\">\r\n                  <button\r\n                    onClick={() => {\r\n                      setShowViewModal(false);\r\n                      setUserInfo(null);\r\n                      setProductInfo(null);\r\n                    }}\r\n                    className=\"px-4 py-2 bg-gray-100 text-gray-700 rounded-lg hover:bg-gray-200\"\r\n                  >\r\n                    Đóng\r\n                  </button>\r\n                </div>\r\n              </div>\r\n            </div>\r\n          </div>\r\n        </div>\r\n      )}\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default ReportManager;\r\n","C:\\Users\\ADMIN\\OneDrive - FPT Corporation\\Documents\\GitHub\\Thriftorium\\src\\pages\\Admin\\order\\OrderManager.jsx",["522","523"],[],"import React, { useState, useEffect } from 'react';\r\nimport { FaEye, FaEdit, FaSearch, FaFilter, FaDownload } from 'react-icons/fa';\r\nimport OrderService from '../../../service/OrderService';\r\nimport { toast } from 'react-toastify';\r\n\r\nconst OrderManager = () => {\r\n  const [orders, setOrders] = useState([]);\r\n  const [loading, setLoading] = useState(false);\r\n  const [searchTerm, setSearchTerm] = useState('');\r\n  const [statusFilter, setStatusFilter] = useState('');\r\n  const [dateFilter, setDateFilter] = useState('');\r\n  const [selectedOrder, setSelectedOrder] = useState(null);\r\n  const [showModal, setShowModal] = useState(false);\r\n\r\n  // Order status mapping\r\n  const getStatusText = (status) => {\r\n    const statusMap = {\r\n      0: 'Chờ thanh toán',\r\n      1: 'Chờ xác nhận',\r\n      2: 'Chờ giao hàng',\r\n      3: 'Đang giao hàng',\r\n      4: 'Hoàn thành',\r\n      5: 'Đã hủy',\r\n      6: 'Hoàn trả',\r\n      7: 'Yêu cầu trả hàng'\r\n    };\r\n    return statusMap[status] || 'Không xác định';\r\n  };\r\n\r\n  const getStatusBadgeClass = (status) => {\r\n    const badgeMap = {\r\n      0: 'bg-orange-100 text-orange-800',\r\n      1: 'bg-yellow-100 text-yellow-800',\r\n      2: 'bg-blue-100 text-blue-800',\r\n      3: 'bg-purple-100 text-purple-800',\r\n      4: 'bg-green-100 text-green-800',\r\n      5: 'bg-red-100 text-red-800',\r\n      6: 'bg-indigo-100 text-indigo-800',\r\n      7: 'bg-pink-100 text-pink-800'\r\n    };\r\n    return badgeMap[status] || 'bg-gray-100 text-gray-800';\r\n  };\r\n\r\n  const getPaymentMethodText = (method) => {\r\n    const methodMap = {\r\n      0: 'Tiền mặt',\r\n      1: 'VNPay',\r\n      2: 'Momo'\r\n    };\r\n    return methodMap[method] || 'Không xác định';\r\n  };\r\n\r\n  // Fetch orders\r\n  const fetchOrders = async () => {\r\n    try {\r\n      setLoading(true);\r\n      const searchParams = {};\r\n      \r\n      if (searchTerm) searchParams.search = searchTerm;\r\n      if (statusFilter !== '') searchParams.status = parseInt(statusFilter);\r\n      if (dateFilter) searchParams.date = dateFilter;\r\n\r\n      const response = await OrderService.getAllOrders(searchParams);\r\n      setOrders(response || []);\r\n    } catch (error) {\r\n      console.error('Error fetching orders:', error);\r\n      toast.error('Không thể tải danh sách đơn hàng');\r\n    } finally {\r\n      setLoading(false);\r\n    }\r\n  };\r\n\r\n  useEffect(() => {\r\n    fetchOrders();\r\n  }, []);\r\n\r\n  // Handle search\r\n  const handleSearch = () => {\r\n    fetchOrders();\r\n  };\r\n\r\n  // Handle clear filters\r\n  const handleClearFilters = () => {\r\n    setSearchTerm('');\r\n    setStatusFilter('');\r\n    setDateFilter('');\r\n    setTimeout(() => fetchOrders(), 100);\r\n  };\r\n\r\n  // Handle status update\r\n  const handleStatusUpdate = async (orderId, newStatus) => {\r\n    if (!window.confirm('Bạn có chắc chắn muốn cập nhật trạng thái đơn hàng?')) return;\r\n\r\n    try {\r\n      await OrderService.updateOrderStatus(orderId, newStatus);\r\n      toast.success('Cập nhật trạng thái thành công');\r\n      fetchOrders();\r\n    } catch (error) {\r\n      console.error('Error updating order status:', error);\r\n      toast.error('Không thể cập nhật trạng thái đơn hàng');\r\n    }\r\n  };\r\n\r\n  // Handle view order details\r\n  const handleViewOrder = async (orderId) => {\r\n    try {\r\n      const response = await OrderService.getOrderById(orderId);\r\n      setSelectedOrder(response);\r\n      setShowModal(true);\r\n    } catch (error) {\r\n      console.error('Error fetching order details:', error);\r\n      toast.error('Không thể tải chi tiết đơn hàng');\r\n    }\r\n  };\r\n\r\n  return (\r\n    <div className=\"p-6\">\r\n      {/* Header */}\r\n      <div className=\"mb-6\">\r\n        <h1 className=\"text-3xl font-bold text-gray-900 mb-2\">Quản lý đơn hàng</h1>\r\n        <p className=\"text-gray-600\">Quản lý và theo dõi tất cả đơn hàng trong hệ thống</p>\r\n      </div>\r\n\r\n      {/* Filters */}\r\n      <div className=\"bg-white rounded-lg shadow p-4 mb-6\">\r\n        <div className=\"grid grid-cols-1 md:grid-cols-4 gap-4\">\r\n          {/* Search */}\r\n          <div className=\"md:col-span-2\">\r\n            <label className=\"block text-sm font-medium text-gray-700 mb-1\">\r\n              Tìm kiếm\r\n            </label>\r\n            <div className=\"relative\">\r\n              <input\r\n                type=\"text\"\r\n                value={searchTerm}\r\n                onChange={(e) => setSearchTerm(e.target.value)}\r\n                placeholder=\"Tìm theo ID đơn hàng, tên khách hàng...\"\r\n                className=\"w-full pl-10 pr-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent\"\r\n                onKeyPress={(e) => e.key === 'Enter' && handleSearch()}\r\n              />\r\n              <FaSearch className=\"absolute left-3 top-3 text-gray-400\" />\r\n            </div>\r\n          </div>\r\n\r\n          {/* Status Filter */}\r\n          <div>\r\n            <label className=\"block text-sm font-medium text-gray-700 mb-1\">\r\n              Trạng thái\r\n            </label>\r\n            <select\r\n              value={statusFilter}\r\n              onChange={(e) => setStatusFilter(e.target.value)}\r\n              className=\"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent\"\r\n            >\r\n              <option value=\"\">Tất cả</option>\r\n              <option value=\"0\">Chờ thanh toán</option>\r\n              <option value=\"1\">Chờ xác nhận</option>\r\n              <option value=\"2\">Chờ giao hàng</option>\r\n              <option value=\"3\">Đang giao hàng</option>\r\n              <option value=\"4\">Hoàn thành</option>\r\n              <option value=\"5\">Đã hủy</option>\r\n              <option value=\"6\">Hoàn trả</option>\r\n              <option value=\"7\">Yêu cầu trả hàng</option>\r\n            </select>\r\n          </div>\r\n\r\n          {/* Date Filter */}\r\n          <div>\r\n            <label className=\"block text-sm font-medium text-gray-700 mb-1\">\r\n              Ngày đặt hàng\r\n            </label>\r\n            <input\r\n              type=\"date\"\r\n              value={dateFilter}\r\n              onChange={(e) => setDateFilter(e.target.value)}\r\n              className=\"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent\"\r\n            />\r\n          </div>\r\n        </div>\r\n\r\n        {/* Action Buttons */}\r\n        <div className=\"flex gap-3 mt-4\">\r\n          <button\r\n            onClick={handleSearch}\r\n            className=\"px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 flex items-center gap-2\"\r\n          >\r\n            <FaSearch /> Tìm kiếm\r\n          </button>\r\n          <button\r\n            onClick={handleClearFilters}\r\n            className=\"px-4 py-2 bg-gray-500 text-white rounded-lg hover:bg-gray-600 flex items-center gap-2\"\r\n          >\r\n            <FaFilter /> Xóa bộ lọc\r\n          </button>\r\n          <button className=\"px-4 py-2 bg-green-600 text-white rounded-lg hover:bg-green-700 flex items-center gap-2\">\r\n            <FaDownload /> Xuất Excel\r\n          </button>\r\n        </div>\r\n      </div>\r\n\r\n      {/* Orders Table */}\r\n      <div className=\"bg-white rounded-lg shadow overflow-hidden\">\r\n        {loading ? (\r\n          <div className=\"p-8 text-center\">\r\n            <div className=\"text-gray-500\">Đang tải dữ liệu...</div>\r\n          </div>\r\n        ) : (\r\n          <div className=\"overflow-x-auto\">\r\n            <table className=\"min-w-full divide-y divide-gray-200\">\r\n              <thead className=\"bg-gray-50\">\r\n                <tr>\r\n                  <th className=\"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider\">\r\n                    Đơn hàng\r\n                  </th>\r\n                  <th className=\"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider\">\r\n                    Khách hàng\r\n                  </th>\r\n                  <th className=\"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider\">\r\n                    Ngày đặt\r\n                  </th>\r\n                  <th className=\"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider\">\r\n                    Tổng tiền\r\n                  </th>\r\n                  <th className=\"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider\">\r\n                    Trạng thái\r\n                  </th>\r\n                  <th className=\"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider\">\r\n                    Thanh toán\r\n                  </th>\r\n                  <th className=\"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider\">\r\n                    Thao tác\r\n                  </th>\r\n                </tr>\r\n              </thead>\r\n              <tbody className=\"bg-white divide-y divide-gray-200\">\r\n                {orders.map((order) => (\r\n                  <tr key={order.orderID} className=\"hover:bg-gray-50\">\r\n                    <td className=\"px-6 py-4 whitespace-nowrap\">\r\n                      <div className=\"text-sm font-medium text-gray-900\">\r\n                        #{order.orderID}\r\n                      </div>\r\n                    </td>\r\n                    <td className=\"px-6 py-4 whitespace-nowrap\">\r\n                      <div className=\"text-sm text-gray-900\">\r\n                        {order.shippingInfo?.receiverName || 'N/A'}\r\n                      </div>\r\n                      <div className=\"text-sm text-gray-500\">\r\n                        {order.shippingInfo?.phone || 'N/A'}\r\n                      </div>\r\n                    </td>\r\n                    <td className=\"px-6 py-4 whitespace-nowrap text-sm text-gray-900\">\r\n                      {new Date(order.orderDate).toLocaleDateString('vi-VN')}\r\n                    </td>\r\n                    <td className=\"px-6 py-4 whitespace-nowrap text-sm text-gray-900\">\r\n                      {order.total?.toLocaleString()} VND\r\n                    </td>\r\n                    <td className=\"px-6 py-4 whitespace-nowrap\">\r\n                      <span className={`inline-flex px-2 py-1 text-xs font-semibold rounded-full ${getStatusBadgeClass(order.status)}`}>\r\n                        {getStatusText(order.status)}\r\n                      </span>\r\n                    </td>\r\n                    <td className=\"px-6 py-4 whitespace-nowrap text-sm text-gray-900\">\r\n                      {getPaymentMethodText(order.paymentMethod)}\r\n                    </td>\r\n                    <td className=\"px-6 py-4 whitespace-nowrap text-sm font-medium\">\r\n                      <div className=\"flex gap-2\">\r\n                        <button\r\n                          onClick={() => handleViewOrder(order.orderID)}\r\n                          className=\"text-blue-600 hover:text-blue-900\"\r\n                          title=\"Xem chi tiết\"\r\n                        >\r\n                          <FaEye />\r\n                        </button>\r\n                        <select\r\n                          value={order.status}\r\n                          onChange={(e) => handleStatusUpdate(order.orderID, parseInt(e.target.value))}\r\n                          className=\"text-xs px-2 py-1 border border-gray-300 rounded focus:ring-2 focus:ring-blue-500\"\r\n                          title=\"Cập nhật trạng thái\"\r\n                        >\r\n                          <option value={0}>Chờ thanh toán</option>\r\n                          <option value={1}>Chờ xác nhận</option>\r\n                          <option value={2}>Chờ giao hàng</option>\r\n                          <option value={3}>Đang giao hàng</option>\r\n                          <option value={4}>Hoàn thành</option>\r\n                          <option value={5}>Đã hủy</option>\r\n                          <option value={6}>Hoàn trả</option>\r\n                          <option value={7}>Yêu cầu trả hàng</option>\r\n                        </select>\r\n                      </div>\r\n                    </td>\r\n                  </tr>\r\n                ))}\r\n              </tbody>\r\n            </table>\r\n\r\n            {orders.length === 0 && !loading && (\r\n              <div className=\"p-8 text-center text-gray-500\">\r\n                Không tìm thấy đơn hàng nào\r\n              </div>\r\n            )}\r\n          </div>\r\n        )}\r\n      </div>\r\n\r\n      {/* Order Detail Modal */}\r\n      {showModal && selectedOrder && (\r\n        <div className=\"fixed inset-0 bg-gray-600 bg-opacity-50 overflow-y-auto h-full w-full z-50\">\r\n          <div className=\"relative top-20 mx-auto p-5 border w-11/12 md:w-3/4 lg:w-1/2 shadow-lg rounded-md bg-white\">\r\n            <div className=\"mt-3\">\r\n              {/* Modal Header */}\r\n              <div className=\"flex justify-between items-center mb-4\">\r\n                <h3 className=\"text-lg font-medium text-gray-900\">\r\n                  Chi tiết đơn hàng #{selectedOrder.orderID}\r\n                </h3>\r\n                <button\r\n                  onClick={() => setShowModal(false)}\r\n                  className=\"text-gray-400 hover:text-gray-600\"\r\n                >\r\n                  <span className=\"sr-only\">Close</span>\r\n                  <svg className=\"h-6 w-6\" fill=\"none\" viewBox=\"0 0 24 24\" stroke=\"currentColor\">\r\n                    <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2} d=\"M6 18L18 6M6 6l12 12\" />\r\n                  </svg>\r\n                </button>\r\n              </div>\r\n\r\n              {/* Order Info */}\r\n              <div className=\"grid grid-cols-1 md:grid-cols-2 gap-4 mb-6\">\r\n                <div>\r\n                  <h4 className=\"font-medium text-gray-900 mb-2\">Thông tin đơn hàng</h4>\r\n                  <div className=\"text-sm text-gray-600 space-y-1\">\r\n                    <div><strong>Ngày đặt:</strong> {new Date(selectedOrder.orderDate).toLocaleString('vi-VN')}</div>\r\n                    <div><strong>Trạng thái:</strong> <span className={`px-2 py-1 rounded text-xs ${getStatusBadgeClass(selectedOrder.status)}`}>{getStatusText(selectedOrder.status)}</span></div>\r\n                    <div><strong>Thanh toán:</strong> {getPaymentMethodText(selectedOrder.paymentMethod)}</div>\r\n                    <div><strong>Tổng tiền:</strong> {selectedOrder.total?.toLocaleString()} VND</div>\r\n                  </div>\r\n                </div>\r\n\r\n                {selectedOrder.shippingInfo && (\r\n                  <div>\r\n                    <h4 className=\"font-medium text-gray-900 mb-2\">Thông tin giao hàng</h4>\r\n                    <div className=\"text-sm text-gray-600 space-y-1\">\r\n                      <div><strong>Người nhận:</strong> {selectedOrder.shippingInfo.receiverName}</div>\r\n                      <div><strong>SĐT:</strong> {selectedOrder.shippingInfo.phone}</div>\r\n                      <div><strong>Địa chỉ:</strong> {selectedOrder.shippingInfo.detailAddress}</div>\r\n                      <div><strong>Phường/Xã:</strong> {selectedOrder.shippingInfo.ward}</div>\r\n                      <div><strong>Quận/Huyện:</strong> {selectedOrder.shippingInfo.district}</div>\r\n                      <div><strong>Tỉnh/TP:</strong> {selectedOrder.shippingInfo.province}</div>\r\n                      <div><strong>Phí ship:</strong> {selectedOrder.shippingInfo.shippingCost?.toLocaleString()} VND</div>\r\n                    </div>\r\n                  </div>\r\n                )}\r\n              </div>\r\n\r\n              {/* Order Items */}\r\n              {selectedOrder.orderDetails && selectedOrder.orderDetails.length > 0 && (\r\n                <div className=\"mb-6\">\r\n                  <h4 className=\"font-medium text-gray-900 mb-3\">Chi tiết sản phẩm</h4>\r\n                  <div className=\"border rounded-lg overflow-hidden\">\r\n                    <table className=\"min-w-full divide-y divide-gray-200\">\r\n                      <thead className=\"bg-gray-50\">\r\n                        <tr>\r\n                          <th className=\"px-4 py-2 text-left text-xs font-medium text-gray-500 uppercase\">Sản phẩm</th>\r\n                          <th className=\"px-4 py-2 text-left text-xs font-medium text-gray-500 uppercase\">Số lượng</th>\r\n                          <th className=\"px-4 py-2 text-left text-xs font-medium text-gray-500 uppercase\">Đơn giá</th>\r\n                          <th className=\"px-4 py-2 text-left text-xs font-medium text-gray-500 uppercase\">Thành tiền</th>\r\n                        </tr>\r\n                      </thead>\r\n                      <tbody className=\"divide-y divide-gray-200\">\r\n                        {selectedOrder.orderDetails.map((detail, index) => (\r\n                          <tr key={index}>\r\n                            <td className=\"px-4 py-2\">\r\n                              <div className=\"flex items-center\">\r\n                                <img\r\n                                  src={detail.product?.imageProducts?.[0]?.image || '/placeholder.png'}\r\n                                  alt={detail.product?.name}\r\n                                  className=\"w-10 h-10 rounded object-cover mr-3\"\r\n                                />\r\n                                <div className=\"text-sm font-medium text-gray-900\">\r\n                                  {detail.product?.name || 'Unknown Product'}\r\n                                </div>\r\n                              </div>\r\n                            </td>\r\n                            <td className=\"px-4 py-2 text-sm text-gray-900\">{detail.quantity}</td>\r\n                            <td className=\"px-4 py-2 text-sm text-gray-900\">{detail.purchasePrice?.toLocaleString()} VND</td>\r\n                            <td className=\"px-4 py-2 text-sm text-gray-900\">{detail.totalAmount?.toLocaleString()} VND</td>\r\n                          </tr>\r\n                        ))}\r\n                      </tbody>\r\n                    </table>\r\n                  </div>\r\n                </div>\r\n              )}\r\n\r\n              {/* Modal Actions */}\r\n              <div className=\"flex justify-end\">\r\n                <button\r\n                  onClick={() => setShowModal(false)}\r\n                  className=\"px-4 py-2 bg-gray-500 text-white rounded hover:bg-gray-600\"\r\n                >\r\n                  Đóng\r\n                </button>\r\n              </div>\r\n            </div>\r\n          </div>\r\n        </div>\r\n      )}\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default OrderManager; ","C:\\Users\\ADMIN\\OneDrive - FPT Corporation\\Documents\\GitHub\\Thriftorium\\src\\routes\\routes.js",[],[],"C:\\Users\\ADMIN\\OneDrive - FPT Corporation\\Documents\\GitHub\\Thriftorium\\src\\service\\AuthService.js",[],[],"C:\\Users\\ADMIN\\OneDrive - FPT Corporation\\Documents\\GitHub\\Thriftorium\\src\\service\\ProductService.js",[],[],"C:\\Users\\ADMIN\\OneDrive - FPT Corporation\\Documents\\GitHub\\Thriftorium\\src\\components\\pageProps\\Breadcrumbs.js",[],[],"C:\\Users\\ADMIN\\OneDrive - FPT Corporation\\Documents\\GitHub\\Thriftorium\\src\\components\\Banner\\Banner.js",[],[],"C:\\Users\\ADMIN\\OneDrive - FPT Corporation\\Documents\\GitHub\\Thriftorium\\src\\components\\Banner\\BannerBottom.js",[],[],"C:\\Users\\ADMIN\\OneDrive - FPT Corporation\\Documents\\GitHub\\Thriftorium\\src\\components\\home\\Footer\\Footer.js",["524","525","526","527","528","529"],[],"import React, { useState } from \"react\";\r\nimport { motion } from \"framer-motion\";\r\nimport { FaFacebook, FaYoutube, FaLinkedin, FaGithub } from \"react-icons/fa\";\r\nimport FooterListTitle from \"./FooterListTitle\";\r\nimport { paymentCard } from \"../../../assets/images\";\r\nimport Image from \"../../designLayouts/Image\";\r\n\r\nconst Footer = () => {\r\n  const [emailInfo, setEmailInfo] = useState(\"\");\r\n  const [subscription, setSubscription] = useState(false);\r\n  const [errMsg, setErrMsg] = useState(\"\");\r\n\r\n  const emailValidation = () => {\r\n    return String(emailInfo)\r\n      .toLocaleLowerCase()\r\n      .match(/^\\w+([-]?\\w+)*@\\w+([-]?\\w+)*(\\.\\w{2,3})+$/);\r\n  };\r\n\r\n  const handleSubscription = () => {\r\n    if (emailInfo === \"\") {\r\n      setErrMsg(\"Please provide an Email !\");\r\n    } else if (!emailValidation(emailInfo)) {\r\n      setErrMsg(\"Please give a valid Email!\");\r\n    } else {\r\n      setSubscription(true);\r\n      setErrMsg(\"\");\r\n      setEmailInfo(\"\");\r\n    }\r\n  };\r\n  return (\r\n    <div className=\"w-full bg-[#F5F5F3] py-20\">\r\n      <div className=\"max-w-container mx-auto grid grid-cols-1 md:grid-cols-2  xl:grid-cols-6 px-4 gap-10\">\r\n        <div className=\"col-span-2\">\r\n          <FooterListTitle title=\" Social\" />\r\n          <div className=\"flex flex-col gap-6\">\r\n            <p className=\"text-base w-full xl:w-[80%]\">\r\n            </p>\r\n            <ul className=\"flex items-center gap-2\">\r\n              <a\r\n                href=\"https://www.youtube.com/@reactjsBD\"\r\n                target=\"_blank\"\r\n                rel=\"noreferrer\"\r\n              >\r\n                <li className=\"w-7 h-7 bg-primeColor text-gray-100 hover:text-white cursor-pointer text-lg rounded-full flex justify-center items-center hover:bg-black duration-300\">\r\n                  <FaYoutube />\r\n                </li>\r\n              </a>\r\n              <a\r\n                href=\"https://github.com/noorjsdivs\"\r\n                target=\"_blank\"\r\n                rel=\"noreferrer\"\r\n              >\r\n                <li className=\"w-7 h-7 bg-primeColor text-gray-100 hover:text-white cursor-pointer text-lg rounded-full flex justify-center items-center hover:bg-black duration-300\">\r\n                  <FaGithub />\r\n                </li>\r\n              </a>\r\n              <a\r\n                href=\"https://www.facebook.com/Noorlalu143/\"\r\n                target=\"_blank\"\r\n                rel=\"noreferrer\"\r\n              >\r\n                <li className=\"w-7 h-7 bg-primeColor text-gray-100 hover:text-white cursor-pointer text-lg rounded-full flex justify-center items-center hover:bg-black duration-300\">\r\n                  <FaFacebook />\r\n                </li>\r\n              </a>\r\n              <a\r\n                href=\"https://www.linkedin.com/in/noor-mohammad-ab2245193/\"\r\n                target=\"_blank\"\r\n                rel=\"noreferrer\"\r\n              >\r\n                <li className=\"w-7 h-7 bg-primeColor text-gray-100 hover:text-white cursor-pointer text-lg rounded-full flex justify-center items-center hover:bg-black duration-300\">\r\n                  <FaLinkedin />\r\n                </li>\r\n              </a>\r\n            </ul>\r\n          </div>\r\n        </div>\r\n        <div>\r\n          <FooterListTitle title=\"Menu\" />\r\n          <ul className=\"flex flex-col gap-2\">\r\n            <li className=\"font-titleFont text-base text-lightText hover:text-black hover:underline decoration-[1px] decoration-gray-500 underline-offset-2 cursor-pointer duration-300\">\r\n              Home\r\n            </li>\r\n            <li className=\"font-titleFont text-base text-lightText hover:text-black hover:underline decoration-[1px] decoration-gray-500 underline-offset-2 cursor-pointer duration-300\">\r\n              Shop\r\n            </li>\r\n            <li className=\"font-titleFont text-base text-lightText hover:text-black hover:underline decoration-[1px] decoration-gray-500 underline-offset-2 cursor-pointer duration-300\">\r\n              About\r\n            </li>\r\n            <li className=\"font-titleFont text-base text-lightText hover:text-black hover:underline decoration-[1px] decoration-gray-500 underline-offset-2 cursor-pointer duration-300\">\r\n              Contact\r\n            </li>\r\n            <li className=\"font-titleFont text-base text-lightText hover:text-black hover:underline decoration-[1px] decoration-gray-500 underline-offset-2 cursor-pointer duration-300\">\r\n              Journal\r\n            </li>\r\n          </ul>\r\n        </div>\r\n        <div>\r\n          <FooterListTitle title=\"Quick Links\" />\r\n          <ul className=\"flex flex-col gap-2\">\r\n            <li className=\"font-titleFont text-base text-lightText hover:text-black hover:underline decoration-[1px] decoration-gray-500 underline-offset-2 cursor-pointer duration-300\">\r\n              Profile\r\n            </li>\r\n            <li className=\"font-titleFont text-base text-lightText hover:text-black hover:underline decoration-[1px] decoration-gray-500 underline-offset-2 cursor-pointer duration-300\">\r\n              Orders\r\n            </li>\r\n            <li className=\"font-titleFont text-base text-lightText hover:text-black hover:underline decoration-[1px] decoration-gray-500 underline-offset-2 cursor-pointer duration-300\">\r\n              Addresses\r\n            </li>\r\n            <li className=\"font-titleFont text-base text-lightText hover:text-black hover:underline decoration-[1px] decoration-gray-500 underline-offset-2 cursor-pointer duration-300\">\r\n              Account Details\r\n            </li>\r\n            <li className=\"font-titleFont text-base text-lightText hover:text-black hover:underline decoration-[1px] decoration-gray-500 underline-offset-2 cursor-pointer duration-300\">\r\n              Payment Options\r\n            </li>\r\n          </ul>\r\n        </div>\r\n        <div className=\"col-span-2 flex flex-col items-center w-full px-4\">\r\n          <FooterListTitle title=\"Contact\" />\r\n          <div className=\"w-full\">\r\n            <p className=\"text-center mb-4\">\r\n              0867406757\r\n            </p>\r\n            <p className=\"text-center mb-4\">\r\n              Thu Duc\r\n            </p>\r\n          </div>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default Footer;\r\n","C:\\Users\\ADMIN\\OneDrive - FPT Corporation\\Documents\\GitHub\\Thriftorium\\src\\components\\pageProps\\shopPage\\ProductBanner.js",["530","531","532","533"],[],"import React, { useEffect, useState } from \"react\";\r\nimport { BsGridFill } from \"react-icons/bs\";\r\nimport { ImList } from \"react-icons/im\";\r\nimport { GoTriangleDown } from \"react-icons/go\";\r\n\r\nconst ProductBanner = ({ onSortChange, currentSort }) => {\r\n  return (\r\n    <div className=\"w-full flex flex-col md:flex-row md:items-center justify-between\">\r\n      <div className=\"flex items-center gap-2 md:gap-6 mt-4 md:mt-0\">\r\n        <div className=\"flex items-center gap-2 text-base text-[#767676] relative\">\r\n          <label className=\"block\">Sort by:</label>\r\n          <select\r\n            value={currentSort || \"newest\"}\r\n            onChange={(e) => onSortChange && onSortChange(e.target.value)}\r\n            id=\"sortSelect\"\r\n            className=\"w-32 md:w-52 border-[1px] border-gray-200 py-1 px-4 cursor-pointer text-primeColor text-base block dark:placeholder-gray-400 appearance-none focus-within:outline-none focus-visible:border-primeColor\"\r\n          >\r\n            <option value=\"price_asc\">Price: Low to High</option>\r\n            <option value=\"price_desc\">Price: High to Low</option>\r\n          </select>\r\n          <span className=\"absolute text-sm right-2 md:right-4 top-2.5\">\r\n            <GoTriangleDown />\r\n          </span>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default ProductBanner;\r\n","C:\\Users\\ADMIN\\OneDrive - FPT Corporation\\Documents\\GitHub\\Thriftorium\\src\\components\\home\\SpecialOffers\\SpecialOffers.js",[],[],"C:\\Users\\ADMIN\\OneDrive - FPT Corporation\\Documents\\GitHub\\Thriftorium\\src\\components\\pageProps\\shopPage\\ShopSideNav.js",[],[],"C:\\Users\\ADMIN\\OneDrive - FPT Corporation\\Documents\\GitHub\\Thriftorium\\src\\components\\home\\Footer\\FooterBottom.js",[],[],"C:\\Users\\ADMIN\\OneDrive - FPT Corporation\\Documents\\GitHub\\Thriftorium\\src\\service\\RatingService.js",[],[],"C:\\Users\\ADMIN\\OneDrive - FPT Corporation\\Documents\\GitHub\\Thriftorium\\src\\service\\UserVoucherService.js",[],[],"C:\\Users\\ADMIN\\OneDrive - FPT Corporation\\Documents\\GitHub\\Thriftorium\\src\\service\\CartService.js",[],[],"C:\\Users\\ADMIN\\OneDrive - FPT Corporation\\Documents\\GitHub\\Thriftorium\\src\\service\\OrderService.js",[],[],"C:\\Users\\ADMIN\\OneDrive - FPT Corporation\\Documents\\GitHub\\Thriftorium\\src\\service\\ReviewService.js",[],[],"C:\\Users\\ADMIN\\OneDrive - FPT Corporation\\Documents\\GitHub\\Thriftorium\\src\\service\\ReportService.js",[],[],"C:\\Users\\ADMIN\\OneDrive - FPT Corporation\\Documents\\GitHub\\Thriftorium\\src\\components\\home\\Sale\\Sale.js",[],[],"C:\\Users\\ADMIN\\OneDrive - FPT Corporation\\Documents\\GitHub\\Thriftorium\\src\\components\\home\\YearProduct\\YearProduct.js",[],[],"C:\\Users\\ADMIN\\OneDrive - FPT Corporation\\Documents\\GitHub\\Thriftorium\\src\\service\\AccountAppService.js",[],[],"C:\\Users\\ADMIN\\OneDrive - FPT Corporation\\Documents\\GitHub\\Thriftorium\\src\\service\\BlogService.js",[],[],"C:\\Users\\ADMIN\\OneDrive - FPT Corporation\\Documents\\GitHub\\Thriftorium\\src\\service\\SubscriptionService.js",[],[],"C:\\Users\\ADMIN\\OneDrive - FPT Corporation\\Documents\\GitHub\\Thriftorium\\src\\service\\SubscriptionPlanService.js",[],[],"C:\\Users\\ADMIN\\OneDrive - FPT Corporation\\Documents\\GitHub\\Thriftorium\\src\\components\\home\\Header\\Header.jsx",["534"],[],"// src/components/home/Header/Header.js\r\nimport React, { useEffect, useState } from \"react\";\r\nimport { Link, NavLink, useLocation } from \"react-router-dom\";\r\nimport { MdClose } from \"react-icons/md\";\r\nimport { HiMenuAlt2 } from \"react-icons/hi\";\r\nimport { motion } from \"framer-motion\";\r\nimport { logo, logoLight } from \"../../../assets/images\";\r\nimport Image from \"../../designLayouts/Image\";\r\nimport { navBarList } from \"../../../constants\"; // for mobile\r\nimport Flex from \"../../designLayouts/Flex\";\r\n\r\nconst Header = () => {\r\n  const [showMenu, setShowMenu] = useState(true);\r\n  const [sidenav, setSidenav] = useState(false);\r\n  const [category, setCategory] = useState(false);\r\n  const [brand, setBrand] = useState(false);\r\n  const location = useLocation();\r\n\r\n  // responsive show/hide desktop menu\r\n  useEffect(() => {\r\n    const handleResize = () => setShowMenu(window.innerWidth >= 667);\r\n    handleResize();\r\n    window.addEventListener(\"resize\", handleResize);\r\n    return () => window.removeEventListener(\"resize\", handleResize);\r\n  }, []);\r\n\r\n  // desktop links\r\n  const desktopLinks = [\r\n    { title: \"Home\", to: \"/\" },\r\n    { title: \"Shop\", to: \"/shop\" },\r\n    { title: \"Blog\", to: \"/blog\" },\r\n    { title: \"About\", to: \"/about\" },\r\n  ];\r\n\r\n  return (\r\n    <div className=\"w-full h-20 bg-white sticky top-0 z-50 border-b border-gray-200\">\r\n      <nav className=\"h-full px-4 max-w-container mx-auto relative\">\r\n        <Flex className=\"flex items-center justify-between h-full\">\r\n          {/* Logo */}\r\n          <Link to=\"/\">\r\n            <Image className=\"w-20 object-cover\" imgSrc={logo} />\r\n          </Link>\r\n\r\n          <div className=\"flex items-center space-x-6\">\r\n            {/* desktop nav */}\r\n            {showMenu && (\r\n              <ul className=\"flex items-center gap-6\">\r\n                {desktopLinks.map((link, idx) => (\r\n                  <React.Fragment key={link.title}>\r\n                    <NavLink\r\n                      to={link.to}\r\n                      className={({ isActive }) =>\r\n                        \"text-base \" +\r\n                        (isActive\r\n                          ? \"font-semibold text-black\"\r\n                          : \"text-gray-600 hover:text-black\")\r\n                      }\r\n                      state={{ data: location.pathname.split(\"/\")[1] }}\r\n                    >\r\n                      {link.title}\r\n                    </NavLink>\r\n                    {idx < desktopLinks.length - 1 && (\r\n                      <span className=\"inline-block h-5 border-r border-gray-300\" />\r\n                    )}\r\n                  </React.Fragment>\r\n                ))}\r\n              </ul>\r\n            )}\r\n\r\n            {/* Post button on desktop */}\r\n            {showMenu && (\r\n              <Link\r\n                to=\"/subscription\"\r\n                className=\"ml-6 px-6 py-2 bg-green-400 hover:bg-green-500 rounded-full text-black font-medium transition\"\r\n              >\r\n                Subscription\r\n              </Link>\r\n            )}\r\n\r\n            {/* mobile menu toggle */}\r\n            {!showMenu && (\r\n              <HiMenuAlt2\r\n                onClick={() => setSidenav(true)}\r\n                className=\"w-8 h-6 cursor-pointer text-gray-600\"\r\n              />\r\n            )}\r\n          </div>\r\n        </Flex>\r\n\r\n        {/* mobile sidenav */}\r\n        {sidenav && (\r\n          <div className=\"fixed inset-0 bg-black bg-opacity-50 z-50\">\r\n            <motion.div\r\n              initial={{ x: -300, opacity: 0 }}\r\n              animate={{ x: 0, opacity: 1 }}\r\n              transition={{ duration: 0.4 }}\r\n              className=\"w-3/4 h-full bg-white p-6\"\r\n            >\r\n              <MdClose\r\n                onClick={() => setSidenav(false)}\r\n                className=\"w-6 h-6 cursor-pointer text-gray-600 mb-4\"\r\n              />\r\n\r\n              <ul className=\"space-y-2\">\r\n                {navBarList.map((item) => (\r\n                  <li key={item._id} className=\"text-lg\">\r\n                    <NavLink\r\n                      to={item.link}\r\n                      onClick={() => setSidenav(false)}\r\n                      className=\"text-gray-700 hover:text-black\"\r\n                      state={{ data: location.pathname.split(\"/\")[1] }}\r\n                    >\r\n                      {item.title}\r\n                    </NavLink>\r\n                  </li>\r\n                ))}\r\n              </ul>\r\n\r\n              {/* Category collapse */}\r\n              <div className=\"mt-6\">\r\n                <h1\r\n                  onClick={() => setCategory(!category)}\r\n                  className=\"flex justify-between cursor-pointer items-center mb-2\"\r\n                >\r\n                  Shop by Category <span>{category ? \"-\" : \"+\"}</span>\r\n                </h1>\r\n                {category && (\r\n                  <ul className=\"pl-4 space-y-1 text-gray-600\">\r\n                    <li>New Arrivals</li>\r\n                    <li>Gudgets</li>\r\n                    <li>Accessories</li>\r\n                    <li>Electronics</li>\r\n                    <li>Others</li>\r\n                  </ul>\r\n                )}\r\n              </div>\r\n\r\n              {/* Brand collapse */}\r\n              <div className=\"mt-6\">\r\n                <h1\r\n                  onClick={() => setBrand(!brand)}\r\n                  className=\"flex justify-between cursor-pointer items-center mb-2\"\r\n                >\r\n                  Shop by Brand <span>{brand ? \"-\" : \"+\"}</span>\r\n                </h1>\r\n                {brand && (\r\n                  <ul className=\"pl-4 space-y-1 text-gray-600\">\r\n                    <li>New Arrivals</li>\r\n                    <li>Gudgets</li>\r\n                    <li>Accessories</li>\r\n                    <li>Electronics</li>\r\n                    <li>Others</li>\r\n                  </ul>\r\n                )}\r\n              </div>\r\n            </motion.div>\r\n          </div>\r\n        )}\r\n      </nav>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default Header;\r\n","C:\\Users\\ADMIN\\OneDrive - FPT Corporation\\Documents\\GitHub\\Thriftorium\\src\\service\\CheckoutService.js",[],[],"C:\\Users\\ADMIN\\OneDrive - FPT Corporation\\Documents\\GitHub\\Thriftorium\\src\\service\\CategoryService.js",[],[],"C:\\Users\\ADMIN\\OneDrive - FPT Corporation\\Documents\\GitHub\\Thriftorium\\src\\service\\DashboardService.js",[],[],"C:\\Users\\ADMIN\\OneDrive - FPT Corporation\\Documents\\GitHub\\Thriftorium\\src\\service\\VoucherTemplateService.js",[],[],"C:\\Users\\ADMIN\\OneDrive - FPT Corporation\\Documents\\GitHub\\Thriftorium\\src\\service\\AccountService.js",[],[],"C:\\Users\\ADMIN\\OneDrive - FPT Corporation\\Documents\\GitHub\\Thriftorium\\src\\components\\home\\Products\\Product.jsx",["535","536"],[],"import React, { useState } from \"react\";\r\nimport { BsSuitHeartFill } from \"react-icons/bs\";\r\nimport { GiReturnArrow } from \"react-icons/gi\";\r\nimport { FaShoppingCart } from \"react-icons/fa\";\r\nimport { MdOutlineLabelImportant } from \"react-icons/md\";\r\nimport Image from \"../../designLayouts/Image\";\r\nimport Badge from \"./Badge\";\r\nimport { useNavigate } from \"react-router-dom\";\r\nimport { useDispatch } from \"react-redux\";\r\nimport { addToCart } from \"../../../redux/orebiSlice\";\r\nimport { useAuth } from \"../../../context/AuthContext\";\r\nimport CartService from \"../../../service/CartService\";\r\nimport { toast } from \"react-toastify\";\r\n\r\nconst Product = (props) => {\r\n  const dispatch = useDispatch();\r\n  const { user, isAuthenticated } = useAuth();\r\n  const [isAddingToCart, setIsAddingToCart] = useState(false);\r\n  const id = props._id;\r\n\r\n  const navigate = useNavigate();\r\n  const productItem = props;\r\n\r\n  const handleProductDetails = () => {\r\n    navigate(`/product/${id}`, {\r\n      state: {\r\n        item: productItem,\r\n      },\r\n    });\r\n  };\r\n\r\n  const handleAddToCart = async () => {\r\n    if (!isAuthenticated) {\r\n      // Nếu chưa đăng nhập, chuyển hướng đến trang đăng nhập\r\n      toast.warning(\"Vui lòng đăng nhập để thêm sản phẩm vào giỏ hàng!\");\r\n      navigate(\"/signin\");\r\n      return;\r\n    }\r\n\r\n    setIsAddingToCart(true);\r\n\r\n    try {\r\n      // Chuẩn bị dữ liệu để gửi API - chỉ cần productId và accountId\r\n      const cartData = {\r\n        productId: props._id,\r\n        accountId: user.userID, // Assuming user object has id field\r\n      };\r\n\r\n      // Gọi API thêm vào giỏ hàng\r\n      await CartService.addCart(cartData);\r\n\r\n      // Thêm vào Redux store cho UI (local state)\r\n      dispatch(\r\n        addToCart({\r\n          _id: props._id,\r\n          name: props.productName,\r\n          quantity: 1,\r\n          image: props.img,\r\n          badge: props.badge,\r\n          price: props.price,\r\n          colors: props.color,\r\n        })\r\n      );\r\n\r\n      // Thông báo thành công\r\n      toast.success(`Đã thêm \"${props.productName}\" vào giỏ hàng!`);\r\n    } catch (error) {\r\n      console.error(\"Lỗi khi thêm sản phẩm vào giỏ hàng:\", error);\r\n\r\n      // Xử lý lỗi cụ thể\r\n      if (error.response?.status === 401) {\r\n        // Token hết hạn, chuyển hướng đến trang đăng nhập\r\n        toast.error(\"Phiên đăng nhập đã hết hạn. Vui lòng đăng nhập lại!\");\r\n        navigate(\"/signin\");\r\n      } else {\r\n        // Hiển thị thông báo lỗi cho user\r\n        toast.error(\r\n          \"Có lỗi xảy ra khi thêm sản phẩm vào giỏ hàng. Vui lòng thử lại!\"\r\n        );\r\n      }\r\n    } finally {\r\n      setIsAddingToCart(false);\r\n    }\r\n  };\r\n\r\n  return (\r\n    <div className=\"w-full relative group\">\r\n      <div className=\"max-w-80 max-h-80 w-full h-full relative overflow-y-hidden \">\r\n        <div className=\"w-full h-full\">\r\n          <Image className=\"w-full h-full aspect-square\" imgSrc={props.img} />\r\n        </div>\r\n        <div className=\"absolute top-6 left-8\">\r\n          {props.badge && <Badge text=\"New\" />}\r\n        </div>\r\n        <div className=\"w-full h-16 absolute bg-white -bottom-[130px] group-hover:bottom-0 duration-700\">\r\n          <ul className=\"w-full h-full flex flex-col items-end justify-center gap-2 font-titleFont px-2 border-l border-r\">\r\n            <li\r\n              onClick={handleAddToCart}\r\n              className={`text-[#767676] hover:text-primeColor text-sm font-normal border-b-[1px] border-b-gray-200 hover:border-b-primeColor flex items-center justify-end gap-2 hover:cursor-pointer pb-1 duration-300 w-full ${\r\n                isAddingToCart ? \"opacity-50 cursor-not-allowed\" : \"\"\r\n              }`}\r\n            >\r\n              {isAddingToCart ? \"Đang thêm...\" : \"Add to Cart\"}\r\n              <span>\r\n                <FaShoppingCart />\r\n              </span>\r\n            </li>\r\n            <li\r\n              onClick={handleProductDetails}\r\n              className=\"text-[#767676] hover:text-primeColor text-sm font-normal border-b-[1px] border-b-gray-200 hover:border-b-primeColor flex items-center justify-end gap-2 hover:cursor-pointer pb-1 duration-300 w-full\"\r\n            >\r\n              View Details\r\n              <span className=\"text-lg\">\r\n                <MdOutlineLabelImportant />\r\n              </span>\r\n            </li>\r\n          </ul>\r\n        </div>\r\n      </div>\r\n      <div className=\"max-w-80 py-6 flex flex-col gap-1 border-[1px] border-t-0 px-4\">\r\n        <div className=\"flex items-center justify-between font-titleFont\">\r\n          <h2 className=\"text-lg text-primeColor font-bold\">\r\n            {props.productName}\r\n          </h2>\r\n          <p className=\"text-[#767676] text-[14px]\">{props.price}đ</p>\r\n        </div>\r\n        <div>\r\n          <p className=\"text-[#767676] text-[14px]\">{props.color}</p>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default Product;\r\n","C:\\Users\\ADMIN\\OneDrive - FPT Corporation\\Documents\\GitHub\\Thriftorium\\src\\components\\home\\NewArrivals\\NewArrivals.jsx",[],[],"C:\\Users\\ADMIN\\OneDrive - FPT Corporation\\Documents\\GitHub\\Thriftorium\\src\\pages\\Cart\\ItemCard.jsx",[],[],"C:\\Users\\ADMIN\\OneDrive - FPT Corporation\\Documents\\GitHub\\Thriftorium\\src\\assets\\images\\index.js",[],[],"C:\\Users\\ADMIN\\OneDrive - FPT Corporation\\Documents\\GitHub\\Thriftorium\\src\\components\\home\\Header\\HeaderBottom.jsx",["537","538"],[],"// src/components/home/Header/HeaderBottom.js\r\nimport React, { useState, useRef, useEffect } from \"react\";\r\nimport { motion } from \"framer-motion\";\r\nimport { HiOutlineMenuAlt4 } from \"react-icons/hi\";\r\nimport { FaSearch, FaUser, FaCaretDown, FaShoppingCart } from \"react-icons/fa\";\r\nimport Flex from \"../../designLayouts/Flex\";\r\nimport { Link, useNavigate } from \"react-router-dom\";\r\nimport { useSelector, useDispatch } from \"react-redux\";\r\nimport CategoryService from \"../../../service/CategoryService\";\r\nimport ProductService from \"../../../service/ProductService\";\r\nimport CartService from \"../../../service/CartService\";\r\nimport { useAuth } from \"../../../context/AuthContext\";\r\nimport { setCartItems } from \"../../../redux/orebiSlice\";\r\n\r\nconst HeaderBottom = () => {\r\n  const dispatch = useDispatch();\r\n  const cartItems = useSelector((state) => state.orebiReducer.cartItems);\r\n  const [show, setShow] = useState(false);\r\n  const [showUser, setShowUser] = useState(false);\r\n  const [categories, setCategories] = useState([]);\r\n  const [loadingCategories, setLoadingCategories] = useState(false);\r\n  const navigate = useNavigate();\r\n  const ref = useRef();\r\n  const { user } = useAuth();\r\n\r\n  useEffect(() => {\r\n    document.body.addEventListener(\"click\", (e) => {\r\n      if (ref?.current?.contains(e.target)) {\r\n        setShow(true);\r\n      } else {\r\n        setShow(false);\r\n      }\r\n    });\r\n  }, [show, ref]);\r\n\r\n  // Fetch cart items and update Redux store\r\n  const fetchCartItems = async () => {\r\n    if (user?.userID) {\r\n      try {\r\n        const response = await CartService.getCartByAccountId(user.userID);\r\n        const items = response?.cartItem || [];\r\n        dispatch(setCartItems(items));\r\n      } catch (error) {\r\n        console.error(\"Error fetching cart items:\", error);\r\n        dispatch(setCartItems([]));\r\n      }\r\n    } else {\r\n      dispatch(setCartItems([]));\r\n    }\r\n  };\r\n\r\n  // Initial fetch\r\n  useEffect(() => {\r\n    fetchCartItems();\r\n  }, [user?.userID, dispatch]);\r\n\r\n  // Set up polling for real-time updates\r\n  useEffect(() => {\r\n    if (!user?.userID) return;\r\n\r\n    const interval = setInterval(fetchCartItems, 5000); // Poll every 5 seconds\r\n\r\n    return () => clearInterval(interval);\r\n  }, [user?.userID]);\r\n\r\n  // Fetch categories when component mounts\r\n  useEffect(() => {\r\n    const fetchCategories = async () => {\r\n      try {\r\n        setLoadingCategories(true);\r\n        const categoryData = await CategoryService.getAllCategory();\r\n        setCategories(categoryData || []);\r\n      } catch (error) {\r\n        console.error(\"Error fetching categories:\", error);\r\n        // Fallback to static categories if API fails\r\n        setCategories([\r\n          { categoryID: 1, name: \"Accessories\" },\r\n          { categoryID: 2, name: \"Furniture\" },\r\n          { categoryID: 3, name: \"Electronics\" },\r\n          { categoryID: 4, name: \"Clothes\" },\r\n          { categoryID: 5, name: \"Bags\" },\r\n          { categoryID: 6, name: \"Home appliances\" },\r\n        ]);\r\n      } finally {\r\n        setLoadingCategories(false);\r\n      }\r\n    };\r\n\r\n    fetchCategories();\r\n  }, []);\r\n\r\n  const [searchQuery, setSearchQuery] = useState(\"\");\r\n  const [filteredProducts, setFilteredProducts] = useState([]);\r\n  const [searchLoading, setSearchLoading] = useState(false);\r\n\r\n  useEffect(() => {\r\n    const searchProducts = async () => {\r\n      if (searchQuery.trim() === \"\") {\r\n        setFilteredProducts([]);\r\n        return;\r\n      }\r\n\r\n      try {\r\n        setSearchLoading(true);\r\n        const searchResults = await ProductService.getProductsBase({\r\n          search: searchQuery,\r\n          pageSize: 10, // Limit search results to 10 items\r\n        });\r\n        setFilteredProducts(searchResults || []);\r\n      } catch (error) {\r\n        console.error(\"Error searching products:\", error);\r\n        setFilteredProducts([]);\r\n      } finally {\r\n        setSearchLoading(false);\r\n      }\r\n    };\r\n\r\n    // Debounce search to avoid too many API calls\r\n    const debounceTimer = setTimeout(() => {\r\n      searchProducts();\r\n    }, 300);\r\n\r\n    return () => clearTimeout(debounceTimer);\r\n  }, [searchQuery]);\r\n\r\n  const handleSearch = (e) => {\r\n    setSearchQuery(e.target.value);\r\n  };\r\n\r\n  const handleSearchSubmit = (e) => {\r\n    if (e.key === \"Enter\" && searchQuery.trim()) {\r\n      navigate(`/shop?search=${encodeURIComponent(searchQuery.trim())}`);\r\n      setSearchQuery(\"\");\r\n    }\r\n  };\r\n\r\n  const handleSearchIconClick = () => {\r\n    if (searchQuery.trim()) {\r\n      navigate(`/shop?search=${encodeURIComponent(searchQuery.trim())}`);\r\n      setSearchQuery(\"\");\r\n    }\r\n  };\r\n\r\n  return (\r\n    <div className=\"w-full bg-[#F5F5F3] relative\">\r\n      <div className=\"max-w-container mx-auto\">\r\n        <Flex className=\"flex flex-col lg:flex-row items-start lg:items-center justify-between w-full px-4 pb-4 lg:pb-0 h-full lg:h-24\">\r\n          {/* Category */}\r\n          <div\r\n            onClick={() => setShow(!show)}\r\n            ref={ref}\r\n            className=\"flex h-14 cursor-pointer items-center gap-2 text-primeColor\"\r\n          >\r\n            <HiOutlineMenuAlt4 className=\"w-5 h-5\" />\r\n            <p className=\"text-[14px] font-normal\">Category</p>\r\n\r\n            {show && (\r\n              <motion.ul\r\n                initial={{ y: 30, opacity: 0 }}\r\n                animate={{ y: 0, opacity: 1 }}\r\n                transition={{ duration: 0.5 }}\r\n                className=\"absolute top-36 z-50 bg-primeColor w-auto text-[#767676] p-4 pb-6\"\r\n              >\r\n                {loadingCategories ? (\r\n                  <li className=\"text-gray-400 px-4 py-1 border-b border-gray-400\">\r\n                    Loading categories...\r\n                  </li>\r\n                ) : (\r\n                  categories.map((cat) => (\r\n                    <li\r\n                      key={cat.categoryID}\r\n                      className=\"text-gray-400 px-4 py-1 border-b border-gray-400 hover:border-white hover:text-white duration-300 cursor-pointer\"\r\n                      onClick={() => {\r\n                        // Navigate to shop page with category filter\r\n                        navigate(`/shop?category=${cat.categoryID}`);\r\n                        setShow(false);\r\n                      }}\r\n                    >\r\n                      {cat.name}\r\n                    </li>\r\n                  ))\r\n                )}\r\n              </motion.ul>\r\n            )}\r\n          </div>\r\n\r\n          {/* Search */}\r\n          <div className=\"relative w-full lg:w-[600px] h-[50px] text-base text-primeColor bg-white flex items-center gap-2 justify-between px-6 rounded-xl\">\r\n            <input\r\n              type=\"text\"\r\n              value={searchQuery}\r\n              onChange={handleSearch}\r\n              onKeyDown={handleSearchSubmit}\r\n              placeholder=\"Search your products here\"\r\n              className=\"flex-1 h-full outline-none placeholder:text-[#C4C4C4] placeholder:text-[14px]\"\r\n            />\r\n            <FaSearch\r\n              className=\"w-5 h-5 cursor-pointer hover:text-black transition-colors\"\r\n              onClick={handleSearchIconClick}\r\n            />\r\n            {searchQuery && (\r\n              <div className=\"absolute top-16 left-0 w-full max-h-96 bg-white overflow-y-auto shadow-2xl scrollbar-hide z-50 cursor-pointer\">\r\n                {searchLoading ? (\r\n                  <div className=\"p-4 text-center text-gray-500\">\r\n                    Searching...\r\n                  </div>\r\n                ) : filteredProducts.length > 0 ? (\r\n                  filteredProducts.map((item) => (\r\n                    <div\r\n                      key={item.productId}\r\n                      onClick={() => {\r\n                        navigate(`/product/${item.productId}`);\r\n                        setSearchQuery(\"\");\r\n                      }}\r\n                      className=\"flex items-center gap-3 bg-gray-100 mb-3 p-3 max-w-[600px] h-28 hover:bg-gray-200 transition-colors\"\r\n                    >\r\n                      <img\r\n                        className=\"w-24 h-20 object-cover\"\r\n                        src={\r\n                          item.imageProducts?.[0]?.image ||\r\n                          \"/placeholder-image.jpg\"\r\n                        }\r\n                        alt=\"productImg\"\r\n                      />\r\n                      <div className=\"flex flex-col gap-1\">\r\n                        <p className=\"font-semibold text-lg\">{item.name}</p>\r\n                        <p className=\"text-xs line-clamp-2\">\r\n                          {item.description}\r\n                        </p>\r\n                        <p className=\"text-sm\">\r\n                          Price:{\" \"}\r\n                          <span className=\"text-primeColor font-semibold\">\r\n                            ${item.purchasePrice}\r\n                          </span>\r\n                        </p>\r\n                        {item.category && (\r\n                          <p className=\"text-xs text-gray-500\">\r\n                            Category: {item.category.name}\r\n                          </p>\r\n                        )}\r\n                      </div>\r\n                    </div>\r\n                  ))\r\n                ) : (\r\n                  <div className=\"p-4 text-center text-gray-500\">\r\n                    No products found for \"{searchQuery}\"\r\n                  </div>\r\n                )}\r\n              </div>\r\n            )}\r\n          </div>\r\n\r\n          {/* User & Cart */}\r\n          <div className=\"flex gap-4 mt-2 lg:mt-0 items-center pr-6 cursor-pointer relative\">\r\n            <div\r\n              onClick={() => setShowUser(!showUser)}\r\n              className=\"flex items-center gap-1 text-primeColor\"\r\n            >\r\n              <FaUser />\r\n              <FaCaretDown />\r\n            </div>\r\n            {showUser && (\r\n              <motion.ul\r\n                initial={{ y: 30, opacity: 0 }}\r\n                animate={{ y: 0, opacity: 1 }}\r\n                transition={{ duration: 0.5 }}\r\n                className=\"absolute top-6 right-0 z-50 bg-primeColor w-44 text-[#767676] p-4 pb-6\"\r\n              >\r\n                {!user && (\r\n                  <>\r\n                    <Link to=\"/signin\" onClick={() => setShowUser(false)}>\r\n                      <li className=\"text-gray-400 px-4 py-1 border-b border-gray-400 hover:border-white hover:text-white duration-300\">\r\n                        Login\r\n                      </li>\r\n                    </Link>\r\n                    <Link to=\"/signup\" onClick={() => setShowUser(false)}>\r\n                      <li className=\"text-gray-400 px-4 py-1 border-b border-gray-400 hover:border-white hover:text-white duration-300\">\r\n                        Sign Up\r\n                      </li>\r\n                    </Link>\r\n                  </>\r\n                )}\r\n\r\n                {/* Profile now links to /profile/account-information */}\r\n                <Link\r\n                  to=\"/profile/account-information\"\r\n                  onClick={() => setShowUser(false)}\r\n                >\r\n                  <li className=\"text-gray-400 px-4 py-1 border-b border-gray-400 hover:border-white hover:text-white duration-300\">\r\n                    Profile\r\n                  </li>\r\n                </Link>\r\n                {user &&\r\n                  (user?.roles?.includes(\"Admin\") ||\r\n                    user?.roles?.includes(\"Manager\") ||\r\n                    user?.roles?.includes(\"Staff\")) && (\r\n                    <Link\r\n                      to=\"/admin/dashboard\"\r\n                      onClick={() => setShowUser(false)}\r\n                    >\r\n                      <li className=\"text-gray-400 px-4 py-1 border-b border-gray-400 hover:border-white hover:text-white duration-300\">\r\n                        Administration\r\n                      </li>\r\n                    </Link>\r\n                  )}\r\n              </motion.ul>\r\n            )}\r\n            <Link to=\"/cart\">\r\n              <div className=\"relative text-primeColor\">\r\n                <FaShoppingCart />\r\n                <span className=\"absolute top-3 -right-2 text-xs w-4 h-4 flex items-center justify-center rounded-full bg-primeColor text-white\">\r\n                  {cartItems.length}\r\n                </span>\r\n              </div>\r\n            </Link>\r\n          </div>\r\n        </Flex>\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default HeaderBottom;\r\n","C:\\Users\\ADMIN\\OneDrive - FPT Corporation\\Documents\\GitHub\\Thriftorium\\src\\components\\SpecialCase\\SpecialCase.jsx",["539","540"],[],"import React, { useEffect } from \"react\";\r\nimport { Link } from \"react-router-dom\";\r\nimport { RiShoppingCart2Fill } from \"react-icons/ri\";\r\nimport { MdSwitchAccount } from \"react-icons/md\";\r\nimport { useSelector, useDispatch } from \"react-redux\";\r\nimport CartService from \"../../service/CartService\";\r\nimport { setCartItems } from \"../../redux/orebiSlice\";\r\nimport { useAuth } from \"../../context/AuthContext\";\r\n\r\nconst SpecialCase = () => {\r\n  const dispatch = useDispatch();\r\n  const cartItems = useSelector((state) => state.orebiReducer.cartItems);\r\n  const { user } = useAuth();\r\n\r\n  // Fetch cart items and update Redux store\r\n  const fetchCartItems = async () => {\r\n    if (user?.userID) {\r\n      try {\r\n        const response = await CartService.getCartByAccountId(user.userID);\r\n        const items = response?.cartItem || [];\r\n        dispatch(setCartItems(items));\r\n      } catch (error) {\r\n        console.error(\"Error fetching cart items:\", error);\r\n        dispatch(setCartItems([]));\r\n      }\r\n    } else {\r\n      dispatch(setCartItems([]));\r\n    }\r\n  };\r\n\r\n  // Initial fetch\r\n  useEffect(() => {\r\n    fetchCartItems();\r\n  }, [user?.userID, dispatch]);\r\n\r\n  // Set up polling for real-time updates\r\n  useEffect(() => {\r\n    if (!user?.userID) return;\r\n\r\n    const interval = setInterval(fetchCartItems, 5000); // Poll every 5 seconds\r\n\r\n    return () => clearInterval(interval);\r\n  }, [user?.userID]);\r\n\r\n  return (\r\n    <div className=\"fixed top-52 right-2 z-20 hidden md:flex flex-col gap-2\">\r\n      <Link to=\"/profile/account-information\">\r\n        <div className=\"bg-white w-16 h-[70px] rounded-md flex flex-col gap-1 text-[#33475b] justify-center items-center shadow-testShadow overflow-x-hidden group cursor-pointer\">\r\n          <div className=\"flex justify-center items-center\">\r\n            <MdSwitchAccount className=\"text-2xl -translate-x-12 group-hover:translate-x-3 transition-transform duration-200\" />\r\n            <MdSwitchAccount className=\"text-2xl -translate-x-3 group-hover:translate-x-12 transition-transform duration-200\" />\r\n          </div>\r\n          <p className=\"text-xs font-semibold font-titleFont\">Profile</p>\r\n        </div>\r\n      </Link>\r\n      <Link to=\"/cart\">\r\n        <div className=\"bg-white w-16 h-[70px] rounded-md flex flex-col gap-1 text-[#33475b] justify-center items-center shadow-testShadow overflow-x-hidden group cursor-pointer relative\">\r\n          <div className=\"flex justify-center items-center\">\r\n            <RiShoppingCart2Fill className=\"text-2xl -translate-x-12 group-hover:translate-x-3 transition-transform duration-200\" />\r\n            <RiShoppingCart2Fill className=\"text-2xl -translate-x-3 group-hover:translate-x-12 transition-transform duration-200\" />\r\n          </div>\r\n          <p className=\"text-xs font-semibold font-titleFont\">Buy Now</p>\r\n          {cartItems.length > 0 && (\r\n            <p className=\"absolute top-1 right-2 bg-primeColor text-white text-xs w-4 h-4 rounded-full flex items-center justify-center font-semibold\">\r\n              {cartItems.length}\r\n            </p>\r\n          )}\r\n        </div>\r\n      </Link>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default SpecialCase;\r\n","C:\\Users\\ADMIN\\OneDrive - FPT Corporation\\Documents\\GitHub\\Thriftorium\\src\\components\\home\\BestSellers\\BestSellers.jsx",["541"],[],"import React, { useEffect, useState } from \"react\";\r\nimport Heading from \"../Products/Heading\";\r\nimport Product from \"../Products/Product\";\r\nimport ProductService from \"../../../service/ProductService\";\r\nimport {\r\n  bestSellerOne,\r\n  bestSellerTwo,\r\n  bestSellerThree,\r\n  bestSellerFour,\r\n} from \"../../../assets/images/index\";\r\n\r\nconst BestSellers = () => {\r\n  const [bestSellers, setBestSellers] = useState([]);\r\n  const [loading, setLoading] = useState(true);\r\n\r\n  // Fallback images cho trường hợp không có ảnh từ API\r\n  const fallbackImages = [bestSellerOne, bestSellerTwo, bestSellerThree, bestSellerFour];\r\n\r\n  useEffect(() => {\r\n    const fetchBestSellers = async () => {\r\n      try {\r\n        const data = await ProductService.getTopProductInMonth(4);\r\n        setBestSellers(Array.isArray(data) ? data : []);\r\n      } catch (error) {\r\n        console.error(\"Error fetching best sellers:\", error);\r\n        setBestSellers([]);\r\n      }\r\n      setLoading(false);\r\n    };\r\n    fetchBestSellers();\r\n  }, []);\r\n\r\n  if (loading) {\r\n    return (\r\n      <div className=\"w-full pb-20\">\r\n        <Heading heading=\"Our Bestsellers\" />\r\n        <div className=\"w-full grid grid-cols-1 md:grid-cols-2 lgl:grid-cols-3 xl:grid-cols-4 gap-10\">\r\n          <div className=\"text-center\">Đang tải...</div>\r\n        </div>\r\n      </div>\r\n    );\r\n  }\r\n  return (\r\n    <div className=\"w-full pb-20\">\r\n      <Heading heading=\"Our Bestsellers\" />\r\n      <div className=\"w-full grid grid-cols-1 md:grid-cols-2 lgl:grid-cols-3 xl:grid-cols-4 gap-10\">\r\n        {bestSellers.length > 0 ? (\r\n          bestSellers.map((product, index) => (\r\n            <Product\r\n              key={product.id || product.productID}\r\n              _id={product.id || product.productID}\r\n              img={product.image}\r\n              productName={product.productName}\r\n              price={product.purchasePrice?.toString() || \"0\"}\r\n              color={product.original || \"N/A\"}\r\n              badge={product.status}\r\n              des={product.description || \"Không có mô tả\"}\r\n            />\r\n          ))\r\n        ) : (\r\n          <div className=\"col-span-full text-center text-gray-500\">\r\n            Không có sản phẩm bán chạy nào\r\n          </div>\r\n        )}\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default BestSellers;\r\n","C:\\Users\\ADMIN\\OneDrive - FPT Corporation\\Documents\\GitHub\\Thriftorium\\src\\pages\\Admin\\blog\\components\\BlogModal.jsx",["542","543"],[],"import React, { useState, useEffect } from \"react\";\r\nimport { FaTimes, FaSave, FaEdit, FaPlus, FaTrash, FaImage } from \"react-icons/fa\";\r\nimport BlogService from \"../../../../service/BlogService\";\r\nimport { toast } from \"react-toastify\";\r\nimport { useAuth } from \"../../../../context/AuthContext\";\r\n\r\nconst BlogModal = ({ mode, blog, onClose, onSave }) => {\r\n  const { user } = useAuth();\r\n  const [formData, setFormData] = useState({\r\n    title: \"\",\r\n    content: \"\",\r\n    author: \"\",\r\n    status: true,\r\n    imageBlogs: [],\r\n  });\r\n  const [loading, setLoading] = useState(false);\r\n  const [errors, setErrors] = useState({});\r\n  const [newImageUrl, setNewImageUrl] = useState(\"\");\r\n\r\n  useEffect(() => {\r\n    if (blog && (mode === \"edit\" || mode === \"view\")) {\r\n      setFormData({\r\n        title: blog.title || \"\",\r\n        content: blog.content || \"\",\r\n        author: blog.author || blog.authorName || user?.name || \"\",\r\n        status: blog.status !== undefined ? blog.status : true,\r\n        imageBlogs: blog.imageBlogs || [],\r\n      });\r\n    } else {\r\n      // Create mode\r\n      setFormData({\r\n        title: \"\",\r\n        content: \"\",\r\n        author: user?.name || \"\",\r\n        status: true,\r\n        imageBlogs: [],\r\n      });\r\n    }\r\n  }, [blog, mode, user]);\r\n\r\n  const validateForm = () => {\r\n    const newErrors = {};\r\n\r\n    if (!formData.title.trim()) {\r\n      newErrors.title = \"Tiêu đề là bắt buộc\";\r\n    } else if (formData.title.length > 200) {\r\n      newErrors.title = \"Tiêu đề không được vượt quá 200 ký tự\";\r\n    }\r\n\r\n    if (!formData.content.trim()) {\r\n      newErrors.content = \"Nội dung là bắt buộc\";\r\n    } else if (formData.content.length > 10000) {\r\n      newErrors.content = \"Nội dung không được vượt quá 10000 ký tự\";\r\n    }\r\n\r\n    if (!formData.author.trim()) {\r\n      newErrors.author = \"Tên tác giả là bắt buộc\";\r\n    }\r\n\r\n    setErrors(newErrors);\r\n    return Object.keys(newErrors).length === 0;\r\n  };\r\n\r\n  const handleSubmit = async (e) => {\r\n    e.preventDefault();\r\n\r\n    if (!validateForm()) {\r\n      toast.error(\"Vui lòng kiểm tra lại thông tin form\");\r\n      return;\r\n    }\r\n\r\n    setLoading(true);\r\n\r\n    try {\r\n      const blogData = {\r\n        accountID: user?.userID || user?.id || \"\",\r\n        title: formData.title.trim(),\r\n        content: formData.content.trim(),\r\n        author: formData.author.trim(),\r\n        status: formData.status,\r\n        imageBlogs: formData.imageBlogs.map(img => ({\r\n          image: typeof img === 'string' ? img : img.image\r\n        })),\r\n      };\r\n\r\n      if (mode === \"create\") {\r\n        await BlogService.createBlog(blogData);\r\n        toast.success(\"Tạo blog thành công!\");\r\n      } else if (mode === \"edit\") {\r\n        await BlogService.updateBlog(blog.blogID, blogData);\r\n        toast.success(\"Cập nhật blog thành công!\");\r\n      }\r\n\r\n      onSave();\r\n    } catch (error) {\r\n      console.error(\"Error saving blog:\", error);\r\n      \r\n      if (error.response?.status === 401) {\r\n        toast.error(\"Bạn không có quyền thực hiện thao tác này!\");\r\n      } else if (error.response?.status === 400) {\r\n        toast.error(\"Dữ liệu không hợp lệ. Vui lòng kiểm tra lại!\");\r\n      } else {\r\n        toast.error(\r\n          mode === \"create\" \r\n            ? \"Có lỗi xảy ra khi tạo blog\" \r\n            : \"Có lỗi xảy ra khi cập nhật blog\"\r\n        );\r\n      }\r\n    }\r\n\r\n    setLoading(false);\r\n  };\r\n\r\n  const handleInputChange = (field, value) => {\r\n    setFormData(prev => ({\r\n      ...prev,\r\n      [field]: value\r\n    }));\r\n\r\n    // Clear error when user starts typing\r\n    if (errors[field]) {\r\n      setErrors(prev => ({\r\n        ...prev,\r\n        [field]: \"\"\r\n      }));\r\n    }\r\n  };\r\n\r\n  const handleAddImage = () => {\r\n    if (newImageUrl.trim()) {\r\n      setFormData(prev => ({\r\n        ...prev,\r\n        imageBlogs: [...prev.imageBlogs, { image: newImageUrl.trim() }]\r\n      }));\r\n      setNewImageUrl(\"\");\r\n    }\r\n  };\r\n\r\n  const handleRemoveImage = (index) => {\r\n    setFormData(prev => ({\r\n      ...prev,\r\n      imageBlogs: prev.imageBlogs.filter((_, i) => i !== index)\r\n    }));\r\n  };\r\n\r\n  const getModalTitle = () => {\r\n    switch (mode) {\r\n      case \"create\":\r\n        return \"Tạo blog mới\";\r\n      case \"edit\":\r\n        return \"Chỉnh sửa blog\";\r\n      case \"view\":\r\n        return \"Xem chi tiết blog\";\r\n      default:\r\n        return \"Blog\";\r\n    }\r\n  };\r\n\r\n  const isReadOnly = mode === \"view\";\r\n\r\n  return (\r\n    <div className=\"fixed inset-0 z-50 overflow-y-auto\">\r\n      <div className=\"flex items-center justify-center min-h-screen pt-4 px-4 pb-20 text-center sm:block sm:p-0\">\r\n        {/* Background overlay */}\r\n        <div\r\n          className=\"fixed inset-0 bg-gray-500 bg-opacity-75 transition-opacity\"\r\n          onClick={onClose}\r\n        ></div>\r\n\r\n        {/* Modal */}\r\n        <div className=\"inline-block align-bottom bg-white rounded-lg text-left overflow-hidden shadow-xl transform transition-all sm:my-8 sm:align-middle sm:max-w-4xl sm:w-full\">\r\n          {/* Header */}\r\n          <div className=\"bg-white px-6 py-4 border-b border-gray-200\">\r\n            <div className=\"flex items-center justify-between\">\r\n              <h3 className=\"text-lg font-medium text-gray-900\">\r\n                {getModalTitle()}\r\n              </h3>\r\n              <button\r\n                onClick={onClose}\r\n                className=\"text-gray-400 hover:text-gray-600 transition\"\r\n              >\r\n                <FaTimes />\r\n              </button>\r\n            </div>\r\n          </div>\r\n\r\n          {/* Content */}\r\n          <form onSubmit={handleSubmit} className=\"bg-white\">\r\n            <div className=\"px-6 py-4 space-y-6 max-h-96 overflow-y-auto\">\r\n              {/* Title */}\r\n              <div>\r\n                <label className=\"block text-sm font-medium text-gray-700 mb-2\">\r\n                  Tiêu đề *\r\n                </label>\r\n                <input\r\n                  type=\"text\"\r\n                  value={formData.title}\r\n                  onChange={(e) => handleInputChange(\"title\", e.target.value)}\r\n                  disabled={isReadOnly || loading}\r\n                  className={`w-full px-3 py-2 border rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 disabled:bg-gray-100 disabled:cursor-not-allowed ${\r\n                    errors.title ? \"border-red-500\" : \"border-gray-300\"\r\n                  }`}\r\n                  placeholder=\"Nhập tiêu đề blog...\"\r\n                />\r\n                {errors.title && (\r\n                  <p className=\"mt-1 text-sm text-red-600\">{errors.title}</p>\r\n                )}\r\n              </div>\r\n\r\n              {/* Author */}\r\n              <div>\r\n                <label className=\"block text-sm font-medium text-gray-700 mb-2\">\r\n                  Tác giả *\r\n                </label>\r\n                <input\r\n                  type=\"text\"\r\n                  value={formData.author}\r\n                  onChange={(e) => handleInputChange(\"author\", e.target.value)}\r\n                  disabled={isReadOnly || loading}\r\n                  className={`w-full px-3 py-2 border rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 disabled:bg-gray-100 disabled:cursor-not-allowed ${\r\n                    errors.author ? \"border-red-500\" : \"border-gray-300\"\r\n                  }`}\r\n                  placeholder=\"Nhập tên tác giả...\"\r\n                />\r\n                {errors.author && (\r\n                  <p className=\"mt-1 text-sm text-red-600\">{errors.author}</p>\r\n                )}\r\n              </div>\r\n\r\n              {/* Content */}\r\n              <div>\r\n                <label className=\"block text-sm font-medium text-gray-700 mb-2\">\r\n                  Nội dung *\r\n                </label>\r\n                <textarea\r\n                  value={formData.content}\r\n                  onChange={(e) => handleInputChange(\"content\", e.target.value)}\r\n                  disabled={isReadOnly || loading}\r\n                  rows={8}\r\n                  className={`w-full px-3 py-2 border rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 disabled:bg-gray-100 disabled:cursor-not-allowed resize-none ${\r\n                    errors.content ? \"border-red-500\" : \"border-gray-300\"\r\n                  }`}\r\n                  placeholder=\"Nhập nội dung blog...\"\r\n                />\r\n                {errors.content && (\r\n                  <p className=\"mt-1 text-sm text-red-600\">{errors.content}</p>\r\n                )}\r\n                <p className=\"mt-1 text-sm text-gray-500\">\r\n                  {formData.content.length}/10000 ký tự\r\n                </p>\r\n              </div>\r\n\r\n              {/* Images */}\r\n              <div>\r\n                <label className=\"block text-sm font-medium text-gray-700 mb-2\">\r\n                  Hình ảnh blog\r\n                </label>\r\n                \r\n                {/* Add new image */}\r\n                {!isReadOnly && (\r\n                  <div className=\"flex gap-2 mb-3\">\r\n                    <input\r\n                      type=\"url\"\r\n                      value={newImageUrl}\r\n                      onChange={(e) => setNewImageUrl(e.target.value)}\r\n                      placeholder=\"Nhập URL hình ảnh...\"\r\n                      className=\"flex-1 px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500\"\r\n                      disabled={loading}\r\n                    />\r\n                    <button\r\n                      type=\"button\"\r\n                      onClick={handleAddImage}\r\n                      disabled={!newImageUrl.trim() || loading}\r\n                      className=\"px-3 py-2 bg-green-600 text-white rounded-lg hover:bg-green-700 disabled:bg-gray-400 disabled:cursor-not-allowed transition flex items-center gap-1\"\r\n                    >\r\n                      <FaPlus />\r\n                      Thêm\r\n                    </button>\r\n                  </div>\r\n                )}\r\n\r\n                {/* Images list */}\r\n                {formData.imageBlogs.length > 0 ? (\r\n                  <div className=\"grid grid-cols-2 gap-3\">\r\n                    {formData.imageBlogs.map((img, index) => (\r\n                      <div key={index} className=\"relative border border-gray-200 rounded-lg p-2\">\r\n                        <div className=\"aspect-video bg-gray-100 rounded mb-2 flex items-center justify-center overflow-hidden\">\r\n                          <img\r\n                            src={typeof img === 'string' ? img : img.image}\r\n                            alt={`Blog image ${index + 1}`}\r\n                            className=\"w-full h-full object-cover\"\r\n                            onError={(e) => {\r\n                              e.target.style.display = 'none';\r\n                              e.target.nextSibling.style.display = 'flex';\r\n                            }}\r\n                          />\r\n                          <div className=\"hidden items-center justify-center text-gray-400\">\r\n                            <FaImage className=\"text-2xl\" />\r\n                          </div>\r\n                        </div>\r\n                        <p className=\"text-xs text-gray-600 break-all\">\r\n                          {typeof img === 'string' ? img : img.image}\r\n                        </p>\r\n                        {!isReadOnly && (\r\n                          <button\r\n                            type=\"button\"\r\n                            onClick={() => handleRemoveImage(index)}\r\n                            className=\"absolute -top-2 -right-2 bg-red-500 text-white rounded-full w-6 h-6 flex items-center justify-center hover:bg-red-600 transition\"\r\n                            disabled={loading}\r\n                          >\r\n                            <FaTimes className=\"text-xs\" />\r\n                          </button>\r\n                        )}\r\n                      </div>\r\n                    ))}\r\n                  </div>\r\n                ) : (\r\n                  <div className=\"text-center py-4 border-2 border-dashed border-gray-300 rounded-lg\">\r\n                    <FaImage className=\"mx-auto text-gray-400 text-2xl mb-2\" />\r\n                    <p className=\"text-gray-500 text-sm\">Chưa có hình ảnh nào</p>\r\n                  </div>\r\n                )}\r\n              </div>\r\n\r\n              {/* Status */}\r\n              <div>\r\n                <label className=\"flex items-center\">\r\n                  <input\r\n                    type=\"checkbox\"\r\n                    checked={formData.status}\r\n                    onChange={(e) => handleInputChange(\"status\", e.target.checked)}\r\n                    disabled={isReadOnly || loading}\r\n                    className=\"h-4 w-4 text-blue-600 focus:ring-blue-500 border-gray-300 rounded disabled:cursor-not-allowed\"\r\n                  />\r\n                  <span className=\"ml-2 text-sm text-gray-700\">\r\n                    Blog đang hoạt động\r\n                  </span>\r\n                </label>\r\n              </div>\r\n\r\n              {/* Blog Info (for view/edit mode) */}\r\n              {blog && (mode === \"edit\" || mode === \"view\") && (\r\n                <div className=\"border-t border-gray-200 pt-4\">\r\n                  <h4 className=\"text-sm font-medium text-gray-700 mb-2\">\r\n                    Thông tin blog\r\n                  </h4>\r\n                  <div className=\"grid grid-cols-2 gap-4 text-sm text-gray-600\">\r\n                    <div>\r\n                      <span className=\"font-medium\">ID:</span> {blog.blogID}\r\n                    </div>\r\n                    <div>\r\n                      <span className=\"font-medium\">Account ID:</span> {blog.accountID}\r\n                    </div>\r\n                    <div>\r\n                      <span className=\"font-medium\">Ngày tạo:</span>{\" \"}\r\n                      {blog.createAt\r\n                        ? new Date(blog.createAt).toLocaleDateString(\"vi-VN\")\r\n                        : \"N/A\"}\r\n                    </div>\r\n                    <div>\r\n                      <span className=\"font-medium\">Cập nhật:</span>{\" \"}\r\n                      {blog.updateAt\r\n                        ? new Date(blog.updateAt).toLocaleDateString(\"vi-VN\")\r\n                        : \"N/A\"}\r\n                    </div>\r\n                  </div>\r\n                </div>\r\n              )}\r\n            </div>\r\n\r\n            {/* Footer */}\r\n            {!isReadOnly && (\r\n              <div className=\"bg-gray-50 px-6 py-3 flex justify-end space-x-3\">\r\n                <button\r\n                  type=\"button\"\r\n                  onClick={onClose}\r\n                  disabled={loading}\r\n                  className=\"px-4 py-2 text-sm font-medium text-gray-700 bg-white border border-gray-300 rounded-lg hover:bg-gray-50 disabled:cursor-not-allowed transition\"\r\n                >\r\n                  Hủy\r\n                </button>\r\n                <button\r\n                  type=\"submit\"\r\n                  disabled={loading}\r\n                  className=\"px-4 py-2 text-sm font-medium text-white bg-blue-600 rounded-lg hover:bg-blue-700 disabled:bg-blue-400 disabled:cursor-not-allowed transition flex items-center gap-2\"\r\n                >\r\n                  {loading ? (\r\n                    <>\r\n                      <div className=\"animate-spin rounded-full h-4 w-4 border-b-2 border-white\"></div>\r\n                      Đang xử lý...\r\n                    </>\r\n                  ) : (\r\n                    <>\r\n                      {mode === \"create\" ? <FaSave /> : <FaEdit />}\r\n                      {mode === \"create\" ? \"Tạo blog\" : \"Cập nhật\"}\r\n                    </>\r\n                  )}\r\n                </button>\r\n              </div>\r\n            )}\r\n\r\n            {/* View mode footer */}\r\n            {isReadOnly && (\r\n              <div className=\"bg-gray-50 px-6 py-3 flex justify-end\">\r\n                <button\r\n                  type=\"button\"\r\n                  onClick={onClose}\r\n                  className=\"px-4 py-2 text-sm font-medium text-gray-700 bg-white border border-gray-300 rounded-lg hover:bg-gray-50 transition\"\r\n                >\r\n                  Đóng\r\n                </button>\r\n              </div>\r\n            )}\r\n          </form>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default BlogModal; ","C:\\Users\\ADMIN\\OneDrive - FPT Corporation\\Documents\\GitHub\\Thriftorium\\src\\pages\\Admin\\category\\components\\CategoryModal.jsx",[],[],"C:\\Users\\ADMIN\\OneDrive - FPT Corporation\\Documents\\GitHub\\Thriftorium\\src\\pages\\Admin\\user\\components\\UserModal.jsx",[],[],"C:\\Users\\ADMIN\\OneDrive - FPT Corporation\\Documents\\GitHub\\Thriftorium\\src\\pages\\Admin\\products\\components\\ProductModal.jsx",[],[],"C:\\Users\\ADMIN\\OneDrive - FPT Corporation\\Documents\\GitHub\\Thriftorium\\src\\components\\designLayouts\\Image.js",[],[],"C:\\Users\\ADMIN\\OneDrive - FPT Corporation\\Documents\\GitHub\\Thriftorium\\src\\components\\home\\Products\\Heading.js",[],[],"C:\\Users\\ADMIN\\OneDrive - FPT Corporation\\Documents\\GitHub\\Thriftorium\\src\\components\\home\\Footer\\FooterListTitle.js",[],[],"C:\\Users\\ADMIN\\OneDrive - FPT Corporation\\Documents\\GitHub\\Thriftorium\\src\\components\\designLayouts\\Flex.js",[],[],"C:\\Users\\ADMIN\\OneDrive - FPT Corporation\\Documents\\GitHub\\Thriftorium\\src\\constants\\index.js",[],[],"C:\\Users\\ADMIN\\OneDrive - FPT Corporation\\Documents\\GitHub\\Thriftorium\\src\\components\\home\\Products\\Badge.js",[],[],"C:\\Users\\ADMIN\\OneDrive - FPT Corporation\\Documents\\GitHub\\Thriftorium\\src\\components\\designLayouts\\buttons\\ShopNow.js",[],[],"C:\\Users\\ADMIN\\OneDrive - FPT Corporation\\Documents\\GitHub\\Thriftorium\\src\\components\\pageProps\\shopPage\\shopBy\\Category.js",["544","545","546"],[],"import React, { useState, useEffect } from \"react\";\r\nimport { ImPlus } from \"react-icons/im\";\r\nimport NavTitle from \"./NavTitle\";\r\nimport CategoryService from \"../../../../service/CategoryService\";\r\n\r\nconst Category = ({ selectedCategory, onCategoryChange }) => {\r\n  const [showSubCatOne, setShowSubCatOne] = useState(false);\r\n  const [categories, setCategories] = useState([]);\r\n  const [loading, setLoading] = useState(false);\r\n\r\n  useEffect(() => {\r\n    const fetchCategories = async () => {\r\n      try {\r\n        setLoading(true);\r\n        const categoryData = await CategoryService.getAllCategory();\r\n        setCategories(categoryData || []);\r\n      } catch (error) {\r\n        console.error(\"Error fetching categories:\", error);\r\n        // Fallback to static categories if API fails\r\n        setCategories([\r\n          { categoryID: 1, name: \"Accessories\" },\r\n          { categoryID: 2, name: \"Furniture\" },\r\n          { categoryID: 3, name: \"Electronics\" },\r\n          { categoryID: 4, name: \"Clothes\" },\r\n          { categoryID: 5, name: \"Bags\" },\r\n          { categoryID: 6, name: \"Home appliances\" }\r\n        ]);\r\n      } finally {\r\n        setLoading(false);\r\n      }\r\n    };\r\n\r\n    fetchCategories();\r\n  }, []);\r\n  return (\r\n    <div className=\"w-full\">\r\n      <NavTitle title=\"Shop by Category\" icons={false} />\r\n      <div>\r\n        {loading ? (\r\n          <div className=\"text-sm text-gray-500 py-2\">Loading categories...</div>\r\n        ) : (\r\n        <ul className=\"flex flex-col gap-4 text-sm lg:text-base text-[#767676]\">\r\n            {/* All Categories option */}\r\n            <li\r\n              className={`border-b-[1px] border-b-[#F0F0F0] pb-2 flex items-center justify-between cursor-pointer hover:text-primeColor duration-300 ${\r\n                !selectedCategory || selectedCategory === '' ? 'text-primeColor font-semibold' : ''\r\n              }`}\r\n              onClick={() => onCategoryChange('')}\r\n            >\r\n              All Categories\r\n            </li>\r\n            {categories.map(({ categoryID, name }) => (\r\n              <li\r\n                key={categoryID}\r\n                className={`border-b-[1px] border-b-[#F0F0F0] pb-2 flex items-center justify-between cursor-pointer hover:text-primeColor duration-300 ${\r\n                  selectedCategory === categoryID.toString() ? 'text-primeColor font-semibold' : ''\r\n                }`}\r\n                onClick={() => onCategoryChange(categoryID.toString())}\r\n              >\r\n                {name}\r\n            </li>\r\n          ))}\r\n        </ul>\r\n        )}\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default Category;\r\n","C:\\Users\\ADMIN\\OneDrive - FPT Corporation\\Documents\\GitHub\\Thriftorium\\src\\components\\pageProps\\shopPage\\shopBy\\Price.js",[],[],"C:\\Users\\ADMIN\\OneDrive - FPT Corporation\\Documents\\GitHub\\Thriftorium\\src\\components\\home\\NewArrivals\\SampleNextArrow.jsx",[],[],"C:\\Users\\ADMIN\\OneDrive - FPT Corporation\\Documents\\GitHub\\Thriftorium\\src\\components\\home\\NewArrivals\\SamplePrevArrow.jsx",[],[],"C:\\Users\\ADMIN\\OneDrive - FPT Corporation\\Documents\\GitHub\\Thriftorium\\src\\components\\pageProps\\shopPage\\shopBy\\NavTitle.js",[],[],{"ruleId":"547","severity":1,"message":"548","line":10,"column":9,"nodeType":"549","messageId":"550","endLine":10,"endColumn":17},{"ruleId":"547","severity":1,"message":"551","line":11,"column":24,"nodeType":"549","messageId":"550","endLine":11,"endColumn":39},{"ruleId":"547","severity":1,"message":"552","line":16,"column":10,"nodeType":"549","messageId":"550","endLine":16,"endColumn":23},{"ruleId":"547","severity":1,"message":"553","line":12,"column":10,"nodeType":"549","messageId":"550","endLine":12,"endColumn":26},{"ruleId":"547","severity":1,"message":"554","line":12,"column":28,"nodeType":"549","messageId":"550","endLine":12,"endColumn":47},{"ruleId":"547","severity":1,"message":"555","line":13,"column":10,"nodeType":"549","messageId":"550","endLine":13,"endColumn":29},{"ruleId":"547","severity":1,"message":"556","line":13,"column":31,"nodeType":"549","messageId":"550","endLine":13,"endColumn":53},{"ruleId":"547","severity":1,"message":"557","line":26,"column":9,"nodeType":"549","messageId":"550","endLine":26,"endColumn":17},{"ruleId":"558","severity":1,"message":"559","line":38,"column":38,"nodeType":"560","messageId":"561","endLine":38,"endColumn":40},{"ruleId":"558","severity":1,"message":"559","line":84,"column":39,"nodeType":"560","messageId":"561","endLine":84,"endColumn":41},{"ruleId":"547","severity":1,"message":"562","line":2,"column":34,"nodeType":"549","messageId":"550","endLine":2,"endColumn":38},{"ruleId":"547","severity":1,"message":"563","line":6,"column":3,"nodeType":"549","messageId":"550","endLine":6,"endColumn":16},{"ruleId":"564","severity":1,"message":"565","line":73,"column":6,"nodeType":"566","endLine":73,"endColumn":32,"suggestions":"567"},{"ruleId":"547","severity":1,"message":"568","line":341,"column":5,"nodeType":"549","messageId":"550","endLine":341,"endColumn":14},{"ruleId":"547","severity":1,"message":"562","line":2,"column":34,"nodeType":"549","messageId":"550","endLine":2,"endColumn":38},{"ruleId":"564","severity":1,"message":"569","line":21,"column":6,"nodeType":"566","endLine":21,"endColumn":14,"suggestions":"570"},{"ruleId":"547","severity":1,"message":"562","line":3,"column":10,"nodeType":"549","messageId":"550","endLine":3,"endColumn":14},{"ruleId":"547","severity":1,"message":"571","line":3,"column":50,"nodeType":"549","messageId":"550","endLine":3,"endColumn":58},{"ruleId":"564","severity":1,"message":"572","line":28,"column":6,"nodeType":"566","endLine":28,"endColumn":53,"suggestions":"573"},{"ruleId":"547","severity":1,"message":"574","line":123,"column":9,"nodeType":"549","messageId":"550","endLine":123,"endColumn":25},{"ruleId":"547","severity":1,"message":"575","line":128,"column":9,"nodeType":"549","messageId":"550","endLine":128,"endColumn":27},{"ruleId":"547","severity":1,"message":"576","line":10,"column":10,"nodeType":"549","messageId":"550","endLine":10,"endColumn":23},{"ruleId":"547","severity":1,"message":"577","line":12,"column":10,"nodeType":"549","messageId":"550","endLine":12,"endColumn":29},{"ruleId":"547","severity":1,"message":"578","line":7,"column":10,"nodeType":"549","messageId":"550","endLine":7,"endColumn":19},{"ruleId":"547","severity":1,"message":"579","line":16,"column":9,"nodeType":"549","messageId":"550","endLine":16,"endColumn":17},{"ruleId":"547","severity":1,"message":"580","line":17,"column":9,"nodeType":"549","messageId":"550","endLine":17,"endColumn":17},{"ruleId":"547","severity":1,"message":"581","line":9,"column":11,"nodeType":"549","messageId":"550","endLine":9,"endColumn":15},{"ruleId":"564","severity":1,"message":"572","line":22,"column":6,"nodeType":"566","endLine":22,"endColumn":31,"suggestions":"582"},{"ruleId":"564","severity":1,"message":"583","line":41,"column":6,"nodeType":"566","endLine":41,"endColumn":77,"suggestions":"584"},{"ruleId":"547","severity":1,"message":"585","line":3,"column":3,"nodeType":"549","messageId":"550","endLine":3,"endColumn":16},{"ruleId":"564","severity":1,"message":"586","line":61,"column":6,"nodeType":"566","endLine":61,"endColumn":27,"suggestions":"587"},{"ruleId":"547","severity":1,"message":"588","line":2,"column":17,"nodeType":"549","messageId":"550","endLine":2,"endColumn":23},{"ruleId":"564","severity":1,"message":"589","line":75,"column":6,"nodeType":"566","endLine":75,"endColumn":8,"suggestions":"590"},{"ruleId":"547","severity":1,"message":"591","line":2,"column":10,"nodeType":"549","messageId":"550","endLine":2,"endColumn":16},{"ruleId":"547","severity":1,"message":"592","line":5,"column":10,"nodeType":"549","messageId":"550","endLine":5,"endColumn":21},{"ruleId":"547","severity":1,"message":"593","line":6,"column":8,"nodeType":"549","messageId":"550","endLine":6,"endColumn":13},{"ruleId":"547","severity":1,"message":"594","line":10,"column":10,"nodeType":"549","messageId":"550","endLine":10,"endColumn":22},{"ruleId":"547","severity":1,"message":"595","line":11,"column":10,"nodeType":"549","messageId":"550","endLine":11,"endColumn":16},{"ruleId":"547","severity":1,"message":"596","line":19,"column":9,"nodeType":"549","messageId":"550","endLine":19,"endColumn":27},{"ruleId":"547","severity":1,"message":"597","line":1,"column":17,"nodeType":"549","messageId":"550","endLine":1,"endColumn":26},{"ruleId":"547","severity":1,"message":"598","line":1,"column":28,"nodeType":"549","messageId":"550","endLine":1,"endColumn":36},{"ruleId":"547","severity":1,"message":"599","line":2,"column":10,"nodeType":"549","messageId":"550","endLine":2,"endColumn":20},{"ruleId":"547","severity":1,"message":"600","line":3,"column":10,"nodeType":"549","messageId":"550","endLine":3,"endColumn":16},{"ruleId":"547","severity":1,"message":"601","line":7,"column":16,"nodeType":"549","messageId":"550","endLine":7,"endColumn":25},{"ruleId":"547","severity":1,"message":"602","line":2,"column":10,"nodeType":"549","messageId":"550","endLine":2,"endColumn":25},{"ruleId":"547","severity":1,"message":"603","line":3,"column":10,"nodeType":"549","messageId":"550","endLine":3,"endColumn":23},{"ruleId":"564","severity":1,"message":"604","line":55,"column":6,"nodeType":"566","endLine":55,"endColumn":30,"suggestions":"605"},{"ruleId":"564","severity":1,"message":"604","line":64,"column":6,"nodeType":"566","endLine":64,"endColumn":20,"suggestions":"606"},{"ruleId":"564","severity":1,"message":"604","line":34,"column":6,"nodeType":"566","endLine":34,"endColumn":30,"suggestions":"607"},{"ruleId":"564","severity":1,"message":"604","line":43,"column":6,"nodeType":"566","endLine":43,"endColumn":20,"suggestions":"608"},{"ruleId":"547","severity":1,"message":"609","line":17,"column":9,"nodeType":"549","messageId":"550","endLine":17,"endColumn":23},{"ruleId":"547","severity":1,"message":"610","line":2,"column":43,"nodeType":"549","messageId":"550","endLine":2,"endColumn":50},{"ruleId":"611","severity":1,"message":"612","line":288,"column":27,"nodeType":"613","endLine":296,"endColumn":29},{"ruleId":"547","severity":1,"message":"614","line":2,"column":10,"nodeType":"549","messageId":"550","endLine":2,"endColumn":16},{"ruleId":"547","severity":1,"message":"615","line":7,"column":10,"nodeType":"549","messageId":"550","endLine":7,"endColumn":23},{"ruleId":"547","severity":1,"message":"616","line":7,"column":25,"nodeType":"549","messageId":"550","endLine":7,"endColumn":41},"no-unused-vars","'location' is assigned a value but never used.","Identifier","unusedVar","'setSearchParams' is assigned a value but never used.","'totalProducts' is assigned a value but never used.","'verificationCode' is assigned a value but never used.","'setVerificationCode' is assigned a value but never used.","'errVerificationCode' is assigned a value but never used.","'setErrVerificationCode' is assigned a value but never used.","'navigate' is assigned a value but never used.","eqeqeq","Expected '===' and instead saw '=='.","BinaryExpression","unexpected","'Link' is defined but never used.","'FaCheckCircle' is defined but never used.","react-hooks/exhaustive-deps","React Hook useEffect has a missing dependency: 'user'. Either include it or remove the dependency array.","ArrayExpression",["617"],"'productID' is assigned a value but never used.","React Hook useEffect has missing dependencies: 'fetchBlogDetail' and 'fetchRelatedBlogs'. Either include them or remove the dependency array.",["618"],"'FaFilter' is defined but never used.","React Hook useEffect has a missing dependency: 'fetchBlogs'. Either include it or remove the dependency array.",["619"],"'handleSortChange' is assigned a value but never used.","'handleStatusChange' is assigned a value but never used.","'paymentMethod' is assigned a value but never used.","'currentSubscription' is assigned a value but never used.","'resetCart' is defined but never used.","'dispatch' is assigned a value but never used.","'products' is assigned a value but never used.","'user' is assigned a value but never used.",["620"],"React Hook useEffect has a missing dependency: 'filterAndSortUsers'. Either include it or remove the dependency array.",["621"],"'FaShoppingBag' is defined but never used.","React Hook useEffect has a missing dependency: 'fetchReports'. Either include it or remove the dependency array.",["622"],"'FaEdit' is defined but never used.","React Hook useEffect has a missing dependency: 'fetchOrders'. Either include it or remove the dependency array.",["623"],"'motion' is defined but never used.","'paymentCard' is defined but never used.","'Image' is defined but never used.","'subscription' is assigned a value but never used.","'errMsg' is assigned a value but never used.","'handleSubscription' is assigned a value but never used.","'useEffect' is defined but never used.","'useState' is defined but never used.","'BsGridFill' is defined but never used.","'ImList' is defined but never used.","'logoLight' is defined but never used.","'BsSuitHeartFill' is defined but never used.","'GiReturnArrow' is defined but never used.","React Hook useEffect has a missing dependency: 'fetchCartItems'. Either include it or remove the dependency array.",["624"],["625"],["626"],["627"],"'fallbackImages' is assigned a value but never used.","'FaTrash' is defined but never used.","jsx-a11y/img-redundant-alt","Redundant alt attribute. Screen-readers already announce `img` tags as an image. You don’t need to use the words `image`, `photo,` or `picture` (or any specified custom words) in the alt prop.","JSXOpeningElement","'ImPlus' is defined but never used.","'showSubCatOne' is assigned a value but never used.","'setShowSubCatOne' is assigned a value but never used.",{"desc":"628","fix":"629"},{"desc":"630","fix":"631"},{"desc":"632","fix":"633"},{"desc":"634","fix":"635"},{"desc":"636","fix":"637"},{"desc":"638","fix":"639"},{"desc":"640","fix":"641"},{"desc":"642","fix":"643"},{"desc":"644","fix":"645"},{"desc":"642","fix":"646"},{"desc":"644","fix":"647"},"Update the dependencies array to be: [isLoggedIn, user, user.userID]",{"range":"648","text":"649"},"Update the dependencies array to be: [blogID, fetchBlogDetail, fetchRelatedBlogs]",{"range":"650","text":"651"},"Update the dependencies array to be: [currentPage, fetchBlogs, searchTerm, sortBy, statusFilter]",{"range":"652","text":"653"},"Update the dependencies array to be: [currentPage, fetchBlogs, searchTerm]",{"range":"654","text":"655"},"Update the dependencies array to be: [users, searchTerm, statusFilter, roleFilter, sortField, sortDirection, filterAndSortUsers]",{"range":"656","text":"657"},"Update the dependencies array to be: [currentPage, fetchReports, search]",{"range":"658","text":"659"},"Update the dependencies array to be: [fetchOrders]",{"range":"660","text":"661"},"Update the dependencies array to be: [user.userID, dispatch, fetchCartItems]",{"range":"662","text":"663"},"Update the dependencies array to be: [fetchCartItems, user?.userID]",{"range":"664","text":"665"},{"range":"666","text":"663"},{"range":"667","text":"665"},[2686,2712],"[isLoggedIn, user, user.userID]",[776,784],"[blogID, fetchBlogDetail, fetchRelatedBlogs]",[1243,1290],"[currentPage, fetchBlogs, searchTerm, sortBy, statusFilter]",[932,957],"[currentPage, fetchBlogs, searchTerm]",[1277,1348],"[users, searchTerm, statusFilter, roleFilter, sortField, sortDirection, filterAndSortUsers]",[1865,1886],"[currentPage, fetchReports, search]",[2339,2341],"[fetchOrders]",[1978,2002],"[user.userID, dispatch, fetchCartItems]",[2237,2251],"[fetchCartItems, user?.userID]",[1141,1165],[1400,1414]]